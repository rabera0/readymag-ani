import{a as N,b as gt,c as K,d as ht,e as U,f as ut,g as G,h as ft,i as M,j as wt,k as _,l as bt}from"https://st-p.rmcdn.net/a09f30ec/dist/c/c-GINFWJGD.js";import{f as H,t as W,w as mt}from"https://st-p.rmcdn.net/a09f30ec/dist/c/c-MVDJARLS.js";import{a as v,b as F}from"https://st-p.rmcdn.net/a09f30ec/dist/c/c-2RLUC7BF.js";import{a as u,b as O,k as S}from"https://st-p.rmcdn.net/a09f30ec/dist/c/c-TAIIFXDM.js";import{b as y,c as V}from"https://st-p.rmcdn.net/a09f30ec/dist/c/c-OA344QFY.js";import{a as $,d as pt}from"https://st-p.rmcdn.net/a09f30ec/dist/c/c-3GOT4LKE.js";import{B as R,C as i,D as h,E as w}from"https://st-p.rmcdn.net/a09f30ec/dist/c/c-U6WQ4G6W.js";import{a as ct}from"https://st-p.rmcdn.net/a09f30ec/dist/c/c-7ZY2VSVL.js";import{b as dt}from"https://st-p.rmcdn.net/a09f30ec/dist/c/c-IJGABWID.js";import{a as A,d as lt}from"https://st-p.rmcdn.net/a09f30ec/dist/c/c-4X7D5KOI.js";function q({isVisible:t,isDarkBackground:o,type:e,onClick:c}){let m=`lightbox-arrow-${e}`;return h(xt,{"data-testid":m,position:"absolute",top:"50%",marginTop:"-4rm",zIndex:3100,onClick:c,initial:{opacity:0},animate:{opacity:t?1:0,left:e==="left"?t?24:-40:"auto",right:e==="right"?t?24:-40:"auto"},variant:"clean",children:[i(v,{id:m,children:e==="left"?"Previous":"Next"}),e==="left"?o?i(N,{}):i(U,{}):o?i(K,{}):i(G,{})]})}function yt({isVisible:t,isDarkBackground:o,onPrev:e,onNext:c}){return h(R,{children:[i(q,{isVisible:t,isDarkBackground:o,type:"left",onClick:e}),i(q,{isVisible:t,isDarkBackground:o,type:"right",onClick:c})]})}var xt,J,Q=A(()=>{"use strict";V();F();S();gt();ht();ut();ft();w();xt=u(y);J=yt});function X(t){return h(vt,{initial:{opacity:0},animate:{opacity:t.isVisible?1:0},"data-testid":"lightbox-cross",onClick:t.onClick,position:"absolute",right:"2rm",top:"2rm",zIndex:3100,variant:"clean",children:[i(v,{id:"lightbox-cross",children:"Close"}),t.isDarkBackground?i(M,{}):i(_,{})]})}var vt,Y=A(()=>{"use strict";V();F();S();wt();bt();w();vt=u(y)});function kt({mode:t,isVisible:o,slides:e,onClose:c,index:r,onSlideChange:d,originRect:m}){let[Z,j]=(0,s.useState)("prev"),a=(0,s.useMemo)(()=>e[r],[e,r]),[tt,I]=(0,s.useState)(!1),[p,it]=(0,s.useState)(!1),f=(0,s.useMemo)(()=>e.map((n,l)=>n.gallery?l:null).filter(n=>n!==null),[e]),k=e.length>1&&a.gallery,{isImageLoaded:ot,preloadImage:et}=Lt(),C=ot(a.imgSrc)||tt&&p&&et(a.imgSrc),D=C?"zoom-out":"wait",[L,nt]=(0,s.useState)({height:window.innerHeight,width:window.innerWidth});function P(){nt({height:window.innerHeight,width:window.innerWidth})}let rt=(0,s.useMemo)(()=>{let{r:n,g:l,b:g,a:at}=H(a.color);return`rgba(${n}, ${l}, ${g}, ${at})`},[a.color]),st={hidden:{opacity:0},visible:{opacity:1}},z={position:"absolute",inset:0,height:"100%",width:"100%"},E=(0,s.useMemo)(()=>{let{top:n=0,left:l=0,...g}=m;return{...g,top:`${n*100/L.height}%`,left:`${l*100/L.width}%`,opacity:0}},[m,L]);function b(n){if(!k||!d)return;I(!1),j(n);let l=f.indexOf(r),g=n==="next"?l+1:l-1;n==="next"?g<f.length?d(f[g]):d(f[0]):g>=0?d(f[g]):d(f[f.length-1])}function x(){p&&c&&c()}function B(n){switch(n.key){case"Escape":x();break;case"ArrowLeft":b("prev");break;case"ArrowRight":b("next");break;default:break}}(0,s.useEffect)(()=>(window.addEventListener("resize",P),t==="viewer"&&p&&(o?window.addEventListener("keyup",B):window.removeEventListener("keyup",B)),()=>{window.removeEventListener("resize",P),window.removeEventListener("keyup",B)}),[o,a,p]);let T=(0,s.useMemo)(()=>W(a.color),[a]);return h($,{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:2999,pointerEvents:p?"all":"none",children:[i(X,{isDarkBackground:!T,isVisible:o&&p,onClick:x}),t==="viewer"&&k&&i(J,{isDarkBackground:!T,isVisible:o&&p,onPrev:()=>b("prev"),onNext:()=>b("next")}),i(u.div,{onClick:x,variants:st,initial:"hidden",animate:o?"visible":"hidden",style:{backgroundColor:rt,position:"absolute",zIndex:0,width:"100%",height:"100%",transition:".3s background-color",cursor:D}}),i(O,{children:o&&i(u.div,{variants:{initial:E,animate:{top:"50%",left:"50%",height:a.height,width:a.width,opacity:1},exit:k?{opacity:0}:E},initial:"initial",animate:"animate",exit:"exit",onClick:x,style:{position:"absolute",zIndex:10,cursor:D},onAnimationComplete:n=>{let l=n==="exit";it(!l),I(!l)},transition:{mass:1,stiffness:170,damping:26},children:h(u.div,{initial:{opacity:0,left:p?Z==="next"?"100%":"-100%":0},animate:{opacity:1,left:"0%"},style:{position:"absolute",transform:"translate(-50%, -50%)",height:"inherit",width:"inherit"},transition:{mass:1,stiffness:170,damping:26},children:[C&&i("img",{style:{...z,zIndex:20},src:a.imgSrc}),i("img",{"data-testid":"lightbox-image",style:{...z,zIndex:10,filter:"blur(0.4px)"},src:a.previewImgSrc})]},a._id)})})]})}function Lt(){let[t,o]=(0,s.useState)({});function e(r){if(t.hasOwnProperty(r))return t[r];let d=new Image;d.onload=()=>{o({...t,[r]:!0})},d.onerror=()=>{let m={...t};delete m[r],o(m)},d.src=r,o({...t,[r]:!1})}function c(r){return t.hasOwnProperty(r)?t[r]:!1}return{isImageLoaded:c,preloadImage:e}}var s,Qt,Bt=A(()=>{"use strict";s=lt(ct());pt();S();dt();mt();Q();Y();w();Qt=kt});export{Qt as a,Bt as b};
