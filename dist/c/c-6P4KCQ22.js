import{b as Rs,f as Os,g as ud}from"https://st-p.rmcdn.net/a09f30ec/dist/c/c-Z4COXDDT.js";import{a as ad}from"https://st-p.rmcdn.net/a09f30ec/dist/c/c-7ZY2VSVL.js";import{a as b,b as Ts,c as sd,d as Cs}from"https://st-p.rmcdn.net/a09f30ec/dist/c/c-4X7D5KOI.js";var Ms,Ds=b(()=>{"use strict";(function(t){t[t.Registration=11192105]="Registration",t[t.FirstPurchase=11192113]="FirstPurchase",t[t.BookDemo=11192121]="BookDemo"})(Ms||(Ms={}))});var Ls=Ts((Ps,ks)=>{"use strict";(function(t){var e;if(typeof define=="function"&&define.amd&&(define(t),e=!0),typeof Ps=="object"&&(ks.exports=t(),e=!0),!e){var r=window.Cookies,n=window.Cookies=t();n.noConflict=function(){return window.Cookies=r,n}}})(function(){function t(){for(var n=0,i={};n<arguments.length;n++){var o=arguments[n];for(var s in o)i[s]=o[s]}return i}function e(n){return n.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}function r(n){function i(){}function o(c,u,a){if(!(typeof document>"u")){a=t({path:"/"},i.defaults,a),typeof a.expires=="number"&&(a.expires=new Date(new Date*1+a.expires*864e5)),a.expires=a.expires?a.expires.toUTCString():"";try{var l=JSON.stringify(u);/^[\{\[]/.test(l)&&(u=l)}catch{}u=n.write?n.write(u,c):encodeURIComponent(String(u)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),c=encodeURIComponent(String(c)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var f="";for(var d in a)a[d]&&(f+="; "+d,a[d]!==!0&&(f+="="+a[d].split(";")[0]));return document.cookie=c+"="+u+f}}function s(c,u){if(!(typeof document>"u")){for(var a={},l=document.cookie?document.cookie.split("; "):[],f=0;f<l.length;f++){var d=l[f].split("="),p=d.slice(1).join("=");!u&&p.charAt(0)==='"'&&(p=p.slice(1,-1));try{var h=e(d[0]);if(p=(n.read||n)(p,h)||e(p),u)try{p=JSON.parse(p)}catch{}if(a[h]=p,c===h)break}catch{}}return c?a[c]:a}}return i.set=o,i.get=function(c){return s(c,!1)},i.getJSON=function(c){return s(c,!0)},i.remove=function(c,u){o(c,"",t(u,{expires:-1}))},i.defaults={},i.withConverter=r,i}return r(function(){})})});var ge,er=b(()=>{"use strict";ge=()=>typeof window<"u"});async function Yn({partnerId:t}){if(!(!ge()||Ns()||!t))return new Promise((e,r)=>{window._linkedin_data_partner_ids=window._linkedin_data_partner_ids||[],window._linkedin_data_partner_ids.push(t);let n=document.getElementsByTagName("script")[0],i=document.createElement("script");i.type="text/javascript",i.async=!0,i.src="https://snap.licdn.com/li.lms-analytics/insight.min.js",i.onload=()=>e(),i.onerror=()=>r(),n?.parentNode?.insertBefore(i,n);let o=document.createElement("img");o.alt="",o.height=1,o.width=1,o.src=`https://px.ads.linkedin.com/collect/?pid=${t}&fmt=gif`})}async function As({partnerId:t,eventId:e}){!ge()||!e||(!Ns()&&t&&await Yn({partnerId:t}),window?.lintrk?.("track",{conversion_id:e}))}var Ns,Us=b(()=>{"use strict";er();Ns=()=>!!window?.lintrk});var Fs,js=b(()=>{"use strict";(function(t){t.Registration="iGBtCP76u9QDEIu60MsD",t.FirstPurchase="IAUrCIivjtYDEIu60MsD",t.FirstPurchasePersonal="7fmQCNLswYAYEIu60MsD",t.FirstPurchaseFreelancer="REXDCIHywYAYEIu60MsD",t.FirstPurchaseStudio="86PxCICIw4AYEIu60MsD",t.FirstPurchaseBusiness="o7gMCOKNw4AYEIu60MsD"})(Fs||(Fs={}))});var Qn,rr,tr,Et,cd,ld,fd,dd,pd,hd,md,gd,vd,Zn=b(()=>{"use strict";Qn=Cs(Ls());Us();er();js();Ds();rr=()=>{if(ge())return!!window.gtag},tr="",Et="",cd=({GA_ID:t,GA4_ID:e,GOOGLE_ADS_ID:r,userId:n,userEmail:i})=>{let o=document.createElement("script");o.async=!0,o.src=`https://www.googletagmanager.com/gtag/js?id=${t}`,document.head.appendChild(o);let s=document.createElement("script");s.text=`
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    ${e?`gtag('config', '${e}', { send_page_view: false, user_id: '${n||""}' });`:""}
    gtag('js', new Date());
    gtag('set', {
      'send_page_view': false,
      'custom_map': {
        'dimension2': 'userId',
        'dimension9': 'userId',
        'dimension13': 'clientId'
      }
    })
    ${n?`gtag('config', '${t}', { 'userId': '${n}'});`:`gtag('config', '${t}');`}
    ${r?`gtag('config', '${r}', { "allow_enhanced_conversions": true });`:""}
    ${r&&i?`gtag('set', 'user_data', { "email": "${i}" });`:""}
  `,document.head.appendChild(s)},ld=({userId:t,ignoreIsGAInitialized:e=!1,GA_ID:r,GA4_ID:n,GOOGLE_ADS_ID:i,userEmail:o})=>{if(!(!ge()||rr()&&!e))return tr=n||"",cd({GA_ID:r,GA4_ID:n,GOOGLE_ADS_ID:i,userId:t,userEmail:o}),{GA_ID:r,GA4_ID:n,GOOGLE_ADS_ID:i,userId:t}},fd=()=>{let t=Qn.default.get("shortlink_redirect");if(!t)return{};let e=JSON.parse(atob(t));return Qn.default.remove("shortlink_redirect"),{campaignName:e.utm_campaign,campaignSource:e.utm_source,campaignMedium:e.utm_medium}},dd=({campaignName:t,campaignSource:e,campaignMedium:r}={})=>{if(!ge()||!rr())return null;let n={...fd(),campaignName:t,campaignSource:e,campaignMedium:r},i=(o,s)=>{let c={campaign:{name:o.campaignName,source:o.campaignSource,medium:o.campaignMedium},c_id:s||""};window.gtag("event","page_view",c)};return tr?Et?i(n,Et):window.gtag("get",tr,"client_id",o=>{Et=o,i(n,o)}):i(n),n},pd=(t,e={})=>{if(!ge()||!rr())return null;let r=n=>{let i={c_id:n||"",event_label:e.eventLabel,value:e.eventValue};for(let o in e)["eventLabel","eventValue"].includes(o)||(i[o]=e[o]);window.gtag("event",t,i)};return tr?Et?r(Et):window.gtag("get",tr,"client_id",n=>{typeof n=="string"&&(Et=n,r(Et))}):r(""),{action:t,...e}},hd=({actionName:t,eventLabel:e,eventCategory:r})=>!ge()||!rr()?null:(window.gtag("event",t,{event_category:r,event_label:e}),{actionName:t,eventCategory:r,eventLabel:e}),md=({CONVERSION_ID:t,CONVERSION_LABEL:e,value:r,transaction_id:n="",...i})=>{if(!ge()||!rr())return null;let o={};return r&&(o={value:r,transaction_id:n,currency:"USD"}),o={send_to:`${t}/${e}`,...o,...i},window.gtag("event","conversion",o),{...i,CONVERSION_ID:t,CONVERSION_LABEL:e}},gd=({location:t,role:e,withAnalytics:r=!0})=>!t||!ge()?Promise.resolve():fetch(`/api/me/visit/${t}/${e||""}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({withAnalytics:r})}),vd={init:ld,sendEvent:pd,sendConversionEvent:md,sendPromoActionEvent:hd,trackPage:dd,trackDailyVisit:gd,initLinkedInInsights:Yn,sendEventToLinkedInInsights:As}});var Bs,Ws,Vs,Gs=b(()=>{"use strict";(function(t){t.Create="create",t.PageView="pageview",t.ProfileSettings="profileSettings",t.ProfileClick="profileClick",t.ProfileSettingsUsage="profileSettingsUsage",t.ProfileBanner="profileBanner"})(Bs||(Bs={}));(function(t){t.Publish="publish",t.Preview="preview",t.WidgetAdd="widgetAdd",t.WidgetTotal="widgetTotal",t.WidgetFeature="widgetFeature",t.WidgetMisc="widgetMisc",t.OpenProject="openProject",t.ViewportFeature="viewportFeature",t.SettingsProject="settingsProject",t.SettingsViewer="settingsViewer",t.SettingsGeneral="settingsGeneral",t.Template="template",t.MyTemplates="myTemplates",t.HelpTour="helpTour",t.HelpTourProgress="helpTourProgress",t.HelpTourLeave="helpTourLeave",t.EditorTips="editorTips",t.EditorTips2="editorTips2",t.EditorHelp="editorHelp",t.EditorActions="editorActions",t.ContentEditMode="contentEditMode",t.Zendesk="zendesk",t.BlocksMode="blocksMode",t.CommentsMode="commentsMode",t.CommentAdd="commentAdd",t.Popup="popup",t.SettingsLayers="settingsLayers",t.ActionsMade="actionsMade",t.AnimationAddStep="animationAddStep",t.AnimationAddTrigger="animationAddTrigger",t.AnimationLoad="animationLoad",t.AnimationSettings="animationSettings",t.AnimationPresetSelected="animationPresetSelected",t.SettingsPreviewViewer="settingsPreviewViewer",t.PresetAdd="presetAdd",t.PresetClick="presetClick",t.PresetMisc="presetMisc",t.PresetSave="presetSave",t.WidgetArrange="widgetArrange",t.WhatsNewPopup="whatsNewPopup",t.GroupEdit="groupEdit",t.ExamplesSubmit="examplesSubmit",t.WidgetLottie="widgetLottie",t.WidgetVideoUpload="widgetVideoUpload",t.WidgetVideoState="widgetVideoState"})(Ws||(Ws={}));(function(t){t.UpgradeBanner="upgradeBanner"})(Vs||(Vs={}))});function Me(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Jn(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function nr(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function x(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function c(l){try{a(n.next(l))}catch(f){s(f)}}function u(l){try{a(n.throw(l))}catch(f){s(f)}}function a(l){l.done?o(l.value):i(l.value).then(c,u)}a((n=n.apply(t,e||[])).next())})}function T(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function c(a){return function(l){return u([a,l])}}function u(a){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(r=0)),r;)try{if(n=1,i&&(o=a[0]&2?i.return:a[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[a[0]&2,o.value]),a[0]){case 0:case 1:o=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,i=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(a[0]===6||a[0]===2)){r=0;continue}if(a[0]===3&&(!o||a[1]>o[0]&&a[1]<o[3])){r.label=a[1];break}if(a[0]===6&&r.label<o[1]){r.label=o[1],o=a;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(a);break}o[2]&&r.ops.pop(),r.trys.pop();continue}a=e.call(t,r)}catch(l){a=[6,l],i=0}finally{n=o=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}}function $e(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function xe(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(c){s={error:c}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o}function ir(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))}var Jn,D,q=b(()=>{"use strict";Jn=function(t,e){return Jn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},Jn(t,e)};D=function(){return D=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},D.apply(this,arguments)}});var qs,Hs,$s,zs,Ks,Xs,Ys,ei=b(()=>{"use strict";qs="Event tracked successfully",Hs="Unexpected error occurred",$s="Event rejected due to exceeded retry count",zs="Event skipped due to optOut config",Ks="Event rejected due to missing API key",Xs="Invalid API key",Ys="Client not initialized"});var ve,Ze,ut,Qs=b(()=>{"use strict";(function(t){t.SET="$set",t.SET_ONCE="$setOnce",t.ADD="$add",t.APPEND="$append",t.PREPEND="$prepend",t.REMOVE="$remove",t.PREINSERT="$preInsert",t.POSTINSERT="$postInsert",t.UNSET="$unset",t.CLEAR_ALL="$clearAll"})(ve||(ve={}));(function(t){t.REVENUE_PRODUCT_ID="$productId",t.REVENUE_QUANTITY="$quantity",t.REVENUE_PRICE="$price",t.REVENUE_TYPE="$revenueType",t.REVENUE="$revenue"})(Ze||(Ze={}));(function(t){t.IDENTIFY="$identify",t.GROUP_IDENTIFY="$groupidentify",t.REVENUE="revenue_amount"})(ut||(ut={}))});var be,Zs=b(()=>{"use strict";(function(t){t[t.None=0]="None",t[t.Error=1]="Error",t[t.Warn=2]="Warn",t[t.Verbose=3]="Verbose",t[t.Debug=4]="Debug"})(be||(be={}))});var X,Js=b(()=>{"use strict";(function(t){t.Unknown="unknown",t.Skipped="skipped",t.Success="success",t.RateLimit="rate_limit",t.PayloadTooLarge="payload_too_large",t.Invalid="invalid",t.Failed="failed",t.Timeout="Timeout",t.SystemError="SystemError"})(X||(X={}))});var ti,ea=b(()=>{"use strict";ti=null});var Ne=b(()=>{"use strict";Qs();Zs();Js();ea()});var Je,Br=b(()=>{"use strict";Ne();Je=function(t,e,r){return e===void 0&&(e=0),r===void 0&&(r=X.Unknown),{event:t,code:e,message:r}}});var Ae,Wr=b(()=>{"use strict";Ae=function(t){return t?(t^Math.random()*16>>t/4).toString(16):(String(1e7)+String(-1e3)+String(-4e3)+String(-8e3)+String(-1e11)).replace(/[018]/g,Ae)}});var ta,ra=b(()=>{"use strict";q();Br();Wr();ta=function(){function t(e){this.client=e,this.queue=[],this.applying=!1,this.plugins=[]}return t.prototype.register=function(e,r){var n,i,o;return x(this,void 0,void 0,function(){return T(this,function(s){switch(s.label){case 0:return e.name=(n=e.name)!==null&&n!==void 0?n:Ae(),e.type=(i=e.type)!==null&&i!==void 0?i:"enrichment",[4,(o=e.setup)===null||o===void 0?void 0:o.call(e,r,this.client)];case 1:return s.sent(),this.plugins.push(e),[2]}})})},t.prototype.deregister=function(e){var r;return x(this,void 0,void 0,function(){var n,i;return T(this,function(o){switch(o.label){case 0:return n=this.plugins.findIndex(function(s){return s.name===e}),i=this.plugins[n],this.plugins.splice(n,1),[4,(r=i.teardown)===null||r===void 0?void 0:r.call(i)];case 1:return o.sent(),[2]}})})},t.prototype.reset=function(e){this.applying=!1;var r=this.plugins;r.map(function(n){var i;return(i=n.teardown)===null||i===void 0?void 0:i.call(n)}),this.plugins=[],this.client=e},t.prototype.push=function(e){var r=this;return new Promise(function(n){r.queue.push([e,n]),r.scheduleApply(0)})},t.prototype.scheduleApply=function(e){var r=this;this.applying||(this.applying=!0,setTimeout(function(){r.apply(r.queue.shift()).then(function(){r.applying=!1,r.queue.length>0&&r.scheduleApply(0)})},e))},t.prototype.apply=function(e){return x(this,void 0,void 0,function(){var r,n,i,o,s,c,u,p,h,a,l,f,d,p,h,m,g,_,v,y,w,E;return T(this,function(I){switch(I.label){case 0:if(!e)return[2];r=xe(e,1),n=r[0],i=xe(e,2),o=i[1],s=this.plugins.filter(function(C){return C.type==="before"}),I.label=1;case 1:I.trys.push([1,6,7,8]),c=$e(s),u=c.next(),I.label=2;case 2:return u.done?[3,5]:(p=u.value,p.execute?[4,p.execute(D({},n))]:[3,4]);case 3:if(h=I.sent(),h===null)return o({event:n,code:0,message:""}),[2];n=h,I.label=4;case 4:return u=c.next(),[3,2];case 5:return[3,8];case 6:return a=I.sent(),v={error:a},[3,8];case 7:try{u&&!u.done&&(y=c.return)&&y.call(c)}finally{if(v)throw v.error}return[7];case 8:l=this.plugins.filter(function(C){return C.type==="enrichment"||C.type===void 0}),I.label=9;case 9:I.trys.push([9,14,15,16]),f=$e(l),d=f.next(),I.label=10;case 10:return d.done?[3,13]:(p=d.value,p.execute?[4,p.execute(D({},n))]:[3,12]);case 11:if(h=I.sent(),h===null)return o({event:n,code:0,message:""}),[2];n=h,I.label=12;case 12:return d=f.next(),[3,10];case 13:return[3,16];case 14:return m=I.sent(),w={error:m},[3,16];case 15:try{d&&!d.done&&(E=f.return)&&E.call(f)}finally{if(w)throw w.error}return[7];case 16:return g=this.plugins.filter(function(C){return C.type==="destination"}),_=g.map(function(C){var S=D({},n);return C.execute(S).catch(function(O){return Je(S,0,String(O))})}),Promise.all(_).then(function(C){var S=xe(C,1),O=S[0],M=O||Je(n,100,"Event not tracked, no destination plugins on the instance");o(M)}),[2]}})})},t.prototype.flush=function(){return x(this,void 0,void 0,function(){var e,r,n,i=this;return T(this,function(o){switch(o.label){case 0:return e=this.queue,this.queue=[],[4,Promise.all(e.map(function(s){return i.apply(s)}))];case 1:return o.sent(),r=this.plugins.filter(function(s){return s.type==="destination"}),n=r.map(function(s){return s.flush&&s.flush()}),[4,Promise.all(n)];case 2:return o.sent(),[2]}})})},t}()});var ri,It,ni,ii,na,ia,oa,or=b(()=>{"use strict";ri="-",It="AMP",ni="".concat(It,"_unsent"),ii="https://api2.amplitude.com/2/httpapi",na="https://api.eu.amplitude.com/2/httpapi",ia="https://api2.amplitude.com/batch",oa="https://api.eu.amplitude.com/batch"});var yd,Vr,oi,si=b(()=>{"use strict";q();yd=1e3,Vr=function(t){if(Object.keys(t).length>yd)return!1;for(var e in t){var r=t[e];if(!oi(e,r))return!1}return!0},oi=function(t,e){var r,n;if(typeof t!="string")return!1;if(Array.isArray(e)){var i=!0;try{for(var o=$e(e),s=o.next();!s.done;s=o.next()){var c=s.value;if(Array.isArray(c))return!1;if(typeof c=="object")i=i&&Vr(c);else if(!["number","string"].includes(typeof c))return!1;if(!i)return!1}}catch(u){r={error:u}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}}else{if(e==null)return!1;if(typeof e=="object")return Vr(e);if(!["number","string","boolean"].includes(typeof e))return!1}return!0}});var Be,ai=b(()=>{"use strict";q();Ne();or();si();Be=function(){function t(){this._propertySet=new Set,this._properties={}}return t.prototype.getUserProperties=function(){return D({},this._properties)},t.prototype.set=function(e,r){return this._safeSet(ve.SET,e,r),this},t.prototype.setOnce=function(e,r){return this._safeSet(ve.SET_ONCE,e,r),this},t.prototype.append=function(e,r){return this._safeSet(ve.APPEND,e,r),this},t.prototype.prepend=function(e,r){return this._safeSet(ve.PREPEND,e,r),this},t.prototype.postInsert=function(e,r){return this._safeSet(ve.POSTINSERT,e,r),this},t.prototype.preInsert=function(e,r){return this._safeSet(ve.PREINSERT,e,r),this},t.prototype.remove=function(e,r){return this._safeSet(ve.REMOVE,e,r),this},t.prototype.add=function(e,r){return this._safeSet(ve.ADD,e,r),this},t.prototype.unset=function(e){return this._safeSet(ve.UNSET,e,ri),this},t.prototype.clearAll=function(){return this._properties={},this._properties[ve.CLEAR_ALL]=ri,this},t.prototype._safeSet=function(e,r,n){if(this._validate(e,r,n)){var i=this._properties[e];return i===void 0&&(i={},this._properties[e]=i),i[r]=n,this._propertySet.add(r),!0}return!1},t.prototype._validate=function(e,r,n){return this._properties[ve.CLEAR_ALL]!==void 0||this._propertySet.has(r)?!1:e===ve.ADD?typeof n=="number":e!==ve.UNSET&&e!==ve.REMOVE?oi(r,n):!0},t}()});var sa,sr,aa,ua,ca,ui=b(()=>{"use strict";q();Ne();ai();sa=function(t,e,r){var n=typeof t=="string"?{event_type:t}:t;return D(D(D({},n),r),e&&{event_properties:e})},sr=function(t,e){var r=D(D({},e),{event_type:ut.IDENTIFY,user_properties:t.getUserProperties()});return r},aa=function(t,e,r,n){var i,o=D(D({},n),{event_type:ut.GROUP_IDENTIFY,group_properties:r.getUserProperties(),groups:(i={},i[t]=e,i)});return o},ua=function(t,e,r){var n,i=new Be;i.set(t,e);var o=D(D({},r),{event_type:ut.IDENTIFY,user_properties:i.getUserProperties(),groups:(n={},n[t]=e,n)});return o},ca=function(t,e){return D(D({},e),{event_type:ut.REVENUE,event_properties:t.getEventProperties()})}});var _e,ci=b(()=>{"use strict";_e=function(t){return{promise:t||Promise.resolve()}}});var li,la=b(()=>{"use strict";q();ei();ra();ui();Br();ci();li=function(){function t(e){e===void 0&&(e="$default"),this.initializing=!1,this.isReady=!1,this.q=[],this.dispatchQ=[],this.logEvent=this.track.bind(this),this.timeline=new ta(this),this.name=e}return t.prototype._init=function(e){return x(this,void 0,void 0,function(){return T(this,function(r){switch(r.label){case 0:return this.config=e,this.timeline.reset(this),[4,this.runQueuedFunctions("q")];case 1:return r.sent(),this.isReady=!0,[2]}})})},t.prototype.runQueuedFunctions=function(e){return x(this,void 0,void 0,function(){var r,n,i,o,s,c,u,a;return T(this,function(l){switch(l.label){case 0:r=this[e],this[e]=[],l.label=1;case 1:l.trys.push([1,8,9,10]),n=$e(r),i=n.next(),l.label=2;case 2:return i.done?[3,7]:(o=i.value,s=o(),s&&"promise"in s?[4,s.promise]:[3,4]);case 3:return l.sent(),[3,6];case 4:return[4,s];case 5:l.sent(),l.label=6;case 6:return i=n.next(),[3,2];case 7:return[3,10];case 8:return c=l.sent(),u={error:c},[3,10];case 9:try{i&&!i.done&&(a=n.return)&&a.call(n)}finally{if(u)throw u.error}return[7];case 10:return this[e].length?[4,this.runQueuedFunctions(e)]:[3,12];case 11:l.sent(),l.label=12;case 12:return[2]}})})},t.prototype.track=function(e,r,n){var i=sa(e,r,n);return _e(this.dispatch(i))},t.prototype.identify=function(e,r){var n=sr(e,r);return _e(this.dispatch(n))},t.prototype.groupIdentify=function(e,r,n,i){var o=aa(e,r,n,i);return _e(this.dispatch(o))},t.prototype.setGroup=function(e,r,n){var i=ua(e,r,n);return _e(this.dispatch(i))},t.prototype.revenue=function(e,r){var n=ca(e,r);return _e(this.dispatch(n))},t.prototype.add=function(e){return this.isReady?this._addPlugin(e):(this.q.push(this._addPlugin.bind(this,e)),_e())},t.prototype._addPlugin=function(e){return _e(this.timeline.register(e,this.config))},t.prototype.remove=function(e){return this.isReady?this._removePlugin(e):(this.q.push(this._removePlugin.bind(this,e)),_e())},t.prototype._removePlugin=function(e){return _e(this.timeline.deregister(e))},t.prototype.dispatchWithCallback=function(e,r){if(!this.isReady)return r(Je(e,0,Ys));this.process(e).then(r)},t.prototype.dispatch=function(e){return x(this,void 0,void 0,function(){var r=this;return T(this,function(n){return this.isReady?[2,this.process(e)]:[2,new Promise(function(i){r.dispatchQ.push(r.dispatchWithCallback.bind(r,e,i))})]})})},t.prototype.process=function(e){return x(this,void 0,void 0,function(){var i,r,n,i;return T(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),this.config.optOut?[2,Je(e,0,zs)]:[4,this.timeline.push(e)];case 1:return i=o.sent(),i.code===200?this.config.loggerProvider.log(i.message):i.code===100?this.config.loggerProvider.warn(i.message):this.config.loggerProvider.error(i.message),[2,i];case 2:return r=o.sent(),n=String(r),this.config.loggerProvider.error(n),i=Je(e,0,n),[2,i];case 3:return[2]}})})},t.prototype.setOptOut=function(e){if(!this.isReady){this.q.push(this._setOptOut.bind(this,!!e));return}this._setOptOut(e)},t.prototype._setOptOut=function(e){this.config.optOut=!!e},t.prototype.flush=function(){return _e(this.timeline.flush())},t}()});var Gr,fa=b(()=>{"use strict";q();Ne();si();Gr=function(){function t(){this.productId="",this.quantity=1,this.price=0}return t.prototype.setProductId=function(e){return this.productId=e,this},t.prototype.setQuantity=function(e){return e>0&&(this.quantity=e),this},t.prototype.setPrice=function(e){return this.price=e,this},t.prototype.setRevenueType=function(e){return this.revenueType=e,this},t.prototype.setRevenue=function(e){return this.revenue=e,this},t.prototype.setEventProperties=function(e){return Vr(e)&&(this.properties=e),this},t.prototype.getEventProperties=function(){var e=this.properties?D({},this.properties):{};return e[Ze.REVENUE_PRODUCT_ID]=this.productId,e[Ze.REVENUE_QUANTITY]=this.quantity,e[Ze.REVENUE_PRICE]=this.price,e[Ze.REVENUE_TYPE]=this.revenueType,e[Ze.REVENUE]=this.revenue,e},t}()});var da,pa=b(()=>{"use strict";da=function(t,e){var r=Math.max(e,1);return t.reduce(function(n,i,o){var s=Math.floor(o/r);return n[s]||(n[s]=[]),n[s].push(i),n},[])}});var qr,ar,fi=b(()=>{"use strict";Ne();qr="Amplitude Logger ",ar=function(){function t(){this.logLevel=be.None}return t.prototype.disable=function(){this.logLevel=be.None},t.prototype.enable=function(e){e===void 0&&(e=be.Warn),this.logLevel=e},t.prototype.log=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.logLevel<be.Verbose||console.log("".concat(qr,"[Log]: ").concat(e.join(" ")))},t.prototype.warn=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.logLevel<be.Warn||console.warn("".concat(qr,"[Warn]: ").concat(e.join(" ")))},t.prototype.error=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.logLevel<be.Error||console.error("".concat(qr,"[Error]: ").concat(e.join(" ")))},t.prototype.debug=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.logLevel<be.Debug||console.log("".concat(qr,"[Debug]: ").concat(e.join(" ")))},t}()});var Hr,di,bd,pi,hi=b(()=>{"use strict";Ne();or();fi();Hr=function(){return{flushMaxRetries:12,flushQueueSize:200,flushIntervalMillis:1e4,instanceName:"$default_instance",logLevel:be.Warn,loggerProvider:new ar,offline:!1,optOut:!1,serverUrl:ii,serverZone:"US",useBatch:!1}},di=function(){function t(e){var r,n,i,o;this._optOut=!1;var s=Hr();this.apiKey=e.apiKey,this.flushIntervalMillis=(r=e.flushIntervalMillis)!==null&&r!==void 0?r:s.flushIntervalMillis,this.flushMaxRetries=e.flushMaxRetries||s.flushMaxRetries,this.flushQueueSize=e.flushQueueSize||s.flushQueueSize,this.instanceName=e.instanceName||s.instanceName,this.loggerProvider=e.loggerProvider||s.loggerProvider,this.logLevel=(n=e.logLevel)!==null&&n!==void 0?n:s.logLevel,this.minIdLength=e.minIdLength,this.plan=e.plan,this.ingestionMetadata=e.ingestionMetadata,this.offline=e.offline!==void 0?e.offline:s.offline,this.optOut=(i=e.optOut)!==null&&i!==void 0?i:s.optOut,this.serverUrl=e.serverUrl,this.serverZone=e.serverZone||s.serverZone,this.storageProvider=e.storageProvider,this.transportProvider=e.transportProvider,this.useBatch=(o=e.useBatch)!==null&&o!==void 0?o:s.useBatch,this.loggerProvider.enable(this.logLevel);var c=pi(e.serverUrl,e.serverZone,e.useBatch);this.serverZone=c.serverZone,this.serverUrl=c.serverUrl}return Object.defineProperty(t.prototype,"optOut",{get:function(){return this._optOut},set:function(e){this._optOut=e},enumerable:!1,configurable:!0}),t}(),bd=function(t,e){return t==="EU"?e?oa:na:e?ia:ii},pi=function(t,e,r){if(t===void 0&&(t=""),e===void 0&&(e=Hr().serverZone),r===void 0&&(r=Hr().useBatch),t)return{serverUrl:t,serverZone:void 0};var n=["US","EU"].includes(e)?e:Hr().serverZone;return{serverZone:n,serverUrl:bd(n,r)}}});function _d(t){return t instanceof Error?t.message:String(t)}function $r(t){var e="";try{"body"in t&&(e=JSON.stringify(t.body,null,2))}catch{}return e}var mi,ha=b(()=>{"use strict";q();Ne();ei();or();pa();Br();hi();Wr();mi=function(){function t(){this.name="amplitude",this.type="destination",this.retryTimeout=1e3,this.throttleTimeout=3e4,this.storageKey="",this.scheduled=null,this.queue=[]}return t.prototype.setup=function(e){var r;return x(this,void 0,void 0,function(){var n,i=this;return T(this,function(o){switch(o.label){case 0:return this.config=e,this.storageKey="".concat(ni,"_").concat(this.config.apiKey.substring(0,10)),[4,(r=this.config.storageProvider)===null||r===void 0?void 0:r.get(this.storageKey)];case 1:return n=o.sent(),n&&n.length>0&&Promise.all(n.map(function(s){return i.execute(s)})).catch(),[2,Promise.resolve(void 0)]}})})},t.prototype.execute=function(e){var r=this;return e.insert_id||(e.insert_id=Ae()),new Promise(function(n){var i={event:e,attempts:0,callback:function(o){return n(o)},timeout:0};r.addToQueue(i)})},t.prototype.getTryableList=function(e){var r=this;return e.filter(function(n){return n.attempts<r.config.flushMaxRetries?(n.attempts+=1,!0):(r.fulfillRequest([n],500,$s),!1)})},t.prototype.scheduleTryable=function(e,r){var n=this;r===void 0&&(r=!1),e.forEach(function(i){if(r&&(n.queue=n.queue.concat(i)),i.timeout===0){n.schedule(n.config.flushIntervalMillis);return}setTimeout(function(){i.timeout=0,n.schedule(0)},i.timeout)})},t.prototype.addToQueue=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=this.getTryableList(e);this.scheduleTryable(n,!0),this.saveEvents()},t.prototype.schedule=function(e){var r=this;this.scheduled||this.config.offline||(this.scheduled=setTimeout(function(){r.flush(!0).then(function(){r.queue.length>0&&r.schedule(e)})},e))},t.prototype.flush=function(e){return e===void 0&&(e=!1),x(this,void 0,void 0,function(){var r,n,i,o=this;return T(this,function(s){switch(s.label){case 0:return this.config.offline?(this.config.loggerProvider.debug("Skipping flush while offline."),[2]):(r=[],n=[],this.queue.forEach(function(c){return c.timeout===0?r.push(c):n.push(c)}),this.scheduled&&(clearTimeout(this.scheduled),this.scheduled=null),i=da(r,this.config.flushQueueSize),[4,Promise.all(i.map(function(c){return o.send(c,e)}))]);case 1:return s.sent(),this.scheduleTryable(n),[2]}})})},t.prototype.send=function(e,r){return r===void 0&&(r=!0),x(this,void 0,void 0,function(){var n,i,o,s,c;return T(this,function(u){switch(u.label){case 0:if(!this.config.apiKey)return[2,this.fulfillRequest(e,400,Ks)];n={api_key:this.config.apiKey,events:e.map(function(a){var l=a.event,f=l.extra,d=nr(l,["extra"]);return d}),options:{min_id_length:this.config.minIdLength},client_upload_time:new Date().toISOString()},u.label=1;case 1:return u.trys.push([1,3,,4]),i=pi(this.config.serverUrl,this.config.serverZone,this.config.useBatch).serverUrl,[4,this.config.transportProvider.send(i,n)];case 2:return o=u.sent(),o===null?(this.fulfillRequest(e,0,Hs),[2]):r?(this.handleResponse(o,e),[3,4]):("body"in o?this.fulfillRequest(e,o.statusCode,"".concat(o.status,": ").concat($r(o))):this.fulfillRequest(e,o.statusCode,o.status),[2]);case 3:return s=u.sent(),c=_d(s),this.config.loggerProvider.error(c),this.handleResponse({status:X.Failed,statusCode:0},e),[3,4];case 4:return[2]}})})},t.prototype.handleResponse=function(e,r){var n=e.status;switch(n){case X.Success:{this.handleSuccessResponse(e,r);break}case X.Invalid:{this.handleInvalidResponse(e,r);break}case X.PayloadTooLarge:{this.handlePayloadTooLargeResponse(e,r);break}case X.RateLimit:{this.handleRateLimitResponse(e,r);break}default:{this.config.loggerProvider.warn(`{code: 0, error: "Status '`.concat(n,"' provided for ").concat(r.length,' events"}')),this.handleOtherResponse(r);break}}},t.prototype.handleSuccessResponse=function(e,r){this.fulfillRequest(r,e.statusCode,qs)},t.prototype.handleInvalidResponse=function(e,r){var n=this;if(e.body.missingField||e.body.error.startsWith(Xs)){this.fulfillRequest(r,e.statusCode,e.body.error);return}var i=ir(ir(ir(ir([],xe(Object.values(e.body.eventsWithInvalidFields)),!1),xe(Object.values(e.body.eventsWithMissingFields)),!1),xe(Object.values(e.body.eventsWithInvalidIdLengths)),!1),xe(e.body.silencedEvents),!1).flat(),o=new Set(i),s=r.filter(function(u,a){if(o.has(a)){n.fulfillRequest([u],e.statusCode,e.body.error);return}return!0});s.length>0&&this.config.loggerProvider.warn($r(e));var c=this.getTryableList(s);this.scheduleTryable(c)},t.prototype.handlePayloadTooLargeResponse=function(e,r){if(r.length===1){this.fulfillRequest(r,e.statusCode,e.body.error);return}this.config.loggerProvider.warn($r(e)),this.config.flushQueueSize/=2;var n=this.getTryableList(r);this.scheduleTryable(n)},t.prototype.handleRateLimitResponse=function(e,r){var n=this,i=Object.keys(e.body.exceededDailyQuotaUsers),o=Object.keys(e.body.exceededDailyQuotaDevices),s=e.body.throttledEvents,c=new Set(i),u=new Set(o),a=new Set(s),l=r.filter(function(d,p){if(d.event.user_id&&c.has(d.event.user_id)||d.event.device_id&&u.has(d.event.device_id)){n.fulfillRequest([d],e.statusCode,e.body.error);return}return a.has(p)&&(d.timeout=n.throttleTimeout),!0});l.length>0&&this.config.loggerProvider.warn($r(e));var f=this.getTryableList(l);this.scheduleTryable(f)},t.prototype.handleOtherResponse=function(e){var r=this,n=e.map(function(o){return o.timeout=o.attempts*r.retryTimeout,o}),i=this.getTryableList(n);this.scheduleTryable(i)},t.prototype.fulfillRequest=function(e,r,n){this.removeEvents(e),e.forEach(function(i){return i.callback(Je(i.event,r,n))})},t.prototype.saveEvents=function(){if(this.config.storageProvider){var e=this.queue.map(function(r){return r.event});this.config.storageProvider.set(this.storageKey,e)}},t.prototype.removeEvents=function(e){this.queue=this.queue.filter(function(r){return!e.some(function(n){return n.event.insert_id===r.event.insert_id})}),this.saveEvents()},t}()});var Sd,re,wd,ne,ie,ma=b(()=>{"use strict";q();Ne();Sd=function(t){t===void 0&&(t=0);var e=new Error().stack||"";return e.split(`
`).slice(2+t).map(function(r){return r.trim()})},re=function(t){return function(){var e=D({},t.config),r=e.loggerProvider,n=e.logLevel;return{logger:r,logLevel:n}}},wd=function(t,e){var r,n;e=e.replace(/\[(\w+)\]/g,".$1"),e=e.replace(/^\./,"");try{for(var i=$e(e.split(".")),o=i.next();!o.done;o=i.next()){var s=o.value;if(s in t)t=t[s];else return}}catch(c){r={error:c}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return t},ne=function(t,e){return function(){var r,n,i={};try{for(var o=$e(e),s=o.next();!s.done;s=o.next()){var c=s.value;i[c]=wd(t,c)}}catch(u){r={error:u}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return i}},ie=function(t,e,r,n,i){return i===void 0&&(i=null),function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];var c=r(),u=c.logger,a=c.logLevel;if(a&&a<be.Debug||!a||!u)return t.apply(i,o);var l={type:"invoke public method",name:e,args:o,stacktrace:Sd(1),time:{start:new Date().toISOString()},states:{}};n&&l.states&&(l.states.before=n());var f=t.apply(i,o);return f&&f.promise?f.promise.then(function(){n&&l.states&&(l.states.after=n()),l.time&&(l.time.end=new Date().toISOString()),u.debug(JSON.stringify(l,null,2))}):(n&&l.states&&(l.states.after=n()),l.time&&(l.time.end=new Date().toISOString()),u.debug(JSON.stringify(l,null,2))),f}}});var zr,ga=b(()=>{"use strict";q();zr=function(){function t(){this.memoryStorage=new Map}return t.prototype.isEnabled=function(){return x(this,void 0,void 0,function(){return T(this,function(e){return[2,!0]})})},t.prototype.get=function(e){return x(this,void 0,void 0,function(){return T(this,function(r){return[2,this.memoryStorage.get(e)]})})},t.prototype.getRaw=function(e){return x(this,void 0,void 0,function(){var r;return T(this,function(n){switch(n.label){case 0:return[4,this.get(e)];case 1:return r=n.sent(),[2,r?JSON.stringify(r):void 0]}})})},t.prototype.set=function(e,r){return x(this,void 0,void 0,function(){return T(this,function(n){return this.memoryStorage.set(e,r),[2]})})},t.prototype.remove=function(e){return x(this,void 0,void 0,function(){return T(this,function(r){return this.memoryStorage.delete(e),[2]})})},t.prototype.reset=function(){return x(this,void 0,void 0,function(){return T(this,function(e){return this.memoryStorage.clear(),[2]})})},t}()});var xt,va=b(()=>{"use strict";Ne();xt=function(){function t(){}return t.prototype.send=function(e,r){return Promise.resolve(null)},t.prototype.buildResponse=function(e){var r,n,i,o,s,c,u,a,l,f,d,p,h,m,g,_,v,y,w,E,I,C;if(typeof e!="object")return null;var S=e.code||0,O=this.buildStatus(S);switch(O){case X.Success:return{status:O,statusCode:S,body:{eventsIngested:(r=e.events_ingested)!==null&&r!==void 0?r:0,payloadSizeBytes:(n=e.payload_size_bytes)!==null&&n!==void 0?n:0,serverUploadTime:(i=e.server_upload_time)!==null&&i!==void 0?i:0}};case X.Invalid:return{status:O,statusCode:S,body:{error:(o=e.error)!==null&&o!==void 0?o:"",missingField:(s=e.missing_field)!==null&&s!==void 0?s:"",eventsWithInvalidFields:(c=e.events_with_invalid_fields)!==null&&c!==void 0?c:{},eventsWithMissingFields:(u=e.events_with_missing_fields)!==null&&u!==void 0?u:{},eventsWithInvalidIdLengths:(a=e.events_with_invalid_id_lengths)!==null&&a!==void 0?a:{},epsThreshold:(l=e.eps_threshold)!==null&&l!==void 0?l:0,exceededDailyQuotaDevices:(f=e.exceeded_daily_quota_devices)!==null&&f!==void 0?f:{},silencedDevices:(d=e.silenced_devices)!==null&&d!==void 0?d:[],silencedEvents:(p=e.silenced_events)!==null&&p!==void 0?p:[],throttledDevices:(h=e.throttled_devices)!==null&&h!==void 0?h:{},throttledEvents:(m=e.throttled_events)!==null&&m!==void 0?m:[]}};case X.PayloadTooLarge:return{status:O,statusCode:S,body:{error:(g=e.error)!==null&&g!==void 0?g:""}};case X.RateLimit:return{status:O,statusCode:S,body:{error:(_=e.error)!==null&&_!==void 0?_:"",epsThreshold:(v=e.eps_threshold)!==null&&v!==void 0?v:0,throttledDevices:(y=e.throttled_devices)!==null&&y!==void 0?y:{},throttledUsers:(w=e.throttled_users)!==null&&w!==void 0?w:{},exceededDailyQuotaDevices:(E=e.exceeded_daily_quota_devices)!==null&&E!==void 0?E:{},exceededDailyQuotaUsers:(I=e.exceeded_daily_quota_users)!==null&&I!==void 0?I:{},throttledEvents:(C=e.throttled_events)!==null&&C!==void 0?C:[]}};case X.Timeout:default:return{status:O,statusCode:S}}},t.prototype.buildStatus=function(e){return e>=200&&e<300?X.Success:e===429?X.RateLimit:e===413?X.PayloadTooLarge:e===408?X.Timeout:e>=400&&e<500?X.Invalid:e>=500?X.Failed:X.Unknown},t}()});var Ue=b(()=>{"use strict";la();ai();fa();ha();hi();fi();or();ci();ma();Wr();ga();va();ui()});var Te,Kr=b(()=>{"use strict";Te=function(){if(typeof globalThis<"u")return globalThis;if(typeof window<"u")return window;if(typeof self<"u")return self;if(typeof window<"u")return window}});var ct,ya,gi=b(()=>{"use strict";Kr();ct=function(){var t,e=Te();if(!(!((t=e?.location)===null||t===void 0)&&t.search))return{};var r=e.location.search.substring(1).split("&").filter(Boolean),n=r.reduce(function(i,o){var s=o.split("=",2),c=ya(s[0]),u=ya(s[1]);return u&&(i[c]=u),i},{});return n},ya=function(t){t===void 0&&(t="");try{return decodeURIComponent(t)}catch{return""}}});var ba,_a,Sa,wa,Ea,Ia,vi,yi,bi,_i,Si,wi,Ei,Ii,xi,Ti,Ci,Wt,Xr=b(()=>{"use strict";ba="utm_campaign",_a="utm_content",Sa="utm_id",wa="utm_medium",Ea="utm_source",Ia="utm_term",vi="dclid",yi="fbclid",bi="gbraid",_i="gclid",Si="ko_click_id",wi="li_fat_id",Ei="msclkid",Ii="rtd_cid",xi="ttclid",Ti="twclid",Ci="wbraid",Wt={utm_campaign:void 0,utm_content:void 0,utm_id:void 0,utm_medium:void 0,utm_source:void 0,utm_term:void 0,referrer:void 0,referring_domain:void 0,dclid:void 0,gbraid:void 0,gclid:void 0,fbclid:void 0,ko_click_id:void 0,li_fat_id:void 0,msclkid:void 0,rtd_cid:void 0,ttclid:void 0,twclid:void 0,wbraid:void 0}});var xa,Ta=b(()=>{"use strict";q();gi();Xr();xa=function(){function t(){}return t.prototype.parse=function(){return x(this,void 0,void 0,function(){return T(this,function(e){return[2,D(D(D(D({},Wt),this.getUtmParam()),this.getReferrer()),this.getClickIds())]})})},t.prototype.getUtmParam=function(){var e=ct(),r=e[ba],n=e[_a],i=e[Sa],o=e[wa],s=e[Ea],c=e[Ia];return{utm_campaign:r,utm_content:n,utm_id:i,utm_medium:o,utm_source:s,utm_term:c}},t.prototype.getReferrer=function(){var e,r,n={referrer:void 0,referring_domain:void 0};try{n.referrer=document.referrer||void 0,n.referring_domain=(r=(e=n.referrer)===null||e===void 0?void 0:e.split("/")[2])!==null&&r!==void 0?r:void 0}catch{}return n},t.prototype.getClickIds=function(){var e,r=ct();return e={},e[vi]=r[vi],e[yi]=r[yi],e[bi]=r[bi],e[_i]=r[_i],e[Si]=r[Si],e[wi]=r[wi],e[Ei]=r[Ei],e[Ii]=r[Ii],e[xi]=r[xi],e[Ti]=r[Ti],e[Ci]=r[Ci],e},t}()});var Yr,Ri,Ca=b(()=>{"use strict";Ue();Yr=function(t,e,r){return e===void 0&&(e=""),r===void 0&&(r=10),[It,e,t.substring(0,r)].filter(Boolean).join("_")},Ri=function(t){return"".concat(It.toLowerCase(),"_").concat(t.substring(0,6))}});var Ra,Ed,Oa,Id,Ma,Da,Pa=b(()=>{"use strict";q();Ue();Xr();Ra=function(t){var e=t.split(".");return e.length<=2?t:e.slice(e.length-2,e.length).join(".")},Ed=function(t){return Object.values(t).every(function(e){return!e})},Oa=function(t,e,r,n){n===void 0&&(n=!0);var i=t.referrer,o=t.referring_domain,s=nr(t,["referrer","referring_domain"]),c=e||{},u=c.referrer,a=c.referring_domain,l=nr(c,["referrer","referring_domain"]);if(Id(r.excludeReferrers,t.referring_domain)||!n&&Ed(t)&&e)return!1;var f=JSON.stringify(s)!==JSON.stringify(l),d=Ra(o||"")!==Ra(a||"");return!e||f||d},Id=function(t,e){return t===void 0&&(t=[]),e===void 0&&(e=""),t.some(function(r){return r instanceof RegExp?r.test(e):r===e})},Ma=function(t,e){var r=D(D({},Wt),t),n=Object.entries(r).reduce(function(i,o){var s,c=xe(o,2),u=c[0],a=c[1];return i.setOnce("initial_".concat(u),(s=a??e.initialEmptyValue)!==null&&s!==void 0?s:"EMPTY"),a?i.set(u,a):i.unset(u)},new Be);return sr(n)},Da=function(t){var e=t;return e?(e.startsWith(".")&&(e=e.substring(1)),[new RegExp("".concat(e.replace(".","\\."),"$"))]):[]}});var ka,La=b(()=>{"use strict";Ue();ka=function(t,e,r){return e===void 0&&(e=""),r===void 0&&(r=10),[It,e,t.substring(0,r)].filter(Boolean).join("_")}});var ur,Oi=b(()=>{"use strict";ur=function(t,e){e===void 0&&(e=Date.now());var r=Date.now(),n=r-e;return n>t}});var Mi,Na=b(()=>{"use strict";q();Pa();La();Ta();Xr();Oi();Mi=function(){function t(e,r){var n;this.shouldTrackNewCampaign=!1,this.options=D({initialEmptyValue:"EMPTY",resetSessionOnNewCampaign:!1,excludeReferrers:Da((n=r.cookieOptions)===null||n===void 0?void 0:n.domain)},e),this.storage=r.cookieStorage,this.storageKey=ka(r.apiKey,"MKTG"),this.currentCampaign=Wt,this.sessionTimeout=r.sessionTimeout,this.lastEventTime=r.lastEventTime,r.loggerProvider.log("Installing web attribution tracking.")}return t.prototype.init=function(){return x(this,void 0,void 0,function(){var e,r;return T(this,function(n){switch(n.label){case 0:return[4,this.fetchCampaign()];case 1:return r=xe.apply(void 0,[n.sent(),2]),this.currentCampaign=r[0],this.previousCampaign=r[1],e=this.lastEventTime?ur(this.sessionTimeout,this.lastEventTime):!0,Oa(this.currentCampaign,this.previousCampaign,this.options,e)?(this.shouldTrackNewCampaign=!0,[4,this.storage.set(this.storageKey,this.currentCampaign)]):[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}})})},t.prototype.fetchCampaign=function(){return x(this,void 0,void 0,function(){return T(this,function(e){switch(e.label){case 0:return[4,Promise.all([new xa().parse(),this.storage.get(this.storageKey)])];case 1:return[2,e.sent()]}})})},t.prototype.generateCampaignEvent=function(e){this.shouldTrackNewCampaign=!1;var r=Ma(this.currentCampaign,this.options);return e&&(r.event_id=e),r},t.prototype.shouldSetSessionIdOnNewCampaign=function(){return this.shouldTrackNewCampaign&&!!this.options.resetSessionOnNewCampaign},t}()});var cr,Aa=b(()=>{"use strict";q();Kr();cr=function(){function t(e){this.options=D({},e)}return t.prototype.isEnabled=function(){return x(this,void 0,void 0,function(){var e,r,n,i;return T(this,function(o){switch(o.label){case 0:if(!Te())return[2,!1];t.testValue=String(Date.now()),e=new t(this.options),r="AMP_TEST",o.label=1;case 1:return o.trys.push([1,4,5,7]),[4,e.set(r,t.testValue)];case 2:return o.sent(),[4,e.get(r)];case 3:return n=o.sent(),[2,n===t.testValue];case 4:return i=o.sent(),[2,!1];case 5:return[4,e.remove(r)];case 6:return o.sent(),[7];case 7:return[2]}})})},t.prototype.get=function(e){return x(this,void 0,void 0,function(){var r;return T(this,function(n){switch(n.label){case 0:return[4,this.getRaw(e)];case 1:if(r=n.sent(),!r)return[2,void 0];try{try{r=decodeURIComponent(atob(r))}catch{}return[2,JSON.parse(r)]}catch{return[2,void 0]}return[2]}})})},t.prototype.getRaw=function(e){var r,n;return x(this,void 0,void 0,function(){var i,o,s;return T(this,function(c){return i=Te(),o=(n=(r=i?.document)===null||r===void 0?void 0:r.cookie.split("; "))!==null&&n!==void 0?n:[],s=o.find(function(u){return u.indexOf(e+"=")===0}),s?[2,s.substring(e.length+1)]:[2,void 0]})})},t.prototype.set=function(e,r){var n;return x(this,void 0,void 0,function(){var i,o,s,c,u,a;return T(this,function(l){try{i=(n=this.options.expirationDays)!==null&&n!==void 0?n:0,o=r!==null?i:-1,s=void 0,o&&(c=new Date,c.setTime(c.getTime()+o*24*60*60*1e3),s=c),u="".concat(e,"=").concat(btoa(encodeURIComponent(JSON.stringify(r)))),s&&(u+="; expires=".concat(s.toUTCString())),u+="; path=/",this.options.domain&&(u+="; domain=".concat(this.options.domain)),this.options.secure&&(u+="; Secure"),this.options.sameSite&&(u+="; SameSite=".concat(this.options.sameSite)),a=Te(),a&&(a.document.cookie=u)}catch{}return[2]})})},t.prototype.remove=function(e){return x(this,void 0,void 0,function(){return T(this,function(r){switch(r.label){case 0:return[4,this.set(e,null)];case 1:return r.sent(),[2]}})})},t.prototype.reset=function(){return x(this,void 0,void 0,function(){return T(this,function(e){return[2]})})},t}()});var Di,Ua=b(()=>{"use strict";q();Ue();Di=function(t){Me(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.send=function(r,n){return x(this,void 0,void 0,function(){var i,o,s;return T(this,function(c){switch(c.label){case 0:if(typeof fetch>"u")throw new Error("FetchTransport is not supported");return i={headers:{"Content-Type":"application/json",Accept:"*/*"},body:JSON.stringify(n),method:"POST"},[4,fetch(r,i)];case 1:return o=c.sent(),[4,o.text()];case 2:return s=c.sent(),[2,this.buildResponse(s?JSON.parse(s):{code:o.status})]}})})},e}(xt)});var xd,Td,Cd,lt,Qr,Rd,Od,Md,Dd,lr,Zr,Pi=b(()=>{"use strict";xd=function(){function t(){}return t.prototype.getApplicationContext=function(){return{versionName:this.versionName,language:Td(),platform:"Web",os:void 0,deviceModel:void 0}},t}(),Td=function(){return typeof navigator<"u"&&(navigator.languages&&navigator.languages[0]||navigator.language)||""},Cd=function(){function t(){this.queue=[]}return t.prototype.logEvent=function(e){this.receiver?this.receiver(e):this.queue.length<512&&this.queue.push(e)},t.prototype.setEventReceiver=function(e){this.receiver=e,this.queue.length>0&&(this.queue.forEach(function(r){e(r)}),this.queue=[])},t}(),lt=function(){return lt=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},lt.apply(this,arguments)},Qr=function(t,e){var r=["string","number","boolean","undefined"],n=typeof t,i=typeof e;if(n!==i)return!1;for(var o=0,s=r;o<s.length;o++){var c=s[o];if(c===n)return t===e}if(t==null&&e==null)return!0;if(t==null||e==null||t.length!==e.length)return!1;var u=Array.isArray(t),a=Array.isArray(e);if(u!==a)return!1;if(u&&a){for(var l=0;l<t.length;l++)if(!Qr(t[l],e[l]))return!1}else{var f=Object.keys(t).sort(),d=Object.keys(e).sort();if(!Qr(f,d))return!1;var p=!0;return Object.keys(t).forEach(function(h){Qr(t[h],e[h])||(p=!1)}),p}return!0},Rd="$set",Od="$unset",Md="$clearAll";Object.entries||(Object.entries=function(t){for(var e=Object.keys(t),r=e.length,n=new Array(r);r--;)n[r]=[e[r],t[e[r]]];return n});Dd=function(){function t(){this.identity={userProperties:{}},this.listeners=new Set}return t.prototype.editIdentity=function(){var e=this,r=lt({},this.identity.userProperties),n=lt(lt({},this.identity),{userProperties:r});return{setUserId:function(i){return n.userId=i,this},setDeviceId:function(i){return n.deviceId=i,this},setUserProperties:function(i){return n.userProperties=i,this},setOptOut:function(i){return n.optOut=i,this},updateUserProperties:function(i){for(var o=n.userProperties||{},s=0,c=Object.entries(i);s<c.length;s++){var u=c[s],a=u[0],l=u[1];switch(a){case Rd:for(var f=0,d=Object.entries(l);f<d.length;f++){var p=d[f],h=p[0],m=p[1];o[h]=m}break;case Od:for(var g=0,_=Object.keys(l);g<_.length;g++){var h=_[g];delete o[h]}break;case Md:o={};break}}return n.userProperties=o,this},commit:function(){return e.setIdentity(n),this}}},t.prototype.getIdentity=function(){return lt({},this.identity)},t.prototype.setIdentity=function(e){var r=lt({},this.identity);this.identity=lt({},e),Qr(r,this.identity)||this.listeners.forEach(function(n){n(e)})},t.prototype.addIdentityListener=function(e){this.listeners.add(e)},t.prototype.removeIdentityListener=function(e){this.listeners.delete(e)},t}(),lr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:self,Zr=function(){function t(){this.identityStore=new Dd,this.eventBridge=new Cd,this.applicationContextProvider=new xd}return t.getInstance=function(e){return lr.analyticsConnectorInstances||(lr.analyticsConnectorInstances={}),lr.analyticsConnectorInstances[e]||(lr.analyticsConnectorInstances[e]=new t),lr.analyticsConnectorInstances[e]},t}()});var ft,ki,Li,Ni=b(()=>{"use strict";Pi();ft=function(t){return t===void 0&&(t="$default_instance"),Zr.getInstance(t)},ki=function(t,e){ft(e).identityStore.editIdentity().setUserId(t).commit()},Li=function(t,e){ft(e).identityStore.editIdentity().setDeviceId(t).commit()}});var Ai,Fa=b(()=>{"use strict";q();Ni();Ai=function(){function t(){this.name="identity",this.type="before",this.identityStore=ft().identityStore}return t.prototype.execute=function(e){return x(this,void 0,void 0,function(){var r;return T(this,function(n){return r=e.user_properties,r&&this.identityStore.editIdentity().updateUserProperties(r).commit(),[2,e]})})},t.prototype.setup=function(e){return x(this,void 0,void 0,function(){return T(this,function(r){return e.instanceName&&(this.identityStore=ft(e.instanceName).identityStore),[2]})})},t}()});var Ui,ja=b(()=>{"use strict";Ui=function(){var t,e,r,n;if(typeof navigator>"u")return"";var i=navigator.userLanguage;return(n=(r=(e=(t=navigator.languages)===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:navigator.language)!==null&&r!==void 0?r:i)!==null&&n!==void 0?n:""}});var fr,Jr,Fi,ji,en,tn,Bi,Wi,Ba=b(()=>{"use strict";q();fr=function(t,e){return typeof t=="boolean"?t:t?.[e]!==!1},Jr=function(t){return fr(t,"attribution")},Fi=function(t){return fr(t,"fileDownloads")},ji=function(t){return fr(t,"formInteractions")},en=function(t){return fr(t,"pageViews")},tn=function(t){return fr(t,"sessions")},Bi=function(t){var e=function(){return!1},r=void 0,n,i=t.pageCounter,o=en(t.defaultTracking);return o&&(e=void 0,n=void 0,t.defaultTracking&&typeof t.defaultTracking=="object"&&t.defaultTracking.pageViews&&typeof t.defaultTracking.pageViews=="object"&&("trackOn"in t.defaultTracking.pageViews&&(e=t.defaultTracking.pageViews.trackOn),"trackHistoryChanges"in t.defaultTracking.pageViews&&(r=t.defaultTracking.pageViews.trackHistoryChanges),"eventType"in t.defaultTracking.pageViews&&t.defaultTracking.pageViews.eventType&&(n=t.defaultTracking.pageViews.eventType))),{trackOn:e,trackHistoryChanges:r,eventType:n,pageCounter:i}},Wi=function(t){return Jr(t.defaultTracking)&&t.defaultTracking&&typeof t.defaultTracking=="object"&&t.defaultTracking.attribution&&typeof t.defaultTracking.attribution=="object"?D({},t.defaultTracking.attribution):{}}});var et=b(()=>{"use strict";Na();gi();Oi();Ca();Aa();Ua();Ni();Fa();ja();Kr();Ba()});var rn,nn,Wa=b(()=>{"use strict";rn=function(t,e){for(var r=0;r<e.length;r++){var n=e[r],i=n.name,o=n.args,s=n.resolve,c=t&&t[i];if(typeof c=="function"){var u=c.apply(t,o);typeof s=="function"&&s(u?.promise)}}return t},nn=function(t){var e=t;return e&&e._q!==void 0}});var Va,Ga=b(()=>{"use strict";Va="2.8.1"});var Pd,kd,qa,Ha=b(()=>{"use strict";q();Ue();et();Ga();Pd="Web",kd="$remote",qa=function(){function t(){this.name="@amplitude/plugin-context-browser",this.type="before",this.library="amplitude-ts/".concat(Va),typeof navigator<"u"&&(this.userAgent=navigator.userAgent)}return t.prototype.setup=function(e){return this.config=e,Promise.resolve(void 0)},t.prototype.execute=function(e){var r,n;return x(this,void 0,void 0,function(){var i,o,s,c;return T(this,function(u){return i=new Date().getTime(),o=(r=this.config.lastEventId)!==null&&r!==void 0?r:-1,s=(n=e.event_id)!==null&&n!==void 0?n:o+1,this.config.lastEventId=s,e.time||(this.config.lastEventTime=i),c=D(D(D(D(D(D(D(D({user_id:this.config.userId,device_id:this.config.deviceId,session_id:this.config.sessionId,time:i},this.config.appVersion&&{app_version:this.config.appVersion}),this.config.trackingOptions.platform&&{platform:Pd}),this.config.trackingOptions.language&&{language:Ui()}),this.config.trackingOptions.ipAddress&&{ip:kd}),{insert_id:Ae(),partner_id:this.config.partnerId,plan:this.config.plan}),this.config.ingestionMetadata&&{ingestion_metadata:{source_name:this.config.ingestionMetadata.sourceName,source_version:this.config.ingestionMetadata.sourceVersion}}),e),{event_id:s,library:this.library,user_agent:this.userAgent}),[2,c]})})},t}()});var on,Vi=b(()=>{"use strict";q();on=function(){function t(e){this.storage=e}return t.prototype.isEnabled=function(){return x(this,void 0,void 0,function(){var e,r,n,i,o;return T(this,function(s){switch(s.label){case 0:if(!this.storage)return[2,!1];e=String(Date.now()),r=new t(this.storage),n="AMP_TEST",s.label=1;case 1:return s.trys.push([1,4,5,7]),[4,r.set(n,e)];case 2:return s.sent(),[4,r.get(n)];case 3:return i=s.sent(),[2,i===e];case 4:return o=s.sent(),[2,!1];case 5:return[4,r.remove(n)];case 6:return s.sent(),[7];case 7:return[2]}})})},t.prototype.get=function(e){return x(this,void 0,void 0,function(){var r,n;return T(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this.getRaw(e)];case 1:return r=i.sent(),r?[2,JSON.parse(r)]:[2,void 0];case 2:return n=i.sent(),console.error("[Amplitude] Error: Could not get value from storage"),[2,void 0];case 3:return[2]}})})},t.prototype.getRaw=function(e){var r;return x(this,void 0,void 0,function(){return T(this,function(n){return[2,((r=this.storage)===null||r===void 0?void 0:r.getItem(e))||void 0]})})},t.prototype.set=function(e,r){var n;return x(this,void 0,void 0,function(){return T(this,function(i){try{(n=this.storage)===null||n===void 0||n.setItem(e,JSON.stringify(r))}catch{}return[2]})})},t.prototype.remove=function(e){var r;return x(this,void 0,void 0,function(){return T(this,function(n){try{(r=this.storage)===null||r===void 0||r.removeItem(e)}catch{}return[2]})})},t.prototype.reset=function(){var e;return x(this,void 0,void 0,function(){return T(this,function(r){try{(e=this.storage)===null||e===void 0||e.clear()}catch{}return[2]})})},t}()});var sn,Gi,$a=b(()=>{"use strict";q();et();Vi();sn=1e3,Gi=function(t){Me(e,t);function e(r){var n=this,i;return n=t.call(this,(i=Te())===null||i===void 0?void 0:i.localStorage)||this,n.loggerProvider=r?.loggerProvider,n}return e.prototype.set=function(r,n){var i;return x(this,void 0,void 0,function(){var o;return T(this,function(s){switch(s.label){case 0:return Array.isArray(n)&&n.length>sn?(o=n.length-sn,[4,t.prototype.set.call(this,r,n.slice(0,sn))]):[3,2];case 1:return s.sent(),(i=this.loggerProvider)===null||i===void 0||i.error("Failed to save ".concat(o," events because the queue length exceeded ").concat(sn,".")),[3,4];case 2:return[4,t.prototype.set.call(this,r,n)];case 3:s.sent(),s.label=4;case 4:return[2]}})})},e}(on)});var za,Ka=b(()=>{"use strict";q();et();Vi();za=function(t){Me(e,t);function e(){var r;return t.call(this,(r=Te())===null||r===void 0?void 0:r.sessionStorage)||this}return e}(on)});var Xa,Ya=b(()=>{"use strict";q();Ue();Xa=function(t){Me(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.state={done:4},r}return e.prototype.send=function(r,n){return x(this,void 0,void 0,function(){var i=this;return T(this,function(o){return[2,new Promise(function(s,c){typeof XMLHttpRequest>"u"&&c(new Error("XHRTransport is not supported."));var u=new XMLHttpRequest;u.open("POST",r,!0),u.onreadystatechange=function(){if(u.readyState===i.state.done){var a=u.responseText,l=a?JSON.parse(a):{code:u.status},f=i.buildResponse(l);s(f)}},u.setRequestHeader("Content-Type","application/json"),u.setRequestHeader("Accept","*/*"),u.send(JSON.stringify(n))})]})})},e}(xt)});var Qa,Za=b(()=>{"use strict";q();et();Ue();Qa=function(t){Me(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.send=function(r,n){return x(this,void 0,void 0,function(){var i=this;return T(this,function(o){return[2,new Promise(function(s,c){var u=Te();if(!u?.navigator.sendBeacon)throw new Error("SendBeaconTransport is not supported");try{var a=JSON.stringify(n),l=u.navigator.sendBeacon(r,JSON.stringify(n));return s(l?i.buildResponse({code:200,events_ingested:n.events.length,payload_size_bytes:a.length,server_upload_time:Date.now()}):i.buildResponse({code:500}))}catch(f){c(f)}})]})})},e}(xt)});var Ja,qi,Ld,eu=b(()=>{"use strict";q();et();Ja=function(t,e,r){return r===void 0&&(r=!0),x(void 0,void 0,void 0,function(){var n,i,o,s,c,u,a,l,f;return T(this,function(d){switch(d.label){case 0:return n=Ri(t),[4,e.getRaw(n)];case 1:return i=d.sent(),i?r?[4,e.remove(n)]:[3,3]:[2,{optOut:!1}];case 2:d.sent(),d.label=3;case 3:return o=xe(i.split("."),6),s=o[0],c=o[1],u=o[2],a=o[3],l=o[4],f=o[5],[2,{deviceId:s,userId:Ld(c),sessionId:qi(a),lastEventId:qi(f),lastEventTime:qi(l),optOut:!!u}]}})})},qi=function(t){var e=parseInt(t,32);if(!isNaN(e))return e},Ld=function(t){if(!(!atob||!escape||!t))try{return decodeURIComponent(escape(atob(t)))}catch{return}}});var Fe,Qv,Hi,tu,ru,$i,zi,nu,iu,ou,su,au,an,un,cn,dr,uu,pr=b(()=>{"use strict";Fe="[Amplitude]",Qv="".concat(Fe," Page Viewed"),Hi="".concat(Fe," Form Started"),tu="".concat(Fe," Form Submitted"),ru="".concat(Fe," File Downloaded"),$i="session_start",zi="session_end",nu="".concat(Fe," File Extension"),iu="".concat(Fe," File Name"),ou="".concat(Fe," Link ID"),su="".concat(Fe," Link Text"),au="".concat(Fe," Link URL"),an="".concat(Fe," Form ID"),un="".concat(Fe," Form Name"),cn="".concat(Fe," Form Destination"),dr="cookie",uu="US"});var Nd,cu,Ad,Ki,Ud,lu=b(()=>{"use strict";q();Ne();Ue();et();$a();Ka();Ya();Za();eu();pr();Nd=function(t){Me(e,t);function e(r,n,i,o,s,c,u,a,l,f,d,p,h,m,g,_,v,y,w,E,I,C,S,O,M,P,k,N,j,G,Y){i===void 0&&(i=new zr),o===void 0&&(o={domain:"",expiration:365,sameSite:"Lax",secure:!1,upgrade:!0}),u===void 0&&(u=1e3),a===void 0&&(a=5),l===void 0&&(l=30),f===void 0&&(f=dr),g===void 0&&(g=new ar),_===void 0&&(_=be.Warn),y===void 0&&(y=!1),w===void 0&&(w=!1),C===void 0&&(C=""),S===void 0&&(S=uu),M===void 0&&(M=30*60*1e3),P===void 0&&(P=new Gi({loggerProvider:g})),k===void 0&&(k={ipAddress:!0,language:!0,platform:!0}),N===void 0&&(N="fetch"),j===void 0&&(j=!1);var R=t.call(this,{apiKey:r,storageProvider:P,transportProvider:Ki(N)})||this;return R.apiKey=r,R.appVersion=n,R.cookieOptions=o,R.defaultTracking=s,R.flushIntervalMillis=u,R.flushMaxRetries=a,R.flushQueueSize=l,R.identityStorage=f,R.ingestionMetadata=d,R.instanceName=p,R.loggerProvider=g,R.logLevel=_,R.minIdLength=v,R.offline=y,R.partnerId=E,R.plan=I,R.serverUrl=C,R.serverZone=S,R.sessionTimeout=M,R.storageProvider=P,R.trackingOptions=k,R.transport=N,R.useBatch=j,R._optOut=!1,R._cookieStorage=i,R.deviceId=c,R.lastEventId=h,R.lastEventTime=m,R.optOut=w,R.sessionId=O,R.pageCounter=Y,R.userId=G,R.loggerProvider.enable(R.logLevel),R}return Object.defineProperty(e.prototype,"cookieStorage",{get:function(){return this._cookieStorage},set:function(r){this._cookieStorage!==r&&(this._cookieStorage=r,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"deviceId",{get:function(){return this._deviceId},set:function(r){this._deviceId!==r&&(this._deviceId=r,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userId",{get:function(){return this._userId},set:function(r){this._userId!==r&&(this._userId=r,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sessionId",{get:function(){return this._sessionId},set:function(r){this._sessionId!==r&&(this._sessionId=r,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"optOut",{get:function(){return this._optOut},set:function(r){this._optOut!==r&&(this._optOut=r,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastEventTime",{get:function(){return this._lastEventTime},set:function(r){this._lastEventTime!==r&&(this._lastEventTime=r,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastEventId",{get:function(){return this._lastEventId},set:function(r){this._lastEventId!==r&&(this._lastEventId=r,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pageCounter",{get:function(){return this._pageCounter},set:function(r){this._pageCounter!==r&&(this._pageCounter=r,this.updateStorage())},enumerable:!1,configurable:!0}),e.prototype.updateStorage=function(){var r={deviceId:this._deviceId,userId:this._userId,sessionId:this._sessionId,optOut:this._optOut,lastEventTime:this._lastEventTime,lastEventId:this._lastEventId,pageCounter:this._pageCounter};this.cookieStorage.set(Yr(this.apiKey),r)},e}(di),cu=function(t,e,r){return e===void 0&&(e={}),x(void 0,void 0,void 0,function(){var n,i,o,s,c,u,a,l,f,d,p,h,m,g,_,v,y,w,E,I,C,S,O,M,P,k,N,j,G,Y,R,Q,le,Ie,Z,me,ae,te,H,Le,fe;return T(this,function(K){switch(K.label){case 0:return n=e.identityStorage||dr,y={},n===dr?[3,1]:(o="",[3,5]);case 1:return(E=(w=e.cookieOptions)===null||w===void 0?void 0:w.domain)!==null&&E!==void 0?(s=E,[3,4]):[3,2];case 2:return[4,Ud()];case 3:s=K.sent(),K.label=4;case 4:o=s,K.label=5;case 5:return i=D.apply(void 0,[(y.domain=o,y.expiration=365,y.sameSite="Lax",y.secure=!1,y.upgrade=!0,y),e.cookieOptions]),c=Ad(e.identityStorage,i),[4,Ja(t,c,(C=(I=e.cookieOptions)===null||I===void 0?void 0:I.upgrade)!==null&&C!==void 0?C:!0)];case 6:return u=K.sent(),[4,c.get(Yr(t))];case 7:return a=K.sent(),l=ct(),f=(k=(P=(M=(O=(S=e.deviceId)!==null&&S!==void 0?S:l.ampDeviceId)!==null&&O!==void 0?O:l.deviceId)!==null&&M!==void 0?M:a?.deviceId)!==null&&P!==void 0?P:u.deviceId)!==null&&k!==void 0?k:Ae(),d=(N=a?.lastEventId)!==null&&N!==void 0?N:u.lastEventId,p=(j=a?.lastEventTime)!==null&&j!==void 0?j:u.lastEventTime,h=(Y=(G=e.optOut)!==null&&G!==void 0?G:a?.optOut)!==null&&Y!==void 0?Y:u.optOut,m=(R=a?.sessionId)!==null&&R!==void 0?R:u.sessionId,g=(le=(Q=e.userId)!==null&&Q!==void 0?Q:a?.userId)!==null&&le!==void 0?le:u.userId,r.previousSessionDeviceId=(Ie=a?.deviceId)!==null&&Ie!==void 0?Ie:u.deviceId,r.previousSessionUserId=(Z=a?.userId)!==null&&Z!==void 0?Z:u.userId,_={ipAddress:(ae=(me=e.trackingOptions)===null||me===void 0?void 0:me.ipAddress)!==null&&ae!==void 0?ae:!0,language:(H=(te=e.trackingOptions)===null||te===void 0?void 0:te.language)!==null&&H!==void 0?H:!0,platform:(fe=(Le=e.trackingOptions)===null||Le===void 0?void 0:Le.platform)!==null&&fe!==void 0?fe:!0},v=a?.pageCounter,[2,new Nd(t,e.appVersion,c,i,e.defaultTracking,f,e.flushIntervalMillis,e.flushMaxRetries,e.flushQueueSize,n,e.ingestionMetadata,e.instanceName,d,p,e.loggerProvider,e.logLevel,e.minIdLength,e.offline,h,e.partnerId,e.plan,e.serverUrl,e.serverZone,m,e.sessionTimeout,e.storageProvider,_,e.transport,e.useBatch,g,v)]}})})},Ad=function(t,e){switch(t===void 0&&(t=dr),e===void 0&&(e={}),t){case"localStorage":return new Gi;case"sessionStorage":return new za;case"none":return new zr;case"cookie":default:return new cr(D(D({},e),{expirationDays:e.expiration}))}},Ki=function(t){return t==="xhr"?new Xa:t==="beacon"?new Qa:new Di},Ud=function(t){return x(void 0,void 0,void 0,function(){var e,r,n,i,o,o,s,c,u,a;return T(this,function(l){switch(l.label){case 0:return[4,new cr().isEnabled()];case 1:if(!l.sent()||!t&&(typeof location>"u"||!location.hostname))return[2,""];for(e=t??location.hostname,r=e.split("."),n=[],i="AMP_TLDTEST",o=r.length-2;o>=0;--o)n.push(r.slice(o).join("."));o=0,l.label=2;case 2:return o<n.length?(s=n[o],c={domain:"."+s},u=new cr(c),[4,u.set(i,1)]):[3,7];case 3:return l.sent(),[4,u.get(i)];case 4:return a=l.sent(),a?[4,u.remove(i)]:[3,6];case 5:return l.sent(),[2,"."+s];case 6:return o++,[3,2];case 7:return[2,""]}})})}});function tt(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function c(l){try{a(n.next(l))}catch(f){s(f)}}function u(l){try{a(n.throw(l))}catch(f){s(f)}}function a(l){l.done?o(l.value):i(l.value).then(c,u)}a((n=n.apply(t,e||[])).next())})}function rt(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function c(a){return function(l){return u([a,l])}}function u(a){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(r=0)),r;)try{if(n=1,i&&(o=a[0]&2?i.return:a[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[a[0]&2,o.value]),a[0]){case 0:case 1:o=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,i=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(a[0]===6||a[0]===2)){r=0;continue}if(a[0]===3&&(!o||a[1]>o[0]&&a[1]<o[3])){r.label=a[1];break}if(a[0]===6&&r.label<o[1]){r.label=o[1],o=a;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(a);break}o[2]&&r.ops.pop(),r.trys.pop();continue}a=e.call(t,r)}catch(l){a=[6,l],i=0}finally{n=o=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}}function ln(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(c){s={error:c}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o}function Xi(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))}var De,Yi=b(()=>{"use strict";De=function(){return De=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},De.apply(this,arguments)}});var hr,Qi=b(()=>{"use strict";hr=function(){if(typeof globalThis<"u")return globalThis;if(typeof window<"u")return window;if(typeof self<"u")return self;if(typeof window<"u")return window}});var Zi,fu,du=b(()=>{"use strict";Qi();Zi=function(){var t,e=hr();if(!(!((t=e?.location)===null||t===void 0)&&t.search))return{};var r=e.location.search.substring(1).split("&").filter(Boolean),n=r.reduce(function(i,o){var s=o.split("=",2),c=fu(s[0]),u=fu(s[1]);return u&&(i[c]=u),i},{});return n},fu=function(t){t===void 0&&(t="");try{return decodeURIComponent(t)}catch{return""}}});var pu,hu,mu,gu,vu,yu,Ji,eo,to,ro,no,io,oo,so,ao,uo,co,mr,lo=b(()=>{"use strict";pu="utm_campaign",hu="utm_content",mu="utm_id",gu="utm_medium",vu="utm_source",yu="utm_term",Ji="dclid",eo="fbclid",to="gbraid",ro="gclid",no="ko_click_id",io="li_fat_id",oo="msclkid",so="rtd_cid",ao="ttclid",uo="twclid",co="wbraid",mr={utm_campaign:void 0,utm_content:void 0,utm_id:void 0,utm_medium:void 0,utm_source:void 0,utm_term:void 0,referrer:void 0,referring_domain:void 0,dclid:void 0,gbraid:void 0,gclid:void 0,fbclid:void 0,ko_click_id:void 0,li_fat_id:void 0,msclkid:void 0,rtd_cid:void 0,ttclid:void 0,twclid:void 0,wbraid:void 0}});var fo,bu=b(()=>{"use strict";Yi();du();lo();fo=function(){function t(){}return t.prototype.parse=function(){return tt(this,void 0,void 0,function(){return rt(this,function(e){return[2,De(De(De(De({},mr),this.getUtmParam()),this.getReferrer()),this.getClickIds())]})})},t.prototype.getUtmParam=function(){var e=Zi(),r=e[pu],n=e[hu],i=e[mu],o=e[gu],s=e[vu],c=e[yu];return{utm_campaign:r,utm_content:n,utm_id:i,utm_medium:o,utm_source:s,utm_term:c}},t.prototype.getReferrer=function(){var e,r,n={referrer:void 0,referring_domain:void 0};try{n.referrer=document.referrer||void 0,n.referring_domain=(r=(e=n.referrer)===null||e===void 0?void 0:e.split("/")[2])!==null&&r!==void 0?r:void 0}catch{}return n},t.prototype.getClickIds=function(){var e,r=Zi();return e={},e[Ji]=r[Ji],e[eo]=r[eo],e[to]=r[to],e[ro]=r[ro],e[no]=r[no],e[io]=r[io],e[oo]=r[oo],e[so]=r[so],e[ao]=r[ao],e[uo]=r[uo],e[co]=r[co],e},t}()});var Vt,po,ho,_u=b(()=>{"use strict";(function(t){t.SET="$set",t.SET_ONCE="$setOnce",t.ADD="$add",t.APPEND="$append",t.PREPEND="$prepend",t.REMOVE="$remove",t.PREINSERT="$preInsert",t.POSTINSERT="$postInsert",t.UNSET="$unset",t.CLEAR_ALL="$clearAll"})(Vt||(Vt={}));(function(t){t.REVENUE_PRODUCT_ID="$productId",t.REVENUE_QUANTITY="$quantity",t.REVENUE_PRICE="$price",t.REVENUE_TYPE="$revenueType",t.REVENUE="$revenue"})(po||(po={}));(function(t){t.IDENTIFY="$identify",t.GROUP_IDENTIFY="$groupidentify",t.REVENUE="revenue_amount"})(ho||(ho={}))});var Su=b(()=>{"use strict";_u()});var mo=b(()=>{"use strict";bu();lo();Qi()});var wu,Eu=b(()=>{"use strict";wu=function(t){var e={};for(var r in t){var n=t[r];n&&(e[r]=n)}return e}});var Fd,go,jd,Bd,Wd,Iu=b(()=>{"use strict";Yi();mo();Su();mo();Eu();Fd="[Amplitude] Page Viewed",go=function(t){t===void 0&&(t={});var e,r=hr(),n=void 0,i,o,s=t.trackOn,c=t.trackHistoryChanges,u=t.eventType,a=u===void 0?Fd:u,l=function(){return tt(void 0,void 0,void 0,function(){var g,_;return rt(this,function(v){switch(v.label){case 0:return _={event_type:a},g=[{}],[4,jd()];case 1:return[2,(_.event_properties=De.apply(void 0,[De.apply(void 0,g.concat([v.sent()])),{"[Amplitude] Page Domain":typeof location<"u"&&location.hostname||"","[Amplitude] Page Location":typeof location<"u"&&location.href||"","[Amplitude] Page Path":typeof location<"u"&&location.pathname||"","[Amplitude] Page Title":typeof document<"u"&&document.title||"","[Amplitude] Page URL":typeof location<"u"&&location.href.split("?")[0]||""}]),_)]}})})},f=function(){return typeof s>"u"||typeof s=="function"&&s()},d=typeof location<"u"?location.href:null,p=function(){return tt(void 0,void 0,void 0,function(){var g,_,v,y,w;return rt(this,function(E){switch(E.label){case 0:return g=location.href,_=Wd(c,g,d||"")&&f(),d=g,_?(n?.log("Tracking page view event"),e!=null?[3,1]:(v=void 0,[3,3])):[3,4];case 1:return w=(y=e).track,[4,l()];case 2:v=w.apply(y,[E.sent()]),E.label=3;case 3:E.label=4;case 4:return[2]}})})},h=function(){p()},m={name:"@amplitude/plugin-page-view-tracking-browser",type:"enrichment",setup:function(g,_){return tt(void 0,void 0,void 0,function(){var v,y;return rt(this,function(w){switch(w.label){case 0:return e=_,o=g,n=g.loggerProvider,n.log("Installing @amplitude/plugin-page-view-tracking-browser"),r&&(r.addEventListener("popstate",h),i=r.history.pushState,r.history.pushState=new Proxy(r.history.pushState,{apply:function(E,I,C){var S=ln(C,3),O=S[0],M=S[1],P=S[2];E.apply(I,[O,M,P]),p()}})),f()?(n.log("Tracking page view event"),y=(v=e).track,[4,l()]):[3,2];case 1:y.apply(v,[w.sent()]),w.label=2;case 2:return[2]}})})},execute:function(g){return tt(void 0,void 0,void 0,function(){var _;return rt(this,function(v){switch(v.label){case 0:return s==="attribution"&&Bd(g)?(n?.log("Enriching campaign event to page view event with campaign parameters"),[4,l()]):[3,2];case 1:_=v.sent(),g.event_type=_.event_type,g.event_properties=De(De({},g.event_properties),_.event_properties),v.label=2;case 2:return o&&g.event_type===a&&(o.pageCounter=o.pageCounter?o.pageCounter+1:1,g.event_properties=De(De({},g.event_properties),{"[Amplitude] Page Counter":o.pageCounter})),[2,g]}})})},teardown:function(){return tt(void 0,void 0,void 0,function(){return rt(this,function(g){return r&&(r.removeEventListener("popstate",h),i&&(r.history.pushState=i)),[2]})})}};return m},jd=function(){return tt(void 0,void 0,void 0,function(){var t;return rt(this,function(e){switch(e.label){case 0:return t=wu,[4,new fo().parse()];case 1:return[2,t.apply(void 0,[e.sent()])]}})})},Bd=function(t){if(t.event_type==="$identify"&&t.user_properties){var e=t.user_properties,r=e[Vt.SET]||{},n=e[Vt.UNSET]||{},i=Xi(Xi([],ln(Object.keys(r)),!1),ln(Object.keys(n)),!1);return Object.keys(mr).every(function(o){return i.includes(o)})}return!1},Wd=function(t,e,r){switch(t){case"pathOnly":return e.split("?")[0]!==r.split("?")[0];default:return e!==r}}});var xu=b(()=>{"use strict";Iu()});var Tu,Gt,Cu=b(()=>{"use strict";q();pr();Tu=function(){var t,e=[],r=function(a,l,f){a.addEventListener(l,f),e.push({element:a,type:l,handler:f})},n=function(){e.forEach(function(a){var l=a.element,f=a.type,d=a.handler;l?.removeEventListener(f,d)}),e=[]},i="@amplitude/plugin-form-interaction-tracking-browser",o="enrichment",s=function(a,l){return x(void 0,void 0,void 0,function(){return T(this,function(f){return window.addEventListener("load",function(){if(!l){a.loggerProvider.warn("Form interaction tracking requires a later version of @amplitude/analytics-browser. Form interaction events are not tracked.");return}if(!(typeof document>"u")){var d=function(h){var m=!1;r(h,"change",function(){var g;m||l.track(Hi,(g={},g[an]=Gt(h.id),g[un]=Gt(h.name),g[cn]=h.action,g)),m=!0}),r(h,"submit",function(){var g,_;m||l.track(Hi,(g={},g[an]=Gt(h.id),g[un]=Gt(h.name),g[cn]=h.action,g)),l.track(tu,(_={},_[an]=Gt(h.id),_[un]=Gt(h.name),_[cn]=h.action,_)),m=!1})},p=Array.from(document.getElementsByTagName("form"));p.forEach(d),typeof MutationObserver<"u"&&(t=new MutationObserver(function(h){h.forEach(function(m){m.addedNodes.forEach(function(g){g.nodeName==="FORM"&&d(g),"querySelectorAll"in g&&typeof g.querySelectorAll=="function"&&Array.from(g.querySelectorAll("form")).map(d)})})}),t.observe(document.body,{subtree:!0,childList:!0}))}}),[2]})})},c=function(a){return x(void 0,void 0,void 0,function(){return T(this,function(l){return[2,a]})})},u=function(){return x(void 0,void 0,void 0,function(){return T(this,function(a){return t?.disconnect(),n(),[2]})})};return{name:i,type:o,setup:s,execute:c,teardown:u}},Gt=function(t){if(typeof t=="string")return t}});var Ru,Ou=b(()=>{"use strict";q();pr();Ru=function(){var t,e=[],r=function(a,l,f){a.addEventListener(l,f),e.push({element:a,type:l,handler:f})},n=function(){e.forEach(function(a){var l=a.element,f=a.type,d=a.handler;l?.removeEventListener(f,d)}),e=[]},i="@amplitude/plugin-file-download-tracking-browser",o="enrichment",s=function(a,l){return x(void 0,void 0,void 0,function(){return T(this,function(f){return window.addEventListener("load",function(){if(!l){a.loggerProvider.warn("File download tracking requires a later version of @amplitude/analytics-browser. File download events are not tracked.");return}if(!(typeof document>"u")){var d=function(m){var g;try{g=new URL(m.href,window.location.href)}catch{return}var _=p.exec(g.href),v=_?.[1];v&&r(m,"click",function(){var y;v&&l.track(ru,(y={},y[nu]=v,y[iu]=g.pathname,y[ou]=m.id,y[su]=m.text,y[au]=m.href,y))})},p=/\.(pdf|xlsx?|docx?|txt|rtf|csv|exe|key|pp(s|t|tx)|7z|pkg|rar|gz|zip|avi|mov|mp4|mpe?g|wmv|midi?|mp3|wav|wma)$/,h=Array.from(document.getElementsByTagName("a"));h.forEach(d),typeof MutationObserver<"u"&&(t=new MutationObserver(function(m){m.forEach(function(g){g.addedNodes.forEach(function(_){_.nodeName==="A"&&d(_),"querySelectorAll"in _&&typeof _.querySelectorAll=="function"&&Array.from(_.querySelectorAll("a")).map(d)})})}),t.observe(document.body,{subtree:!0,childList:!0}))}}),[2]})})},c=function(a){return x(void 0,void 0,void 0,function(){return T(this,function(l){return[2,a]})})},u=function(){return x(void 0,void 0,void 0,function(){return T(this,function(a){return t?.disconnect(),n(),[2]})})};return{name:i,type:o,setup:s,execute:c,teardown:u}}});var Mu,Du,Pu=b(()=>{"use strict";Mu=!1,Du=function(t){if(!(Mu||t.defaultTracking!==void 0)){var e=`\`options.defaultTracking\` is set to undefined. This implicitly configures your Amplitude instance to track Page Views, Sessions, File Downloads, and Form Interactions. You can suppress this warning by explicitly setting a value to \`options.defaultTracking\`. The value must either be a boolean, to enable and disable all default events, or an object, for advanced configuration. For example:

amplitude.init(<YOUR_API_KEY>, {
  defaultTracking: true,
});

Visit https://www.docs.developers.amplitude.com/data/sdks/browser-2/#tracking-default-events for more details.`;t.loggerProvider.warn(e),Mu=!0}}});var ku,Lu=b(()=>{"use strict";q();et();ku=function(){var t="@amplitude/plugin-network-checker-browser",e="before",r=Te(),n=[],i=function(u,a){r&&(r.addEventListener(u,a),n.push({type:u,handler:a}))},o=function(){n.forEach(function(u){var a=u.type,l=u.handler;r&&r.removeEventListener(a,l)}),n=[]},s=function(u,a){return x(void 0,void 0,void 0,function(){return T(this,function(l){return u.offline=!navigator.onLine,i("online",function(){u.loggerProvider.debug("Network connectivity changed to online."),u.offline=!1,setTimeout(function(){a.flush()},u.flushIntervalMillis)}),i("offline",function(){u.loggerProvider.debug("Network connectivity changed to offline."),u.offline=!0}),[2]})})},c=function(){return x(void 0,void 0,void 0,function(){return T(this,function(u){return o(),[2]})})};return{name:t,type:e,setup:s,teardown:c}}});var Nu,Au=b(()=>{"use strict";q();Ue();et();Ne();Wa();Ha();lu();xu();Cu();Ou();pr();Pu();Lu();Nu=function(t){Me(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.init=function(r,n,i){r===void 0&&(r="");var o,s;return arguments.length>2?(o=n,s=i):typeof n=="string"?(o=n,s=void 0):(o=n?.userId,s=n),_e(this._init(D(D({},s),{userId:o,apiKey:r})))},e.prototype._init=function(r){var n,i,o;return x(this,void 0,void 0,function(){var s,c,u,a,l,f=this;return T(this,function(d){switch(d.label){case 0:return this.initializing?[2]:(this.initializing=!0,[4,cu(r.apiKey,r,this)]);case 1:return s=d.sent(),[4,t.prototype._init.call(this,s)];case 2:return d.sent(),Jr(this.config.defaultTracking)?(c=Wi(this.config),this.webAttribution=new Mi(c,this.config),[4,this.webAttribution.init()]):[3,4];case 3:d.sent(),d.label=4;case 4:return u=ct(),a=Number.isNaN(Number(u.ampSessionId))?void 0:Number(u.ampSessionId),this.setSessionId((o=(i=(n=r.sessionId)!==null&&n!==void 0?n:a)!==null&&i!==void 0?i:this.config.sessionId)!==null&&o!==void 0?o:Date.now()),l=ft(r.instanceName),l.identityStore.setIdentity({userId:this.config.userId,deviceId:this.config.deviceId}),this.config.offline===ti?[3,6]:[4,this.add(ku()).promise];case 5:d.sent(),d.label=6;case 6:return[4,this.add(new mi).promise];case 7:return d.sent(),[4,this.add(new qa).promise];case 8:return d.sent(),[4,this.add(new Ai).promise];case 9:return d.sent(),Du(this.config),Fi(this.config.defaultTracking)?[4,this.add(Ru()).promise]:[3,11];case 10:d.sent(),d.label=11;case 11:return ji(this.config.defaultTracking)?[4,this.add(Tu()).promise]:[3,13];case 12:d.sent(),d.label=13;case 13:return en(this.config.defaultTracking)?[4,this.add(go(Bi(this.config))).promise]:[3,15];case 14:d.sent(),d.label=15;case 15:return this.initializing=!1,[4,this.runQueuedFunctions("dispatchQ")];case 16:return d.sent(),l.eventBridge.setEventReceiver(function(p){f.track(p.eventType,p.eventProperties)}),[2]}})})},e.prototype.getUserId=function(){var r;return(r=this.config)===null||r===void 0?void 0:r.userId},e.prototype.setUserId=function(r){if(!this.config){this.q.push(this.setUserId.bind(this,r));return}(r!==this.config.userId||r===void 0)&&(this.config.userId=r,ki(r,this.config.instanceName))},e.prototype.getDeviceId=function(){var r;return(r=this.config)===null||r===void 0?void 0:r.deviceId},e.prototype.setDeviceId=function(r){if(!this.config){this.q.push(this.setDeviceId.bind(this,r));return}this.config.deviceId=r,Li(r,this.config.instanceName)},e.prototype.reset=function(){this.setDeviceId(Ae()),this.setUserId(void 0)},e.prototype.getSessionId=function(){var r;return(r=this.config)===null||r===void 0?void 0:r.sessionId},e.prototype.setSessionId=function(r){var n,i=[];if(!this.config)return this.q.push(this.setSessionId.bind(this,r)),_e(Promise.resolve());if(r===this.config.sessionId)return _e(Promise.resolve());var o=this.getSessionId(),s=this.config.lastEventTime,c=(n=this.config.lastEventId)!==null&&n!==void 0?n:-1;this.config.sessionId=r,this.config.lastEventTime=void 0,this.config.pageCounter=0,tn(this.config.defaultTracking)&&(o&&s&&i.push(this.track(zi,void 0,{device_id:this.previousSessionDeviceId,event_id:++c,session_id:o,time:s+1,user_id:this.previousSessionUserId}).promise),this.config.lastEventTime=this.config.sessionId);var u=this.trackCampaignEventIfNeeded(++c,i);return tn(this.config.defaultTracking)&&i.push(this.track($i,void 0,{event_id:u?++c:c,session_id:this.config.sessionId,time:this.config.lastEventTime}).promise),this.previousSessionDeviceId=this.config.deviceId,this.previousSessionUserId=this.config.userId,_e(Promise.all(i))},e.prototype.extendSession=function(){if(!this.config){this.q.push(this.extendSession.bind(this));return}this.config.lastEventTime=Date.now()},e.prototype.setTransport=function(r){if(!this.config){this.q.push(this.setTransport.bind(this,r));return}this.config.transportProvider=Ki(r)},e.prototype.identify=function(r,n){if(nn(r)){var i=r._q;r._q=[],r=rn(new Be,i)}return n?.user_id&&this.setUserId(n.user_id),n?.device_id&&this.setDeviceId(n.device_id),t.prototype.identify.call(this,r,n)},e.prototype.groupIdentify=function(r,n,i,o){if(nn(i)){var s=i._q;i._q=[],i=rn(new Be,s)}return t.prototype.groupIdentify.call(this,r,n,i,o)},e.prototype.revenue=function(r,n){if(nn(r)){var i=r._q;r._q=[],r=rn(new Gr,i)}return t.prototype.revenue.call(this,r,n)},e.prototype.trackCampaignEventIfNeeded=function(r,n){if(!this.webAttribution||!this.webAttribution.shouldTrackNewCampaign)return!1;var i=this.webAttribution.generateCampaignEvent(r);return n?n.push(this.track(i).promise):this.track(i),this.config.loggerProvider.log("Tracking attribution."),!0},e.prototype.process=function(r){return x(this,void 0,void 0,function(){var n,i,o;return T(this,function(s){return n=Date.now(),i=ur(this.config.sessionTimeout,this.config.lastEventTime),o=this.webAttribution&&this.webAttribution.shouldSetSessionIdOnNewCampaign(),r.event_type!==$i&&r.event_type!==zi&&(!r.session_id||r.session_id===this.getSessionId())&&(i||o?(this.setSessionId(n),o&&this.config.loggerProvider.log("Created a new session for new campaign.")):i||this.trackCampaignEventIfNeeded()),[2,t.prototype.process.call(this,r)]})})},e}(li)});var Vd,ue,Uu=b(()=>{"use strict";Ue();Au();Vd=function(){var t=new Nu;return{init:ie(t.init.bind(t),"init",re(t),ne(t,["config"])),add:ie(t.add.bind(t),"add",re(t),ne(t,["config.apiKey","timeline.plugins"])),remove:ie(t.remove.bind(t),"remove",re(t),ne(t,["config.apiKey","timeline.plugins"])),track:ie(t.track.bind(t),"track",re(t),ne(t,["config.apiKey","timeline.queue.length"])),logEvent:ie(t.logEvent.bind(t),"logEvent",re(t),ne(t,["config.apiKey","timeline.queue.length"])),identify:ie(t.identify.bind(t),"identify",re(t),ne(t,["config.apiKey","timeline.queue.length"])),groupIdentify:ie(t.groupIdentify.bind(t),"groupIdentify",re(t),ne(t,["config.apiKey","timeline.queue.length"])),setGroup:ie(t.setGroup.bind(t),"setGroup",re(t),ne(t,["config.apiKey","timeline.queue.length"])),revenue:ie(t.revenue.bind(t),"revenue",re(t),ne(t,["config.apiKey","timeline.queue.length"])),flush:ie(t.flush.bind(t),"flush",re(t),ne(t,["config.apiKey","timeline.queue.length"])),getUserId:ie(t.getUserId.bind(t),"getUserId",re(t),ne(t,["config","config.userId"])),setUserId:ie(t.setUserId.bind(t),"setUserId",re(t),ne(t,["config","config.userId"])),getDeviceId:ie(t.getDeviceId.bind(t),"getDeviceId",re(t),ne(t,["config","config.deviceId"])),setDeviceId:ie(t.setDeviceId.bind(t),"setDeviceId",re(t),ne(t,["config","config.deviceId"])),reset:ie(t.reset.bind(t),"reset",re(t),ne(t,["config","config.userId","config.deviceId"])),getSessionId:ie(t.getSessionId.bind(t),"getSessionId",re(t),ne(t,["config"])),setSessionId:ie(t.setSessionId.bind(t),"setSessionId",re(t),ne(t,["config"])),extendSession:ie(t.extendSession.bind(t),"extendSession",re(t),ne(t,["config"])),setOptOut:ie(t.setOptOut.bind(t),"setOptOut",re(t),ne(t,["config"])),setTransport:ie(t.setTransport.bind(t),"setTransport",re(t),ne(t,["config"]))}},ue=Vd()});var Fu,cb,lb,fb,db,pb,hb,ju,Bu,mb,gb,vb,yb,bb,_b,Sb,wb,Eb,Wu,Vu,Gu=b(()=>{"use strict";Uu();Ue();Fu=ue.add,cb=ue.extendSession,lb=ue.flush,fb=ue.getDeviceId,db=ue.getSessionId,pb=ue.getUserId,hb=ue.groupIdentify,ju=ue.identify,Bu=ue.init,mb=ue.logEvent,gb=ue.remove,vb=ue.reset,yb=ue.revenue,bb=ue.setDeviceId,_b=ue.setGroup,Sb=ue.setOptOut,wb=ue.setSessionId,Eb=ue.setTransport,Wu=ue.setUserId,Vu=ue.track});function Tt(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function c(l){try{a(n.next(l))}catch(f){s(f)}}function u(l){try{a(n.throw(l))}catch(f){s(f)}}function a(l){l.done?o(l.value):i(l.value).then(c,u)}a((n=n.apply(t,e||[])).next())})}function Ct(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function c(a){return function(l){return u([a,l])}}function u(a){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(r=0)),r;)try{if(n=1,i&&(o=a[0]&2?i.return:a[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[a[0]&2,o.value]),a[0]){case 0:case 1:o=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,i=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(a[0]===6||a[0]===2)){r=0;continue}if(a[0]===3&&(!o||a[1]>o[0]&&a[1]<o[3])){r.label=a[1];break}if(a[0]===6&&r.label<o[1]){r.label=o[1],o=a;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(a);break}o[2]&&r.ops.pop(),r.trys.pop();continue}a=e.call(t,r)}catch(l){a=[6,l],i=0}finally{n=o=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}}var dt,qu=b(()=>{"use strict";dt=function(){return dt=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},dt.apply(this,arguments)}});var Se,Hu=b(()=>{"use strict";(function(t){t[t.None=0]="None",t[t.Error=1]="Error",t[t.Warn=2]="Warn",t[t.Verbose=3]="Verbose",t[t.Debug=4]="Debug"})(Se||(Se={}))});var We,$u=b(()=>{"use strict";(function(t){t.US="US",t.EU="EU"})(We||(We={}))});var oe,zu=b(()=>{"use strict";(function(t){t.Unknown="unknown",t.Skipped="skipped",t.Success="success",t.RateLimit="rate_limit",t.PayloadTooLarge="payload_too_large",t.Invalid="invalid",t.Failed="failed",t.Timeout="Timeout",t.SystemError="SystemError"})(oe||(oe={}))});var ze=b(()=>{"use strict";Hu();$u();zu()});var fn,vo,yo,Ku,Xu,Yu,bo=b(()=>{"use strict";fn="AMP",vo="".concat(fn,"_unsent"),yo="https://api2.amplitude.com/2/httpapi",Ku="https://api.eu.amplitude.com/2/httpapi",Xu="https://api2.amplitude.com/batch",Yu="https://api.eu.amplitude.com/batch"});var dn,Qu=b(()=>{"use strict";dn=function(t){return{promise:t||Promise.resolve()}}});var pn,pt,_o=b(()=>{"use strict";ze();pn="Amplitude Logger ",pt=function(){function t(){this.logLevel=Se.None}return t.prototype.disable=function(){this.logLevel=Se.None},t.prototype.enable=function(e){e===void 0&&(e=Se.Warn),this.logLevel=e},t.prototype.log=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.logLevel<Se.Verbose||console.log("".concat(pn,"[Log]: ").concat(e.join(" ")))},t.prototype.warn=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.logLevel<Se.Warn||console.warn("".concat(pn,"[Warn]: ").concat(e.join(" ")))},t.prototype.error=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.logLevel<Se.Error||console.error("".concat(pn,"[Error]: ").concat(e.join(" ")))},t.prototype.debug=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.logLevel<Se.Debug||console.log("".concat(pn,"[Debug]: ").concat(e.join(" ")))},t}()});var hn,So,Gd,qd,Zu=b(()=>{"use strict";ze();bo();_o();hn=function(){return{flushMaxRetries:12,flushQueueSize:200,flushIntervalMillis:1e4,instanceName:"$default_instance",logLevel:Se.Warn,loggerProvider:new pt,offline:!1,optOut:!1,serverUrl:yo,serverZone:"US",useBatch:!1}},So=function(){function t(e){var r,n,i,o;this._optOut=!1;var s=hn();this.apiKey=e.apiKey,this.flushIntervalMillis=(r=e.flushIntervalMillis)!==null&&r!==void 0?r:s.flushIntervalMillis,this.flushMaxRetries=e.flushMaxRetries||s.flushMaxRetries,this.flushQueueSize=e.flushQueueSize||s.flushQueueSize,this.instanceName=e.instanceName||s.instanceName,this.loggerProvider=e.loggerProvider||s.loggerProvider,this.logLevel=(n=e.logLevel)!==null&&n!==void 0?n:s.logLevel,this.minIdLength=e.minIdLength,this.plan=e.plan,this.ingestionMetadata=e.ingestionMetadata,this.offline=e.offline!==void 0?e.offline:s.offline,this.optOut=(i=e.optOut)!==null&&i!==void 0?i:s.optOut,this.serverUrl=e.serverUrl,this.serverZone=e.serverZone||s.serverZone,this.storageProvider=e.storageProvider,this.transportProvider=e.transportProvider,this.useBatch=(o=e.useBatch)!==null&&o!==void 0?o:s.useBatch,this.loggerProvider.enable(this.logLevel);var c=qd(e.serverUrl,e.serverZone,e.useBatch);this.serverZone=c.serverZone,this.serverUrl=c.serverUrl}return Object.defineProperty(t.prototype,"optOut",{get:function(){return this._optOut},set:function(e){this._optOut=e},enumerable:!1,configurable:!0}),t}(),Gd=function(t,e){return t==="EU"?e?Yu:Ku:e?Xu:yo},qd=function(t,e,r){if(t===void 0&&(t=""),e===void 0&&(e=hn().serverZone),r===void 0&&(r=hn().useBatch),t)return{serverUrl:t,serverZone:void 0};var n=["US","EU"].includes(e)?e:hn().serverZone;return{serverZone:n,serverUrl:Gd(n,r)}}});var Hd,ht,Ju=b(()=>{"use strict";ze();Hd=function(t){t===void 0&&(t=0);var e=new Error().stack||"";return e.split(`
`).slice(2+t).map(function(r){return r.trim()})},ht=function(t,e,r,n,i){return i===void 0&&(i=null),function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];var c=r(),u=c.logger,a=c.logLevel;if(a&&a<Se.Debug||!a||!u)return t.apply(i,o);var l={type:"invoke public method",name:e,args:o,stacktrace:Hd(1),time:{start:new Date().toISOString()},states:{}};n&&l.states&&(l.states.before=n());var f=t.apply(i,o);return f&&f.promise?f.promise.then(function(){n&&l.states&&(l.states.after=n()),l.time&&(l.time.end=new Date().toISOString()),u.debug(JSON.stringify(l,null,2))}):(n&&l.states&&(l.states.after=n()),l.time&&(l.time.end=new Date().toISOString()),u.debug(JSON.stringify(l,null,2))),f}}});var Rt,ec=b(()=>{"use strict";ze();Rt=function(){function t(){}return t.prototype.send=function(e,r){return Promise.resolve(null)},t.prototype.buildResponse=function(e){var r,n,i,o,s,c,u,a,l,f,d,p,h,m,g,_,v,y,w,E,I,C;if(typeof e!="object")return null;var S=e.code||0,O=this.buildStatus(S);switch(O){case oe.Success:return{status:O,statusCode:S,body:{eventsIngested:(r=e.events_ingested)!==null&&r!==void 0?r:0,payloadSizeBytes:(n=e.payload_size_bytes)!==null&&n!==void 0?n:0,serverUploadTime:(i=e.server_upload_time)!==null&&i!==void 0?i:0}};case oe.Invalid:return{status:O,statusCode:S,body:{error:(o=e.error)!==null&&o!==void 0?o:"",missingField:(s=e.missing_field)!==null&&s!==void 0?s:"",eventsWithInvalidFields:(c=e.events_with_invalid_fields)!==null&&c!==void 0?c:{},eventsWithMissingFields:(u=e.events_with_missing_fields)!==null&&u!==void 0?u:{},eventsWithInvalidIdLengths:(a=e.events_with_invalid_id_lengths)!==null&&a!==void 0?a:{},epsThreshold:(l=e.eps_threshold)!==null&&l!==void 0?l:0,exceededDailyQuotaDevices:(f=e.exceeded_daily_quota_devices)!==null&&f!==void 0?f:{},silencedDevices:(d=e.silenced_devices)!==null&&d!==void 0?d:[],silencedEvents:(p=e.silenced_events)!==null&&p!==void 0?p:[],throttledDevices:(h=e.throttled_devices)!==null&&h!==void 0?h:{},throttledEvents:(m=e.throttled_events)!==null&&m!==void 0?m:[]}};case oe.PayloadTooLarge:return{status:O,statusCode:S,body:{error:(g=e.error)!==null&&g!==void 0?g:""}};case oe.RateLimit:return{status:O,statusCode:S,body:{error:(_=e.error)!==null&&_!==void 0?_:"",epsThreshold:(v=e.eps_threshold)!==null&&v!==void 0?v:0,throttledDevices:(y=e.throttled_devices)!==null&&y!==void 0?y:{},throttledUsers:(w=e.throttled_users)!==null&&w!==void 0?w:{},exceededDailyQuotaDevices:(E=e.exceeded_daily_quota_devices)!==null&&E!==void 0?E:{},exceededDailyQuotaUsers:(I=e.exceeded_daily_quota_users)!==null&&I!==void 0?I:{},throttledEvents:(C=e.throttled_events)!==null&&C!==void 0?C:[]}};case oe.Timeout:default:return{status:O,statusCode:S}}},t.prototype.buildStatus=function(e){return e>=200&&e<300?oe.Success:e===429?oe.RateLimit:e===413?oe.PayloadTooLarge:e===408?oe.Timeout:e>=400&&e<500?oe.Invalid:e>=500?oe.Failed:oe.Unknown},t}()});var nt=b(()=>{"use strict";Zu();_o();bo();Qu();Ju();ec()});function tc(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");wo(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function W(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function c(l){try{a(n.next(l))}catch(f){s(f)}}function u(l){try{a(n.throw(l))}catch(f){s(f)}}function a(l){l.done?o(l.value):i(l.value).then(c,u)}a((n=n.apply(t,e||[])).next())})}function F(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function c(a){return function(l){return u([a,l])}}function u(a){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(r=0)),r;)try{if(n=1,i&&(o=a[0]&2?i.return:a[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[a[0]&2,o.value]),a[0]){case 0:case 1:o=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,i=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(a[0]===6||a[0]===2)){r=0;continue}if(a[0]===3&&(!o||a[1]>o[0]&&a[1]<o[3])){r.label=a[1];break}if(a[0]===6&&r.label<o[1]){r.label=o[1],o=a;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(a);break}o[2]&&r.ops.pop(),r.trys.pop();continue}a=e.call(t,r)}catch(l){a=[6,l],i=0}finally{n=o=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}}function Ve(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ke(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(c){s={error:c}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o}function Ot(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))}var wo,z,Xe=b(()=>{"use strict";wo=function(t,e){return wo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},wo(t,e)};z=function(){return z=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},z.apply(this,arguments)}});function rc(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Eo(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function nc(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function c(l){try{a(n.next(l))}catch(f){s(f)}}function u(l){try{a(n.throw(l))}catch(f){s(f)}}function a(l){l.done?o(l.value):i(l.value).then(c,u)}a((n=n.apply(t,e||[])).next())})}function ic(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function c(a){return function(l){return u([a,l])}}function u(a){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(r=0)),r;)try{if(n=1,i&&(o=a[0]&2?i.return:a[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[a[0]&2,o.value]),a[0]){case 0:case 1:o=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,i=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(a[0]===6||a[0]===2)){r=0;continue}if(a[0]===3&&(!o||a[1]>o[0]&&a[1]<o[3])){r.label=a[1];break}if(a[0]===6&&r.label<o[1]){r.label=o[1],o=a;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(a);break}o[2]&&r.ops.pop(),r.trys.pop();continue}a=e.call(t,r)}catch(l){a=[6,l],i=0}finally{n=o=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}}var Eo,oc=b(()=>{"use strict";Eo=function(t,e){return Eo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},Eo(t,e)}});var Pe,sc=b(()=>{"use strict";Pe=function(){var t="ampIntegrationContext";if(typeof globalThis<"u"&&typeof globalThis[t]<"u")return globalThis[t];if(typeof globalThis<"u")return globalThis;if(typeof window<"u")return window;if(typeof self<"u")return self;if(typeof window<"u")return window}});var Io,ac=b(()=>{"use strict";oc();nt();Io=function(t){rc(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.send=function(r,n){return nc(this,void 0,void 0,function(){var i,o,s;return ic(this,function(c){switch(c.label){case 0:if(typeof fetch>"u")throw new Error("FetchTransport is not supported");return i={headers:{"Content-Type":"application/json",Accept:"*/*"},body:JSON.stringify(n),method:"POST"},[4,fetch(r,i)];case 1:return o=c.sent(),[4,o.text()];case 2:s=c.sent();try{return[2,this.buildResponse(JSON.parse(s))]}catch{return[2,this.buildResponse({code:o.status})]}return[2]}})})},e}(Rt)});var mn,uc=b(()=>{"use strict";Pi();mn=function(t){return t===void 0&&(t="$default_instance"),Zr.getInstance(t)}});var mt=b(()=>{"use strict";ac();uc();sc()});var cc,lc,fc,dc,pc,hc,gn,mc,gc,vc,yc,v0,bc,_c,Sc,wc,Ec,y0,qt=b(()=>{"use strict";nt();ze();cc="[Amplitude]",lc="".concat(cc," Session Replay ID"),fc=0,dc=We.US,pc="".concat(cc," Session Replay Debug"),hc="amp-block",gn="amp-mask",mc="amp-unmask",gc="https://api-sr.amplitude.com/sessions/v2/track",vc="https://api-sr.eu.amplitude.com/sessions/v2/track",yc="https://api-sr.stag2.amplitude.com/sessions/v2/track",v0="".concat(fn,"_replay_unsent"),bc=1*1e6,_c=3e4,Sc=6e4,wc=500,Ec=10*1e3,y0=1e3*60*60*24*3});var xo,Ic,To=b(()=>{"use strict";Xe();mt();nt();ze();qt();xo=function(){return{flushMaxRetries:2,logLevel:Se.Warn,loggerProvider:new pt,transportProvider:new Io}},Ic=function(t){tc(e,t);function e(r,n){var i=this,o=xo();return i=t.call(this,z(z({transportProvider:o.transportProvider},n),{apiKey:r}))||this,i.flushMaxRetries=n.flushMaxRetries!==void 0&&n.flushMaxRetries<=o.flushMaxRetries?n.flushMaxRetries:o.flushMaxRetries,i.apiKey=r,i.sampleRate=n.sampleRate||fc,i.serverZone=n.serverZone||dc,i.configEndpointUrl=n.configEndpointUrl,i.shouldInlineStylesheet=n.shouldInlineStylesheet,n.privacyConfig&&(i.privacyConfig=n.privacyConfig),n.debugMode&&(i.debugMode=n.debugMode),i}return e}(So)});function $d(t){return t.nodeType===t.ELEMENT_NODE}function kt(t){let e=t?.host;return e?.shadowRoot===t}function Dt(t){return Object.prototype.toString.call(t)==="[object ShadowRoot]"}function zd(t){return t.includes(" background-clip: text;")&&!t.includes(" -webkit-background-clip: text;")&&(t=t.replace(" background-clip: text;"," -webkit-background-clip: text; background-clip: text;")),t}function Kd(t){let{cssText:e}=t;if(e.split('"').length<3)return e;let r=["@import",`url(${JSON.stringify(t.href)})`];return t.layerName===""?r.push("layer"):t.layerName&&r.push(`layer(${t.layerName})`),t.supportsText&&r.push(`supports(${t.supportsText})`),t.media.length&&r.push(t.media.mediaText),r.join(" ")+";"}function vn(t){try{let e=t.rules||t.cssRules;return e?zd(Array.from(e,Co).join("")):null}catch{return null}}function Co(t){let e;if(Yd(t))try{e=vn(t.styleSheet)||Kd(t)}catch{}else if(Qd(t)&&t.selectorText.includes(":"))return Xd(t.cssText);return e||t.cssText}function Xd(t){let e=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return t.replace(e,"$1\\$2")}function Yd(t){return"styleSheet"in t}function Qd(t){return"selectorText"in t}function Cc(){return new yn}function vr({element:t,maskInputOptions:e,tagName:r,type:n,value:i,maskInputFn:o}){let s=i||"",c=n&&it(n);return(e[r.toLowerCase()]||c&&e[c])&&(o?s=o(s,t):s="*".repeat(s.length)),s}function it(t){return t.toLowerCase()}function Zd(t){let e=t.getContext("2d");if(!e)return!0;let r=50;for(let n=0;n<t.width;n+=r)for(let i=0;i<t.height;i+=r){let o=e.getImageData,s=xc in o?o[xc]:o;if(new Uint32Array(s.call(e,n,i,Math.min(r,t.width-n),Math.min(r,t.height-i)).data.buffer).some(u=>u!==0))return!1}return!0}function yr(t){let e=t.type;return t.hasAttribute("data-rr-is-password")?"password":e?it(e):null}function Ro(){return Jd++}function tp(t){if(t instanceof HTMLFormElement)return"form";let e=it(t.tagName);return ep.test(e)?"div":e}function rp(t){let e="";return t.indexOf("//")>-1?e=t.split("/").slice(0,3).join("/"):e=t.split("/")[0],e=e.split("?")[0],e}function bn(t,e){return(t||"").replace(np,(r,n,i,o,s,c)=>{let u=i||s||c,a=n||o||"";if(!u)return r;if(ip.test(u)||op.test(u))return`url(${a}${u}${a})`;if(sp.test(u))return`url(${a}${u}${a})`;if(u[0]==="/")return`url(${a}${rp(e)+u}${a})`;let l=e.split("/"),f=u.split("/");l.pop();for(let d of f)d!=="."&&(d===".."?l.pop():l.push(d));return`url(${a}${l.join("/")}${a})`})}function cp(t,e){if(e.trim()==="")return e;let r=0;function n(o){let s,c=o.exec(e.substring(r));return c?(s=c[0],r+=s.length,s):""}let i=[];for(;n(up),!(r>=e.length);){let o=n(ap);if(o.slice(-1)===",")o=$t(t,o.substring(0,o.length-1)),i.push(o);else{let s="";o=$t(t,o);let c=!1;for(;;){let u=e.charAt(r);if(u===""){i.push((o+s).trim());break}else if(c)u===")"&&(c=!1);else if(u===","){r+=1,i.push((o+s).trim());break}else u==="("&&(c=!0);s+=u,r+=1}}}return i.join(", ")}function $t(t,e){if(!e||e.trim()==="")return e;let r=t.createElement("a");return r.href=e,r.href}function lp(t){return!!(t.tagName==="svg"||t.ownerSVGElement)}function Oo(){let t=document.createElement("a");return t.href="",t.href}function Mo(t,e,r,n){return n&&(r==="src"||r==="href"&&!(e==="use"&&n[0]==="#")||r==="xlink:href"&&n[0]!=="#"||r==="background"&&(e==="table"||e==="td"||e==="th")?$t(t,n):r==="srcset"?cp(t,n):r==="style"?bn(n,Oo()):e==="object"&&r==="data"?$t(t,n):n)}function Do(t,e,r){return(t==="video"||t==="audio")&&e==="autoplay"}function fp(t,e,r){try{if(typeof e=="string"){if(t.classList.contains(e))return!0}else for(let n=t.classList.length;n--;){let i=t.classList[n];if(e.test(i))return!0}if(r)return t.matches(r)}catch{}return!1}function gr(t,e,r){if(!t)return!1;if(t.nodeType!==t.ELEMENT_NODE)return r?gr(t.parentNode,e,r):!1;for(let n=t.classList.length;n--;){let i=t.classList[n];if(e.test(i))return!0}return r?gr(t.parentNode,e,r):!1}function Po(t,e,r){try{let n=t.nodeType===t.ELEMENT_NODE?t:t.parentElement;if(n===null)return!1;if(typeof e=="string"){if(n.classList.contains(e)||n.closest(`.${e}`))return!0}else if(gr(n,e,!0))return!0;if(r&&(n.matches(r)||n.closest(r)))return!0}catch{}return!1}function dp(t,e,r){let n=t.contentWindow;if(!n)return;let i=!1,o;try{o=n.document.readyState}catch{return}if(o!=="complete"){let c=setTimeout(()=>{i||(e(),i=!0)},r);t.addEventListener("load",()=>{clearTimeout(c),i=!0,e()});return}let s="about:blank";if(n.location.href!==s||t.src===s||t.src==="")return setTimeout(e,0),t.addEventListener("load",e);t.addEventListener("load",e)}function pp(t,e,r){let n=!1,i;try{i=t.sheet}catch{return}if(i)return;let o=setTimeout(()=>{n||(e(),n=!0)},r);t.addEventListener("load",()=>{clearTimeout(o),n=!0,e()})}function hp(t,e){let{doc:r,mirror:n,blockClass:i,blockSelector:o,maskTextClass:s,maskTextSelector:c,inlineStylesheet:u,maskInputOptions:a={},maskTextFn:l,maskInputFn:f,dataURLOptions:d={},inlineImages:p,recordCanvas:h,keepIframeSrcFn:m,newlyAddedElement:g=!1}=e,_=mp(r,n);switch(t.nodeType){case t.DOCUMENT_NODE:return t.compatMode!=="CSS1Compat"?{type:de.Document,childNodes:[],compatMode:t.compatMode}:{type:de.Document,childNodes:[]};case t.DOCUMENT_TYPE_NODE:return{type:de.DocumentType,name:t.name,publicId:t.publicId,systemId:t.systemId,rootId:_};case t.ELEMENT_NODE:return vp(t,{doc:r,blockClass:i,blockSelector:o,inlineStylesheet:u,maskInputOptions:a,maskInputFn:f,dataURLOptions:d,inlineImages:p,recordCanvas:h,keepIframeSrcFn:m,newlyAddedElement:g,rootId:_});case t.TEXT_NODE:return gp(t,{maskTextClass:s,maskTextSelector:c,maskTextFn:l,rootId:_});case t.CDATA_SECTION_NODE:return{type:de.CDATA,textContent:"",rootId:_};case t.COMMENT_NODE:return{type:de.Comment,textContent:t.textContent||"",rootId:_};default:return!1}}function mp(t,e){if(!e.hasNode(t))return;let r=e.getId(t);return r===1?void 0:r}function gp(t,e){var r;let{maskTextClass:n,maskTextSelector:i,maskTextFn:o,rootId:s}=e,c=t.parentNode&&t.parentNode.tagName,u=t.textContent,a=c==="STYLE"?!0:void 0,l=c==="SCRIPT"?!0:void 0;if(a&&u){try{t.nextSibling||t.previousSibling||!((r=t.parentNode.sheet)===null||r===void 0)&&r.cssRules&&(u=vn(t.parentNode.sheet))}catch(f){console.warn(`Cannot get CSS styles from text's parentNode. Error: ${f}`,t)}u=bn(u,Oo())}return l&&(u="SCRIPT_PLACEHOLDER"),!a&&!l&&u&&Po(t,n,i)&&(u=o?o(u,t.parentElement):u.replace(/[\S]/g,"*")),{type:de.Text,textContent:u||"",isStyle:a,rootId:s}}function vp(t,e){let{doc:r,blockClass:n,blockSelector:i,inlineStylesheet:o,maskInputOptions:s={},maskInputFn:c,dataURLOptions:u={},inlineImages:a,recordCanvas:l,keepIframeSrcFn:f,newlyAddedElement:d=!1,rootId:p}=e,h=fp(t,n,i),m=tp(t),g={},_=t.attributes.length;for(let v=0;v<_;v++){let y=t.attributes[v];Do(m,y.name,y.value)||(g[y.name]=Mo(r,m,it(y.name),y.value))}if(m==="link"&&o){let v=Array.from(r.styleSheets).find(w=>w.href===t.href),y=null;v&&(y=vn(v)),y&&(delete g.rel,delete g.href,g._cssText=bn(y,v.href))}if(m==="style"&&t.sheet&&!(t.innerText||t.textContent||"").trim().length){let v=vn(t.sheet);v&&(g._cssText=bn(v,Oo()))}if(m==="input"||m==="textarea"||m==="select"){let v=t.value,y=t.checked;if(g.type!=="radio"&&g.type!=="checkbox"&&g.type!=="submit"&&g.type!=="button"&&v){let w=yr(t);g.value=vr({element:t,type:w,tagName:m,value:v,maskInputOptions:s,maskInputFn:c})}else y&&(g.checked=y)}if(m==="option"&&(t.selected&&!s.select?g.selected=!0:delete g.selected),m==="canvas"&&l){if(t.__context==="2d")Zd(t)||(g.rr_dataURL=t.toDataURL(u.type,u.quality));else if(!("__context"in t)){let v=t.toDataURL(u.type,u.quality),y=document.createElement("canvas");y.width=t.width,y.height=t.height;let w=y.toDataURL(u.type,u.quality);v!==w&&(g.rr_dataURL=v)}}if(m==="img"&&a){Ht||(Ht=r.createElement("canvas"),Tc=Ht.getContext("2d"));let v=t,y=v.crossOrigin;v.crossOrigin="anonymous";let w=()=>{v.removeEventListener("load",w);try{Ht.width=v.naturalWidth,Ht.height=v.naturalHeight,Tc.drawImage(v,0,0),g.rr_dataURL=Ht.toDataURL(u.type,u.quality)}catch(E){console.warn(`Cannot inline img src=${v.currentSrc}! Error: ${E}`)}y?g.crossOrigin=y:v.removeAttribute("crossorigin")};v.complete&&v.naturalWidth!==0?w():v.addEventListener("load",w)}if((m==="audio"||m==="video")&&(g.rr_mediaState=t.paused?"paused":"played",g.rr_mediaCurrentTime=t.currentTime),d||(t.scrollLeft&&(g.rr_scrollLeft=t.scrollLeft),t.scrollTop&&(g.rr_scrollTop=t.scrollTop)),h){let{width:v,height:y}=t.getBoundingClientRect();g={class:g.class,rr_width:`${v}px`,rr_height:`${y}px`}}return m==="iframe"&&!f(g.src)&&(t.contentDocument||(g.rr_src=g.src),delete g.src),{type:de.Element,tagName:m,attributes:g,childNodes:[],isSVG:lp(t)||void 0,needBlock:h,rootId:p}}function $(t){return t==null?"":t.toLowerCase()}function yp(t,e){if(e.comment&&t.type===de.Comment)return!0;if(t.type===de.Element){if(e.script&&(t.tagName==="script"||t.tagName==="link"&&(t.attributes.rel==="preload"||t.attributes.rel==="modulepreload")&&t.attributes.as==="script"||t.tagName==="link"&&t.attributes.rel==="prefetch"&&typeof t.attributes.href=="string"&&t.attributes.href.endsWith(".js")))return!0;if(e.headFavicon&&(t.tagName==="link"&&t.attributes.rel==="shortcut icon"||t.tagName==="meta"&&($(t.attributes.name).match(/^msapplication-tile(image|color)$/)||$(t.attributes.name)==="application-name"||$(t.attributes.rel)==="icon"||$(t.attributes.rel)==="apple-touch-icon"||$(t.attributes.rel)==="shortcut icon")))return!0;if(t.tagName==="meta"){if(e.headMetaDescKeywords&&$(t.attributes.name).match(/^description|keywords$/))return!0;if(e.headMetaSocial&&($(t.attributes.property).match(/^(og|twitter|fb):/)||$(t.attributes.name).match(/^(og|twitter):/)||$(t.attributes.name)==="pinterest"))return!0;if(e.headMetaRobots&&($(t.attributes.name)==="robots"||$(t.attributes.name)==="googlebot"||$(t.attributes.name)==="bingbot"))return!0;if(e.headMetaHttpEquiv&&t.attributes["http-equiv"]!==void 0)return!0;if(e.headMetaAuthorship&&($(t.attributes.name)==="author"||$(t.attributes.name)==="generator"||$(t.attributes.name)==="framework"||$(t.attributes.name)==="publisher"||$(t.attributes.name)==="progid"||$(t.attributes.property).match(/^article:/)||$(t.attributes.property).match(/^product:/)))return!0;if(e.headMetaVerification&&($(t.attributes.name)==="google-site-verification"||$(t.attributes.name)==="yandex-verification"||$(t.attributes.name)==="csrf-token"||$(t.attributes.name)==="p:domain_verify"||$(t.attributes.name)==="verify-v1"||$(t.attributes.name)==="verification"||$(t.attributes.name)==="shopify-checkout-api-token"))return!0}}return!1}function Mt(t,e){let{doc:r,mirror:n,blockClass:i,blockSelector:o,maskTextClass:s,maskTextSelector:c,skipChild:u=!1,inlineStylesheet:a=!0,maskInputOptions:l={},maskTextFn:f,maskInputFn:d,slimDOMOptions:p,dataURLOptions:h={},inlineImages:m=!1,recordCanvas:g=!1,onSerialize:_,onIframeLoad:v,iframeLoadTimeout:y=5e3,onStylesheetLoad:w,stylesheetLoadTimeout:E=5e3,keepIframeSrcFn:I=()=>!1,newlyAddedElement:C=!1}=e,{preserveWhiteSpace:S=!0}=e,O=hp(t,{doc:r,mirror:n,blockClass:i,blockSelector:o,maskTextClass:s,maskTextSelector:c,inlineStylesheet:a,maskInputOptions:l,maskTextFn:f,maskInputFn:d,dataURLOptions:h,inlineImages:m,recordCanvas:g,keepIframeSrcFn:I,newlyAddedElement:C});if(!O)return console.warn(t,"not serialized"),null;let M;n.hasNode(t)?M=n.getId(t):yp(O,p)||!S&&O.type===de.Text&&!O.isStyle&&!O.textContent.replace(/^\s+|\s+$/gm,"").length?M=Pt:M=Ro();let P=Object.assign(O,{id:M});if(n.add(t,P),M===Pt)return null;_&&_(t);let k=!u;if(P.type===de.Element){k=k&&!P.needBlock,delete P.needBlock;let N=t.shadowRoot;N&&Dt(N)&&(P.isShadowHost=!0)}if((P.type===de.Document||P.type===de.Element)&&k){p.headWhitespace&&P.type===de.Element&&P.tagName==="head"&&(S=!1);let N={doc:r,mirror:n,blockClass:i,blockSelector:o,maskTextClass:s,maskTextSelector:c,skipChild:u,inlineStylesheet:a,maskInputOptions:l,maskTextFn:f,maskInputFn:d,slimDOMOptions:p,dataURLOptions:h,inlineImages:m,recordCanvas:g,preserveWhiteSpace:S,onSerialize:_,onIframeLoad:v,iframeLoadTimeout:y,onStylesheetLoad:w,stylesheetLoadTimeout:E,keepIframeSrcFn:I};for(let j of Array.from(t.childNodes)){let G=Mt(j,N);G&&P.childNodes.push(G)}if($d(t)&&t.shadowRoot)for(let j of Array.from(t.shadowRoot.childNodes)){let G=Mt(j,N);G&&(Dt(t.shadowRoot)&&(G.isShadow=!0),P.childNodes.push(G))}}return t.parentNode&&kt(t.parentNode)&&Dt(t.parentNode)&&(P.isShadow=!0),P.type===de.Element&&P.tagName==="iframe"&&dp(t,()=>{let N=t.contentDocument;if(N&&v){let j=Mt(N,{doc:N,mirror:n,blockClass:i,blockSelector:o,maskTextClass:s,maskTextSelector:c,skipChild:!1,inlineStylesheet:a,maskInputOptions:l,maskTextFn:f,maskInputFn:d,slimDOMOptions:p,dataURLOptions:h,inlineImages:m,recordCanvas:g,preserveWhiteSpace:S,onSerialize:_,onIframeLoad:v,iframeLoadTimeout:y,onStylesheetLoad:w,stylesheetLoadTimeout:E,keepIframeSrcFn:I});j&&v(t,j)}},y),P.type===de.Element&&P.tagName==="link"&&P.attributes.rel==="stylesheet"&&pp(t,()=>{if(w){let N=Mt(t,{doc:r,mirror:n,blockClass:i,blockSelector:o,maskTextClass:s,maskTextSelector:c,skipChild:!1,inlineStylesheet:a,maskInputOptions:l,maskTextFn:f,maskInputFn:d,slimDOMOptions:p,dataURLOptions:h,inlineImages:m,recordCanvas:g,preserveWhiteSpace:S,onSerialize:_,onIframeLoad:v,iframeLoadTimeout:y,onStylesheetLoad:w,stylesheetLoadTimeout:E,keepIframeSrcFn:I});N&&w(t,N)}},E),P}function Rc(t,e){let{mirror:r=new yn,blockClass:n="rr-block",blockSelector:i=null,maskTextClass:o="rr-mask",maskTextSelector:s=null,inlineStylesheet:c=!0,inlineImages:u=!1,recordCanvas:a=!1,maskAllInputs:l=!1,maskTextFn:f,maskInputFn:d,slimDOM:p=!1,dataURLOptions:h,preserveWhiteSpace:m,onSerialize:g,onIframeLoad:_,iframeLoadTimeout:v,onStylesheetLoad:y,stylesheetLoadTimeout:w,keepIframeSrcFn:E=()=>!1}=e||{};return Mt(t,{doc:t,mirror:r,blockClass:n,blockSelector:i,maskTextClass:o,maskTextSelector:s,skipChild:!1,inlineStylesheet:c,maskInputOptions:l===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:l===!1?{password:!0}:l,maskTextFn:f,maskInputFn:d,slimDOMOptions:p===!0||p==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:p==="all",headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:p===!1?{}:p,dataURLOptions:h,inlineImages:u,recordCanvas:a,preserveWhiteSpace:m,onSerialize:g,onIframeLoad:_,iframeLoadTimeout:v,onStylesheetLoad:y,stylesheetLoadTimeout:w,keepIframeSrcFn:E,newlyAddedElement:!1})}var de,yn,xc,Jd,ep,Pt,Ht,Tc,np,ip,op,sp,ap,up,bp,T0,_p,C0,gt=b(()=>{"use strict";(function(t){t[t.Document=0]="Document",t[t.DocumentType=1]="DocumentType",t[t.Element=2]="Element",t[t.Text=3]="Text",t[t.CDATA=4]="CDATA",t[t.Comment=5]="Comment"})(de||(de={}));yn=class{constructor(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}getId(e){var r;if(!e)return-1;let n=(r=this.getMeta(e))===null||r===void 0?void 0:r.id;return n??-1}getNode(e){return this.idNodeMap.get(e)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(e){return this.nodeMetaMap.get(e)||null}removeNodeFromMap(e){let r=this.getId(e);this.idNodeMap.delete(r),e.childNodes&&e.childNodes.forEach(n=>this.removeNodeFromMap(n))}has(e){return this.idNodeMap.has(e)}hasNode(e){return this.nodeMetaMap.has(e)}add(e,r){let n=r.id;this.idNodeMap.set(n,e),this.nodeMetaMap.set(e,r)}replace(e,r){let n=this.getNode(e);if(n){let i=this.nodeMetaMap.get(n);i&&this.nodeMetaMap.set(r,i)}this.idNodeMap.set(e,r)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}};xc="__rrweb_original__";Jd=1,ep=new RegExp("[^a-z0-9-_:]"),Pt=-2;np=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,ip=/^(?:[a-z+]+:)?\/\//i,op=/^www\..*/i,sp=/^(data:)([^,]*),(.*)/i;ap=/^[^ \t\n\r\u000c]+/,up=/^[, \t\n\r\u000c]+/;bp=/(max|min)-device-(width|height)/,T0=new RegExp(bp.source,"g"),_p=/([^\\]):hover/,C0=new RegExp(_p.source,"g")});var B,U,Ce,Ye,ot,Lt=b(()=>{"use strict";B=(t=>(t[t.DomContentLoaded=0]="DomContentLoaded",t[t.Load=1]="Load",t[t.FullSnapshot=2]="FullSnapshot",t[t.IncrementalSnapshot=3]="IncrementalSnapshot",t[t.Meta=4]="Meta",t[t.Custom=5]="Custom",t[t.Plugin=6]="Plugin",t))(B||{}),U=(t=>(t[t.Mutation=0]="Mutation",t[t.MouseMove=1]="MouseMove",t[t.MouseInteraction=2]="MouseInteraction",t[t.Scroll=3]="Scroll",t[t.ViewportResize=4]="ViewportResize",t[t.Input=5]="Input",t[t.TouchMove=6]="TouchMove",t[t.MediaInteraction=7]="MediaInteraction",t[t.StyleSheetRule=8]="StyleSheetRule",t[t.CanvasMutation=9]="CanvasMutation",t[t.Font=10]="Font",t[t.Log=11]="Log",t[t.Drag=12]="Drag",t[t.StyleDeclaration=13]="StyleDeclaration",t[t.Selection=14]="Selection",t[t.AdoptedStyleSheet=15]="AdoptedStyleSheet",t))(U||{}),Ce=(t=>(t[t.MouseUp=0]="MouseUp",t[t.MouseDown=1]="MouseDown",t[t.Click=2]="Click",t[t.ContextMenu=3]="ContextMenu",t[t.DblClick=4]="DblClick",t[t.Focus=5]="Focus",t[t.Blur=6]="Blur",t[t.TouchStart=7]="TouchStart",t[t.TouchMove_Departed=8]="TouchMove_Departed",t[t.TouchEnd=9]="TouchEnd",t[t.TouchCancel=10]="TouchCancel",t))(Ce||{}),Ye=(t=>(t[t.Mouse=0]="Mouse",t[t.Pen=1]="Pen",t[t.Touch=2]="Touch",t))(Ye||{}),ot=(t=>(t[t["2D"]=0]="2D",t[t.WebGL=1]="WebGL",t[t.WebGL2=2]="WebGL2",t))(ot||{})});var Ut={};sd(Ut,{StyleSheetMirror:()=>br,_mirror:()=>ko,closestElementOfNode:()=>_n,getBaseDimension:()=>Mc,getNestedRule:()=>Dc,getPositionsAndIndex:()=>wp,getRootShadowHost:()=>Pc,getShadowHost:()=>wn,getWindowHeight:()=>Sr,getWindowScroll:()=>_r,getWindowWidth:()=>wr,hasShadowRoot:()=>Kt,hookSetter:()=>vt,inDom:()=>Cr,isAncestorRemoved:()=>Sn,isBlocked:()=>se,isIgnored:()=>Er,isSerialized:()=>Lo,isSerializedIframe:()=>xr,isSerializedStylesheet:()=>Tr,iterateResolveTree:()=>Oc,legacy_isTouchEvent:()=>Ir,nowTimestamp:()=>At,on:()=>ye,patch:()=>Ge,polyfill:()=>No,queueToResolveTrees:()=>Sp,shadowHostInDom:()=>kc,throttle:()=>Nt,uniqueTextMutations:()=>Ep});function ye(t,e,r=document){let n={capture:!0,passive:!0};return r.addEventListener(t,e,n),()=>r.removeEventListener(t,e,n)}function Nt(t,e,r={}){let n=null,i=0;return function(...o){let s=Date.now();!i&&r.leading===!1&&(i=s);let c=e-(s-i),u=this;c<=0||c>e?(n&&(clearTimeout(n),n=null),i=s,t.apply(u,o)):!n&&r.trailing!==!1&&(n=setTimeout(()=>{i=r.leading===!1?0:Date.now(),n=null,t.apply(u,o)},c))}}function vt(t,e,r,n,i=window){let o=i.Object.getOwnPropertyDescriptor(t,e);return i.Object.defineProperty(t,e,n?r:{set(s){setTimeout(()=>{r.set.call(this,s)},0),o&&o.set&&o.set.call(this,s)}}),()=>vt(t,e,o||{},!0)}function Ge(t,e,r){try{if(!(e in t))return()=>{};let n=t[e],i=r(n);return typeof i=="function"&&(i.prototype=i.prototype||{},Object.defineProperties(i,{__rrweb_original__:{enumerable:!1,value:n}})),t[e]=i,()=>{t[e]=n}}catch{return()=>{}}}function _r(t){var e,r,n,i,o,s;let c=t.document;return{left:c.scrollingElement?c.scrollingElement.scrollLeft:t.pageXOffset!==void 0?t.pageXOffset:c?.documentElement.scrollLeft||((r=(e=c?.body)===null||e===void 0?void 0:e.parentElement)===null||r===void 0?void 0:r.scrollLeft)||((n=c?.body)===null||n===void 0?void 0:n.scrollLeft)||0,top:c.scrollingElement?c.scrollingElement.scrollTop:t.pageYOffset!==void 0?t.pageYOffset:c?.documentElement.scrollTop||((o=(i=c?.body)===null||i===void 0?void 0:i.parentElement)===null||o===void 0?void 0:o.scrollTop)||((s=c?.body)===null||s===void 0?void 0:s.scrollTop)||0}}function Sr(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function wr(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function _n(t){return t?t.nodeType===t.ELEMENT_NODE?t:t.parentElement:null}function se(t,e,r,n){if(!t)return!1;let i=_n(t);if(!i)return!1;try{if(typeof e=="string"){if(i.classList.contains(e)||n&&i.closest("."+e)!==null)return!0}else if(gr(i,e,n))return!0}catch{}return!!(r&&(i.matches(r)||n&&i.closest(r)!==null))}function Lo(t,e){return e.getId(t)!==-1}function Er(t,e){return e.getId(t)===Pt}function Sn(t,e){if(kt(t))return!1;let r=e.getId(t);return e.has(r)?t.parentNode&&t.parentNode.nodeType===t.DOCUMENT_NODE?!1:t.parentNode?Sn(t.parentNode,e):!0:!0}function Ir(t){return!!t.changedTouches}function No(t=window){"NodeList"in t&&!t.NodeList.prototype.forEach&&(t.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in t&&!t.DOMTokenList.prototype.forEach&&(t.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...e)=>{let r=e[0];if(!(0 in e))throw new TypeError("1 argument is required");do if(this===r)return!0;while(r=r&&r.parentNode);return!1})}function Sp(t){let e={},r=(i,o)=>{let s={value:i,parent:o,children:[]};return e[i.node.id]=s,s},n=[];for(let i of t){let{nextId:o,parentId:s}=i;if(o&&o in e){let c=e[o];if(c.parent){let u=c.parent.children.indexOf(c);c.parent.children.splice(u,0,r(i,c.parent))}else{let u=n.indexOf(c);n.splice(u,0,r(i,null))}continue}if(s in e){let c=e[s];c.children.push(r(i,c));continue}n.push(r(i,null))}return n}function Oc(t,e){e(t.value);for(let r=t.children.length-1;r>=0;r--)Oc(t.children[r],e)}function xr(t,e){return!!(t.nodeName==="IFRAME"&&e.getMeta(t))}function Tr(t,e){return!!(t.nodeName==="LINK"&&t.nodeType===t.ELEMENT_NODE&&t.getAttribute&&t.getAttribute("rel")==="stylesheet"&&e.getMeta(t))}function Mc(t,e){var r,n;let i=(n=(r=t.ownerDocument)===null||r===void 0?void 0:r.defaultView)===null||n===void 0?void 0:n.frameElement;if(!i||i===e)return{x:0,y:0,relativeScale:1,absoluteScale:1};let o=i.getBoundingClientRect(),s=Mc(i,e),c=o.height/i.clientHeight;return{x:o.x*s.relativeScale+s.x,y:o.y*s.relativeScale+s.y,relativeScale:c,absoluteScale:s.absoluteScale*c}}function Kt(t){return!!t?.shadowRoot}function Dc(t,e){let r=t[e[0]];return e.length===1?r:Dc(r.cssRules[e[1]].cssRules,e.slice(2))}function wp(t){let e=[...t],r=e.pop();return{positions:e,index:r}}function Ep(t){let e=new Set,r=[];for(let n=t.length;n--;){let i=t[n];e.has(i.id)||(r.push(i),e.add(i.id))}return r}function wn(t){var e,r;let n=null;return((r=(e=t.getRootNode)===null||e===void 0?void 0:e.call(t))===null||r===void 0?void 0:r.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&t.getRootNode().host&&(n=t.getRootNode().host),n}function Pc(t){let e=t,r;for(;r=wn(e);)e=r;return e}function kc(t){let e=t.ownerDocument;if(!e)return!1;let r=Pc(t);return e.contains(r)}function Cr(t){let e=t.ownerDocument;return e?e.contains(t)||kc(t):!1}var zt,ko,At,br,qe=b(()=>{"use strict";gt();zt=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`,ko={map:{},getId(){return console.error(zt),-1},getNode(){return console.error(zt),null},removeNodeFromMap(){console.error(zt)},has(){return console.error(zt),!1},reset(){console.error(zt)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(ko=new Proxy(ko,{get(t,e,r){return e==="map"&&console.error(zt),Reflect.get(t,e,r)}}));At=Date.now;/[1-9][0-9]{12}/.test(Date.now().toString())||(At=()=>new Date().getTime());br=class{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(e){var r;return(r=this.styleIDMap.get(e))!==null&&r!==void 0?r:-1}has(e){return this.styleIDMap.has(e)}add(e,r){if(this.has(e))return this.getId(e);let n;return r===void 0?n=this.id++:n=r,this.styleIDMap.set(e,n),this.idStyleMap.set(n,e),n}getStyle(e){return this.idStyleMap.get(e)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}});function Lc(t){Rr=t}function Nc(){Rr=void 0}function Ao(t){return(...e)=>{try{return t(...e)}catch(r){try{r._external_=!0}catch{}throw r}}}var Rr,A,Uo=b(()=>{"use strict";A=t=>Rr?(...r)=>{try{return t(...r)}catch(n){if(Rr&&Rr(n)===!0)return;throw n}}:t});var Or,Ac=b(()=>{"use strict";Or=class{constructor(e){this.generateIdFn=e,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(e,r,n,i){let o=n||this.getIdToRemoteIdMap(e),s=i||this.getRemoteIdToIdMap(e),c=o.get(r);return c||(c=this.generateIdFn(),o.set(r,c),s.set(c,r)),c}getIds(e,r){let n=this.getIdToRemoteIdMap(e),i=this.getRemoteIdToIdMap(e);return r.map(o=>this.getId(e,o,n,i))}getRemoteId(e,r,n){let i=n||this.getRemoteIdToIdMap(e);if(typeof r!="number")return r;let o=i.get(r);return o||-1}getRemoteIds(e,r){let n=this.getRemoteIdToIdMap(e);return r.map(i=>this.getRemoteId(e,i,n))}reset(e){if(!e){this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap;return}this.iframeIdToRemoteIdMap.delete(e),this.iframeRemoteIdToIdMap.delete(e)}getIdToRemoteIdMap(e){let r=this.iframeIdToRemoteIdMap.get(e);return r||(r=new Map,this.iframeIdToRemoteIdMap.set(e,r)),r}getRemoteIdToIdMap(e){let r=this.iframeRemoteIdToIdMap.get(e);return r||(r=new Map,this.iframeRemoteIdToIdMap.set(e,r)),r}}});var En,Uc=b(()=>{"use strict";gt();Lt();Ac();En=class{constructor(e){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new Or(Ro),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=e.mutationCb,this.wrappedEmit=e.wrappedEmit,this.stylesheetManager=e.stylesheetManager,this.recordCrossOriginIframes=e.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new Or(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=e.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(e){this.iframes.set(e,!0),e.contentWindow&&this.crossOriginIframeMap.set(e.contentWindow,e)}addLoadListener(e){this.loadListener=e}attachIframe(e,r){var n;this.mutationCb({adds:[{parentId:this.mirror.getId(e),nextId:null,node:r}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),(n=this.loadListener)===null||n===void 0||n.call(this,e),e.contentDocument&&e.contentDocument.adoptedStyleSheets&&e.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(e.contentDocument.adoptedStyleSheets,this.mirror.getId(e.contentDocument))}handleMessage(e){let r=e;if(r.data.type!=="rrweb"||r.origin!==r.data.origin||!e.source)return;let i=this.crossOriginIframeMap.get(e.source);if(!i)return;let o=this.transformCrossOriginEvent(i,r.data.event);o&&this.wrappedEmit(o,r.data.isCheckout)}transformCrossOriginEvent(e,r){var n;switch(r.type){case B.FullSnapshot:{this.crossOriginIframeMirror.reset(e),this.crossOriginIframeStyleMirror.reset(e),this.replaceIdOnNode(r.data.node,e);let i=r.data.node.id;return this.crossOriginIframeRootIdMap.set(e,i),this.patchRootIdOnNode(r.data.node,i),{timestamp:r.timestamp,type:B.IncrementalSnapshot,data:{source:U.Mutation,adds:[{parentId:this.mirror.getId(e),nextId:null,node:r.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case B.Meta:case B.Load:case B.DomContentLoaded:return!1;case B.Plugin:return r;case B.Custom:return this.replaceIds(r.data.payload,e,["id","parentId","previousId","nextId"]),r;case B.IncrementalSnapshot:switch(r.data.source){case U.Mutation:return r.data.adds.forEach(i=>{this.replaceIds(i,e,["parentId","nextId","previousId"]),this.replaceIdOnNode(i.node,e);let o=this.crossOriginIframeRootIdMap.get(e);o&&this.patchRootIdOnNode(i.node,o)}),r.data.removes.forEach(i=>{this.replaceIds(i,e,["parentId","id"])}),r.data.attributes.forEach(i=>{this.replaceIds(i,e,["id"])}),r.data.texts.forEach(i=>{this.replaceIds(i,e,["id"])}),r;case U.Drag:case U.TouchMove:case U.MouseMove:return r.data.positions.forEach(i=>{this.replaceIds(i,e,["id"])}),r;case U.ViewportResize:return!1;case U.MediaInteraction:case U.MouseInteraction:case U.Scroll:case U.CanvasMutation:case U.Input:return this.replaceIds(r.data,e,["id"]),r;case U.StyleSheetRule:case U.StyleDeclaration:return this.replaceIds(r.data,e,["id"]),this.replaceStyleIds(r.data,e,["styleId"]),r;case U.Font:return r;case U.Selection:return r.data.ranges.forEach(i=>{this.replaceIds(i,e,["start","end"])}),r;case U.AdoptedStyleSheet:return this.replaceIds(r.data,e,["id"]),this.replaceStyleIds(r.data,e,["styleIds"]),(n=r.data.styles)===null||n===void 0||n.forEach(i=>{this.replaceStyleIds(i,e,["styleId"])}),r}}}replace(e,r,n,i){for(let o of i)!Array.isArray(r[o])&&typeof r[o]!="number"||(Array.isArray(r[o])?r[o]=e.getIds(n,r[o]):r[o]=e.getId(n,r[o]));return r}replaceIds(e,r,n){return this.replace(this.crossOriginIframeMirror,e,r,n)}replaceStyleIds(e,r,n){return this.replace(this.crossOriginIframeStyleMirror,e,r,n)}replaceIdOnNode(e,r){this.replaceIds(e,r,["id","rootId"]),"childNodes"in e&&e.childNodes.forEach(n=>{this.replaceIdOnNode(n,r)})}patchRootIdOnNode(e,r){e.type!==de.Document&&!e.rootId&&(e.rootId=r),"childNodes"in e&&e.childNodes.forEach(n=>{this.patchRootIdOnNode(n,r)})}}});function Fc(t){return"__ln"in t}function jo(t,e){t.delete(e),e.childNodes.forEach(r=>jo(t,r))}function Bc(t,e,r){return t.length===0?!1:Vc(t,e,r)}function Vc(t,e,r){let{parentNode:n}=e;if(!n)return!1;let i=r.getId(n);return t.some(o=>o.id===i)?!0:Vc(t,n,r)}function Wc(t,e){return t.size===0?!1:Gc(t,e)}function Gc(t,e){let{parentNode:r}=e;return r?t.has(r)?!0:Gc(t,r):!1}var Fo,jc,In,qc=b(()=>{"use strict";gt();qe();Fo=class{constructor(){this.length=0,this.head=null,this.tail=null}get(e){if(e>=this.length)throw new Error("Position outside of list range");let r=this.head;for(let n=0;n<e;n++)r=r?.next||null;return r}addNode(e){let r={value:e,previous:null,next:null};if(e.__ln=r,e.previousSibling&&Fc(e.previousSibling)){let n=e.previousSibling.__ln.next;r.next=n,r.previous=e.previousSibling.__ln,e.previousSibling.__ln.next=r,n&&(n.previous=r)}else if(e.nextSibling&&Fc(e.nextSibling)&&e.nextSibling.__ln.previous){let n=e.nextSibling.__ln.previous;r.previous=n,r.next=e.nextSibling.__ln,e.nextSibling.__ln.previous=r,n&&(n.next=r)}else this.head&&(this.head.previous=r),r.next=this.head,this.head=r;r.next===null&&(this.tail=r),this.length++}removeNode(e){let r=e.__ln;this.head&&(r.previous?(r.previous.next=r.next,r.next?r.next.previous=r.previous:this.tail=r.previous):(this.head=r.next,this.head?this.head.previous=null:this.tail=null),e.__ln&&delete e.__ln,this.length--)}},jc=(t,e)=>`${t}@${e}`,In=class{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=e=>{e.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;let e=[],r=new Set,n=new Fo,i=u=>{let a=u,l=Pt;for(;l===Pt;)a=a&&a.nextSibling,l=a&&this.mirror.getId(a);return l},o=u=>{if(!u.parentNode||!Cr(u))return;let a=kt(u.parentNode)?this.mirror.getId(wn(u)):this.mirror.getId(u.parentNode),l=i(u);if(a===-1||l===-1)return n.addNode(u);let f=Mt(u,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskTextClass:this.maskTextClass,maskTextSelector:this.maskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:d=>{xr(d,this.mirror)&&this.iframeManager.addIframe(d),Tr(d,this.mirror)&&this.stylesheetManager.trackLinkElement(d),Kt(u)&&this.shadowDomManager.addShadowRoot(u.shadowRoot,this.doc)},onIframeLoad:(d,p)=>{this.iframeManager.attachIframe(d,p),this.shadowDomManager.observeAttachShadow(d)},onStylesheetLoad:(d,p)=>{this.stylesheetManager.attachLinkElement(d,p)}});f&&(e.push({parentId:a,nextId:l,node:f}),r.add(f.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(let u of this.movedSet)Bc(this.removes,u,this.mirror)&&!this.movedSet.has(u.parentNode)||o(u);for(let u of this.addedSet)!Wc(this.droppedSet,u)&&!Bc(this.removes,u,this.mirror)||Wc(this.movedSet,u)?o(u):this.droppedSet.add(u);let s=null;for(;n.length;){let u=null;if(s){let a=this.mirror.getId(s.value.parentNode),l=i(s.value);a!==-1&&l!==-1&&(u=s)}if(!u){let a=n.tail;for(;a;){let l=a;if(a=a.previous,l){let f=this.mirror.getId(l.value.parentNode);if(i(l.value)===-1)continue;if(f!==-1){u=l;break}else{let p=l.value;if(p.parentNode&&p.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){let h=p.parentNode.host;if(this.mirror.getId(h)!==-1){u=l;break}}}}}}if(!u){for(;n.head;)n.removeNode(n.head.value);break}s=u.previous,n.removeNode(u.value),o(u.value)}let c={texts:this.texts.map(u=>({id:this.mirror.getId(u.node),value:u.value})).filter(u=>!r.has(u.id)).filter(u=>this.mirror.has(u.id)),attributes:this.attributes.map(u=>{let{attributes:a}=u;if(typeof a.style=="string"){let l=JSON.stringify(u.styleDiff),f=JSON.stringify(u._unchangedStyles);l.length<a.style.length&&(l+f).split("var(").length===a.style.split("var(").length&&(a.style=u.styleDiff)}return{id:this.mirror.getId(u.node),attributes:a}}).filter(u=>!r.has(u.id)).filter(u=>this.mirror.has(u.id)),removes:this.removes,adds:e};!c.texts.length&&!c.attributes.length&&!c.removes.length&&!c.adds.length||(this.texts=[],this.attributes=[],this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(c))},this.processMutation=e=>{if(!Er(e.target,this.mirror))switch(e.type){case"characterData":{let r=e.target.textContent;!se(e.target,this.blockClass,this.blockSelector,!1)&&r!==e.oldValue&&this.texts.push({value:Po(e.target,this.maskTextClass,this.maskTextSelector)&&r?this.maskTextFn?this.maskTextFn(r,_n(e.target)):r.replace(/[\S]/g,"*"):r,node:e.target});break}case"attributes":{let r=e.target,n=e.attributeName,i=e.target.getAttribute(n);if(n==="value"){let s=yr(r);i=vr({element:r,maskInputOptions:this.maskInputOptions,tagName:r.tagName,type:s,value:i,maskInputFn:this.maskInputFn})}if(se(e.target,this.blockClass,this.blockSelector,!1)||i===e.oldValue)return;let o=this.attributes.find(s=>s.node===e.target);if(r.tagName==="IFRAME"&&n==="src"&&!this.keepIframeSrcFn(i))if(!r.contentDocument)n="rr_src";else return;if(o||(o={node:e.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(o)),n==="type"&&r.tagName==="INPUT"&&(e.oldValue||"").toLowerCase()==="password"&&r.setAttribute("data-rr-is-password","true"),!Do(r.tagName,n)&&(o.attributes[n]=Mo(this.doc,it(r.tagName),it(n),i),n==="style")){let s;try{s=document.implementation.createHTMLDocument()}catch{s=this.doc}let c=s.createElement("span");e.oldValue&&c.setAttribute("style",e.oldValue);for(let u of Array.from(r.style)){let a=r.style.getPropertyValue(u),l=r.style.getPropertyPriority(u);a!==c.style.getPropertyValue(u)||l!==c.style.getPropertyPriority(u)?l===""?o.styleDiff[u]=a:o.styleDiff[u]=[a,l]:o._unchangedStyles[u]=[a,l]}for(let u of Array.from(c.style))r.style.getPropertyValue(u)===""&&(o.styleDiff[u]=!1)}break}case"childList":{if(se(e.target,this.blockClass,this.blockSelector,!0))return;e.addedNodes.forEach(r=>this.genAdds(r,e.target)),e.removedNodes.forEach(r=>{let n=this.mirror.getId(r),i=kt(e.target)?this.mirror.getId(e.target.host):this.mirror.getId(e.target);se(e.target,this.blockClass,this.blockSelector,!1)||Er(r,this.mirror)||!Lo(r,this.mirror)||(this.addedSet.has(r)?(jo(this.addedSet,r),this.droppedSet.add(r)):this.addedSet.has(e.target)&&n===-1||Sn(e.target,this.mirror)||(this.movedSet.has(r)&&this.movedMap[jc(n,i)]?jo(this.movedSet,r):this.removes.push({parentId:i,id:n,isShadow:kt(e.target)&&Dt(e.target)?!0:void 0})),this.mapRemoves.push(r))});break}}},this.genAdds=(e,r)=>{if(!this.processedNodeManager.inOtherBuffer(e,this)&&!(this.addedSet.has(e)||this.movedSet.has(e))){if(this.mirror.hasNode(e)){if(Er(e,this.mirror))return;this.movedSet.add(e);let n=null;r&&this.mirror.hasNode(r)&&(n=this.mirror.getId(r)),n&&n!==-1&&(this.movedMap[jc(this.mirror.getId(e),n)]=!0)}else this.addedSet.add(e),this.droppedSet.delete(e);se(e,this.blockClass,this.blockSelector,!1)||(e.childNodes.forEach(n=>this.genAdds(n)),Kt(e)&&e.shadowRoot.childNodes.forEach(n=>{this.processedNodeManager.add(n,this),this.genAdds(n,e)}))}}}init(e){["mutationCb","blockClass","blockSelector","maskTextClass","maskTextSelector","inlineStylesheet","maskInputOptions","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach(r=>{this[r]=e[r]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}});function Mr(t){try{if("composedPath"in t){let e=t.composedPath();if(e.length)return e[0]}else if("path"in t&&t.path.length)return t.path[0]}catch{}return t&&t.target}function Bo(t,e){var r,n;let i=new In;bt.push(i),i.init(t);let o=window.MutationObserver||window.__rrMutationObserver,s=(n=(r=window?.Zone)===null||r===void 0?void 0:r.__symbol__)===null||n===void 0?void 0:n.call(r,"MutationObserver");s&&window[s]&&(o=window[s]);let c=new o(A(i.processMutations.bind(i)));return c.observe(e,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),c}function Ip({mousemoveCb:t,sampling:e,doc:r,mirror:n}){if(e.mousemove===!1)return()=>{};let i=typeof e.mousemove=="number"?e.mousemove:50,o=typeof e.mousemoveCallback=="number"?e.mousemoveCallback:500,s=[],c,u=Nt(A(f=>{let d=Date.now()-c;t(s.map(p=>(p.timeOffset-=d,p)),f),s=[],c=null}),o),a=A(Nt(A(f=>{let d=Mr(f),{clientX:p,clientY:h}=Ir(f)?f.changedTouches[0]:f;c||(c=At()),s.push({x:p,y:h,id:n.getId(d),timeOffset:At()-c}),u(typeof DragEvent<"u"&&f instanceof DragEvent?U.Drag:f instanceof MouseEvent?U.MouseMove:U.TouchMove)}),i,{trailing:!1})),l=[ye("mousemove",a,r),ye("touchmove",a,r),ye("drag",a,r)];return A(()=>{l.forEach(f=>f())})}function xp({mouseInteractionCb:t,doc:e,mirror:r,blockClass:n,blockSelector:i,sampling:o}){if(o.mouseInteraction===!1)return()=>{};let s=o.mouseInteraction===!0||o.mouseInteraction===void 0?{}:o.mouseInteraction,c=[],u=null,a=l=>f=>{let d=Mr(f);if(se(d,n,i,!0))return;let p=null,h=l;if("pointerType"in f){switch(f.pointerType){case"mouse":p=Ye.Mouse;break;case"touch":p=Ye.Touch;break;case"pen":p=Ye.Pen;break}p===Ye.Touch?Ce[l]===Ce.MouseDown?h="TouchStart":Ce[l]===Ce.MouseUp&&(h="TouchEnd"):Ye.Pen}else Ir(f)&&(p=Ye.Touch);p!==null?(u=p,(h.startsWith("Touch")&&p===Ye.Touch||h.startsWith("Mouse")&&p===Ye.Mouse)&&(p=null)):Ce[l]===Ce.Click&&(p=u,u=null);let m=Ir(f)?f.changedTouches[0]:f;if(!m)return;let g=r.getId(d),{clientX:_,clientY:v}=m;A(t)(Object.assign({type:Ce[h],id:g,x:_,y:v},p!==null&&{pointerType:p}))};return Object.keys(Ce).filter(l=>Number.isNaN(Number(l))&&!l.endsWith("_Departed")&&s[l]!==!1).forEach(l=>{let f=it(l),d=a(l);if(window.PointerEvent)switch(Ce[l]){case Ce.MouseDown:case Ce.MouseUp:f=f.replace("mouse","pointer");break;case Ce.TouchStart:case Ce.TouchEnd:return}c.push(ye(f,d,e))}),A(()=>{c.forEach(l=>l())})}function Wo({scrollCb:t,doc:e,mirror:r,blockClass:n,blockSelector:i,sampling:o}){let s=A(Nt(A(c=>{let u=Mr(c);if(!u||se(u,n,i,!0))return;let a=r.getId(u);if(u===e&&e.defaultView){let l=_r(e.defaultView);t({id:a,x:l.left,y:l.top})}else t({id:a,x:u.scrollLeft,y:u.scrollTop})}),o.scroll||100));return ye("scroll",s,e)}function Tp({viewportResizeCb:t},{win:e}){let r=-1,n=-1,i=A(Nt(A(()=>{let o=Sr(),s=wr();(r!==o||n!==s)&&(t({width:Number(s),height:Number(o)}),r=o,n=s)}),200));return ye("resize",i,e)}function Hc(t,e){let r=Object.assign({},t);return e||delete r.userTriggered,r}function Rp({inputCb:t,doc:e,mirror:r,blockClass:n,blockSelector:i,ignoreClass:o,ignoreSelector:s,maskInputOptions:c,maskInputFn:u,sampling:a,userTriggeredOnInput:l}){function f(v){let y=Mr(v),w=v.isTrusted,E=y&&y.tagName;if(y&&E==="OPTION"&&(y=y.parentElement),!y||!E||Cp.indexOf(E)<0||se(y,n,i,!0)||y.classList.contains(o)||s&&y.matches(s))return;let I=y.value,C=!1,S=yr(y)||"";S==="radio"||S==="checkbox"?C=y.checked:(c[E.toLowerCase()]||c[S])&&(I=vr({element:y,maskInputOptions:c,tagName:E,type:S,value:I,maskInputFn:u})),d(y,A(Hc)({text:I,isChecked:C,userTriggered:w},l));let O=y.name;S==="radio"&&O&&C&&e.querySelectorAll(`input[type="radio"][name="${O}"]`).forEach(M=>{M!==y&&d(M,A(Hc)({text:M.value,isChecked:!C,userTriggered:!1},l))})}function d(v,y){let w=$c.get(v);if(!w||w.text!==y.text||w.isChecked!==y.isChecked){$c.set(v,y);let E=r.getId(v);A(t)(Object.assign(Object.assign({},y),{id:E}))}}let h=(a.input==="last"?["change"]:["input","change"]).map(v=>ye(v,A(f),e)),m=e.defaultView;if(!m)return()=>{h.forEach(v=>v())};let g=m.Object.getOwnPropertyDescriptor(m.HTMLInputElement.prototype,"value"),_=[[m.HTMLInputElement.prototype,"value"],[m.HTMLInputElement.prototype,"checked"],[m.HTMLSelectElement.prototype,"value"],[m.HTMLTextAreaElement.prototype,"value"],[m.HTMLSelectElement.prototype,"selectedIndex"],[m.HTMLOptionElement.prototype,"selected"]];return g&&g.set&&h.push(..._.map(v=>vt(v[0],v[1],{set(){A(f)({target:this,isTrusted:!1})}},!1,m))),A(()=>{h.forEach(v=>v())})}function Cn(t){let e=[];function r(n,i){if(xn("CSSGroupingRule")&&n.parentRule instanceof CSSGroupingRule||xn("CSSMediaRule")&&n.parentRule instanceof CSSMediaRule||xn("CSSSupportsRule")&&n.parentRule instanceof CSSSupportsRule||xn("CSSConditionRule")&&n.parentRule instanceof CSSConditionRule){let s=Array.from(n.parentRule.cssRules).indexOf(n);i.unshift(s)}else if(n.parentStyleSheet){let s=Array.from(n.parentStyleSheet.cssRules).indexOf(n);i.unshift(s)}return i}return r(t,e)}function yt(t,e,r){let n,i;return t?(t.ownerNode?n=e.getId(t.ownerNode):i=r.getId(t),{styleId:i,id:n}):{}}function Op({styleSheetRuleCb:t,mirror:e,stylesheetManager:r},{win:n}){if(!n.CSSStyleSheet||!n.CSSStyleSheet.prototype)return()=>{};let i=n.CSSStyleSheet.prototype.insertRule;n.CSSStyleSheet.prototype.insertRule=new Proxy(i,{apply:A((l,f,d)=>{let[p,h]=d,{id:m,styleId:g}=yt(f,e,r.styleMirror);return(m&&m!==-1||g&&g!==-1)&&t({id:m,styleId:g,adds:[{rule:p,index:h}]}),Ao(()=>l.apply(f,d))()})});let o=n.CSSStyleSheet.prototype.deleteRule;n.CSSStyleSheet.prototype.deleteRule=new Proxy(o,{apply:A((l,f,d)=>{let[p]=d,{id:h,styleId:m}=yt(f,e,r.styleMirror);return(h&&h!==-1||m&&m!==-1)&&t({id:h,styleId:m,removes:[{index:p}]}),Ao(()=>l.apply(f,d))()})});let s;n.CSSStyleSheet.prototype.replace&&(s=n.CSSStyleSheet.prototype.replace,n.CSSStyleSheet.prototype.replace=new Proxy(s,{apply:A((l,f,d)=>{let[p]=d,{id:h,styleId:m}=yt(f,e,r.styleMirror);return(h&&h!==-1||m&&m!==-1)&&t({id:h,styleId:m,replace:p}),l.apply(f,d)})}));let c;n.CSSStyleSheet.prototype.replaceSync&&(c=n.CSSStyleSheet.prototype.replaceSync,n.CSSStyleSheet.prototype.replaceSync=new Proxy(c,{apply:A((l,f,d)=>{let[p]=d,{id:h,styleId:m}=yt(f,e,r.styleMirror);return(h&&h!==-1||m&&m!==-1)&&t({id:h,styleId:m,replaceSync:p}),l.apply(f,d)})}));let u={};Tn("CSSGroupingRule")?u.CSSGroupingRule=n.CSSGroupingRule:(Tn("CSSMediaRule")&&(u.CSSMediaRule=n.CSSMediaRule),Tn("CSSConditionRule")&&(u.CSSConditionRule=n.CSSConditionRule),Tn("CSSSupportsRule")&&(u.CSSSupportsRule=n.CSSSupportsRule));let a={};return Object.entries(u).forEach(([l,f])=>{a[l]={insertRule:f.prototype.insertRule,deleteRule:f.prototype.deleteRule},f.prototype.insertRule=new Proxy(a[l].insertRule,{apply:A((d,p,h)=>{let[m,g]=h,{id:_,styleId:v}=yt(p.parentStyleSheet,e,r.styleMirror);return(_&&_!==-1||v&&v!==-1)&&t({id:_,styleId:v,adds:[{rule:m,index:[...Cn(p),g||0]}]}),d.apply(p,h)})}),f.prototype.deleteRule=new Proxy(a[l].deleteRule,{apply:A((d,p,h)=>{let[m]=h,{id:g,styleId:_}=yt(p.parentStyleSheet,e,r.styleMirror);return(g&&g!==-1||_&&_!==-1)&&t({id:g,styleId:_,removes:[{index:[...Cn(p),m]}]}),d.apply(p,h)})})}),A(()=>{n.CSSStyleSheet.prototype.insertRule=i,n.CSSStyleSheet.prototype.deleteRule=o,s&&(n.CSSStyleSheet.prototype.replace=s),c&&(n.CSSStyleSheet.prototype.replaceSync=c),Object.entries(u).forEach(([l,f])=>{f.prototype.insertRule=a[l].insertRule,f.prototype.deleteRule=a[l].deleteRule})})}function Vo({mirror:t,stylesheetManager:e},r){var n,i,o;let s=null;r.nodeName==="#document"?s=t.getId(r):s=t.getId(r.host);let c=r.nodeName==="#document"?(n=r.defaultView)===null||n===void 0?void 0:n.Document:(o=(i=r.ownerDocument)===null||i===void 0?void 0:i.defaultView)===null||o===void 0?void 0:o.ShadowRoot,u=c?.prototype?Object.getOwnPropertyDescriptor(c?.prototype,"adoptedStyleSheets"):void 0;return s===null||s===-1||!c||!u?()=>{}:(Object.defineProperty(r,"adoptedStyleSheets",{configurable:u.configurable,enumerable:u.enumerable,get(){var a;return(a=u.get)===null||a===void 0?void 0:a.call(this)},set(a){var l;let f=(l=u.set)===null||l===void 0?void 0:l.call(this,a);if(s!==null&&s!==-1)try{e.adoptStyleSheets(a,s)}catch{}return f}}),A(()=>{Object.defineProperty(r,"adoptedStyleSheets",{configurable:u.configurable,enumerable:u.enumerable,get:u.get,set:u.set})}))}function Mp({styleDeclarationCb:t,mirror:e,ignoreCSSAttributes:r,stylesheetManager:n},{win:i}){let o=i.CSSStyleDeclaration.prototype.setProperty;i.CSSStyleDeclaration.prototype.setProperty=new Proxy(o,{apply:A((c,u,a)=>{var l;let[f,d,p]=a;if(r.has(f))return o.apply(u,[f,d,p]);let{id:h,styleId:m}=yt((l=u.parentRule)===null||l===void 0?void 0:l.parentStyleSheet,e,n.styleMirror);return(h&&h!==-1||m&&m!==-1)&&t({id:h,styleId:m,set:{property:f,value:d,priority:p},index:Cn(u.parentRule)}),c.apply(u,a)})});let s=i.CSSStyleDeclaration.prototype.removeProperty;return i.CSSStyleDeclaration.prototype.removeProperty=new Proxy(s,{apply:A((c,u,a)=>{var l;let[f]=a;if(r.has(f))return s.apply(u,[f]);let{id:d,styleId:p}=yt((l=u.parentRule)===null||l===void 0?void 0:l.parentStyleSheet,e,n.styleMirror);return(d&&d!==-1||p&&p!==-1)&&t({id:d,styleId:p,remove:{property:f},index:Cn(u.parentRule)}),c.apply(u,a)})}),A(()=>{i.CSSStyleDeclaration.prototype.setProperty=o,i.CSSStyleDeclaration.prototype.removeProperty=s})}function Dp({mediaInteractionCb:t,blockClass:e,blockSelector:r,mirror:n,sampling:i,doc:o}){let s=A(u=>Nt(A(a=>{let l=Mr(a);if(!l||se(l,e,r,!0))return;let{currentTime:f,volume:d,muted:p,playbackRate:h}=l;t({type:u,id:n.getId(l),currentTime:f,volume:d,muted:p,playbackRate:h})}),i.media||500)),c=[ye("play",s(0),o),ye("pause",s(1),o),ye("seeked",s(2),o),ye("volumechange",s(3),o),ye("ratechange",s(4),o)];return A(()=>{c.forEach(u=>u())})}function Pp({fontCb:t,doc:e}){let r=e.defaultView;if(!r)return()=>{};let n=[],i=new WeakMap,o=r.FontFace;r.FontFace=function(u,a,l){let f=new o(u,a,l);return i.set(f,{family:u,buffer:typeof a!="string",descriptors:l,fontSource:typeof a=="string"?a:JSON.stringify(Array.from(new Uint8Array(a)))}),f};let s=Ge(e.fonts,"add",function(c){return function(u){return setTimeout(A(()=>{let a=i.get(u);a&&(t(a),i.delete(u))}),0),c.apply(this,[u])}});return n.push(()=>{r.FontFace=o}),n.push(s),A(()=>{n.forEach(c=>c())})}function kp(t){let{doc:e,mirror:r,blockClass:n,blockSelector:i,selectionCb:o}=t,s=!0,c=A(()=>{let u=e.getSelection();if(!u||s&&u?.isCollapsed)return;s=u.isCollapsed||!1;let a=[],l=u.rangeCount||0;for(let f=0;f<l;f++){let d=u.getRangeAt(f),{startContainer:p,startOffset:h,endContainer:m,endOffset:g}=d;se(p,n,i,!0)||se(m,n,i,!0)||a.push({start:r.getId(p),startOffset:h,end:r.getId(m),endOffset:g})}o({ranges:a})});return c(),ye("selectionchange",c)}function Lp(t,e){let{mutationCb:r,mousemoveCb:n,mouseInteractionCb:i,scrollCb:o,viewportResizeCb:s,inputCb:c,mediaInteractionCb:u,styleSheetRuleCb:a,styleDeclarationCb:l,canvasMutationCb:f,fontCb:d,selectionCb:p}=t;t.mutationCb=(...h)=>{e.mutation&&e.mutation(...h),r(...h)},t.mousemoveCb=(...h)=>{e.mousemove&&e.mousemove(...h),n(...h)},t.mouseInteractionCb=(...h)=>{e.mouseInteraction&&e.mouseInteraction(...h),i(...h)},t.scrollCb=(...h)=>{e.scroll&&e.scroll(...h),o(...h)},t.viewportResizeCb=(...h)=>{e.viewportResize&&e.viewportResize(...h),s(...h)},t.inputCb=(...h)=>{e.input&&e.input(...h),c(...h)},t.mediaInteractionCb=(...h)=>{e.mediaInteaction&&e.mediaInteaction(...h),u(...h)},t.styleSheetRuleCb=(...h)=>{e.styleSheetRule&&e.styleSheetRule(...h),a(...h)},t.styleDeclarationCb=(...h)=>{e.styleDeclaration&&e.styleDeclaration(...h),l(...h)},t.canvasMutationCb=(...h)=>{e.canvasMutation&&e.canvasMutation(...h),f(...h)},t.fontCb=(...h)=>{e.font&&e.font(...h),d(...h)},t.selectionCb=(...h)=>{e.selection&&e.selection(...h),p(...h)}}function zc(t,e={}){let r=t.doc.defaultView;if(!r)return()=>{};Lp(t,e);let n;t.recordDOM&&(n=Bo(t,t.doc));let i=Ip(t),o=xp(t),s=Wo(t),c=Tp(t,{win:r}),u=Rp(t),a=Dp(t),l=()=>{},f=()=>{},d=()=>{},p=()=>{};t.recordDOM&&(l=Op(t,{win:r}),f=Vo(t,t.doc),d=Mp(t,{win:r}),t.collectFonts&&(p=Pp(t)));let h=kp(t),m=[];for(let g of t.plugins)m.push(g.observer(g.callback,r,g.options));return A(()=>{bt.forEach(g=>g.reset()),n?.disconnect(),i(),o(),s(),c(),u(),a(),l(),f(),d(),p(),h(),m.forEach(g=>g())})}function xn(t){return typeof window[t]<"u"}function Tn(t){return!!(typeof window[t]<"u"&&window[t].prototype&&"insertRule"in window[t].prototype&&"deleteRule"in window[t].prototype)}var bt,Cp,$c,Go=b(()=>{"use strict";gt();Lt();qe();Uo();qc();bt=[];Cp=["INPUT","TEXTAREA","SELECT"],$c=new WeakMap});function Kc(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function Xc(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function c(l){try{a(n.next(l))}catch(f){s(f)}}function u(l){try{a(n.throw(l))}catch(f){s(f)}}function a(l){l.done?o(l.value):i(l.value).then(c,u)}a((n=n.apply(t,e||[])).next())})}var Yc=b(()=>{"use strict";});function Qc(t,e){var r=e===void 0?null:e,n=t.toString(),i=n.split(`
`);i.pop(),i.shift();for(var o=i[0].search(/\S/),s=/(['"])__worker_loader_strict__(['"])/g,c=0,u=i.length;c<u;++c)i[c]=i[c].substring(o).replace(s,"$1use strict$2")+`
`;return r&&i.push("//# sourceMappingURL="+r+`
`),i}var Zc=b(()=>{"use strict"});function Np(t,e){var r=Qc(t,e),n=new Blob(r,{type:"application/javascript"});return URL.createObjectURL(n)}function Jc(t,e){var r;return function(i){return r=r||Np(t,e),new Worker(r,i)}}var el=b(()=>{"use strict";Zc()});var tl,rl=b(()=>{"use strict";el();tl=Jc(function(){(function(){"__worker_loader_strict__";function t(a,l,f,d){function p(h){return h instanceof f?h:new f(function(m){m(h)})}return new(f||(f=Promise))(function(h,m){function g(y){try{v(d.next(y))}catch(w){m(w)}}function _(y){try{v(d.throw(y))}catch(w){m(w)}}function v(y){y.done?h(y.value):p(y.value).then(g,_)}v((d=d.apply(a,l||[])).next())})}for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=typeof Uint8Array>"u"?[]:new Uint8Array(256),n=0;n<e.length;n++)r[e.charCodeAt(n)]=n;var i=function(a){var l=new Uint8Array(a),f,d=l.length,p="";for(f=0;f<d;f+=3)p+=e[l[f]>>2],p+=e[(l[f]&3)<<4|l[f+1]>>4],p+=e[(l[f+1]&15)<<2|l[f+2]>>6],p+=e[l[f+2]&63];return d%3===2?p=p.substring(0,p.length-1)+"=":d%3===1&&(p=p.substring(0,p.length-2)+"=="),p};let o=new Map,s=new Map;function c(a,l,f){return t(this,void 0,void 0,function*(){let d=`${a}-${l}`;if("OffscreenCanvas"in globalThis){if(s.has(d))return s.get(d);let p=new OffscreenCanvas(a,l);p.getContext("2d");let m=yield(yield p.convertToBlob(f)).arrayBuffer(),g=i(m);return s.set(d,g),g}else return""})}let u=self;u.onmessage=function(a){return t(this,void 0,void 0,function*(){if("OffscreenCanvas"in globalThis){let{id:l,bitmap:f,width:d,height:p,dataURLOptions:h}=a.data,m=c(d,p,h),g=new OffscreenCanvas(d,p);g.getContext("2d").drawImage(f,0,0),f.close();let v=yield g.convertToBlob(h),y=v.type,w=yield v.arrayBuffer(),E=i(w);if(!o.has(l)&&(yield m)===E)return o.set(l,E),u.postMessage({id:l});if(o.get(l)===E)return u.postMessage({id:l});u.postMessage({id:l,type:y,base64:E,width:d,height:p}),o.set(l,E)}else return u.postMessage({id:a.data.id})})}})()},null)});var Xt,Ap,Dr,nl,il=b(()=>{"use strict";Xt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ap=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(Dr=0;Dr<Xt.length;Dr++)Ap[Xt.charCodeAt(Dr)]=Dr;nl=function(t){var e=new Uint8Array(t),r,n=e.length,i="";for(r=0;r<n;r+=3)i+=Xt[e[r]>>2],i+=Xt[(e[r]&3)<<4|e[r+1]>>4],i+=Xt[(e[r+1]&15)<<2|e[r+2]>>6],i+=Xt[e[r+2]&63];return n%3===2?i=i.substring(0,i.length-1)+"=":n%3===1&&(i=i.substring(0,i.length-2)+"=="),i}});function Up(t,e){let r=ol.get(t);return r||(r=new Map,ol.set(t,r)),r.has(e)||r.set(e,[]),r.get(e)}function Rn(t,e,r){if(t instanceof Array)return t.map(n=>Rn(n,e,r));if(t===null)return t;if(t instanceof Float32Array||t instanceof Float64Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Uint8Array||t instanceof Uint16Array||t instanceof Int16Array||t instanceof Int8Array||t instanceof Uint8ClampedArray)return{rr_type:t.constructor.name,args:[Object.values(t)]};if(t instanceof ArrayBuffer){let n=t.constructor.name,i=nl(t);return{rr_type:n,base64:i}}else{if(t instanceof DataView)return{rr_type:t.constructor.name,args:[Rn(t.buffer,e,r),t.byteOffset,t.byteLength]};if(t instanceof HTMLImageElement){let n=t.constructor.name,{src:i}=t;return{rr_type:n,src:i}}else if(t instanceof HTMLCanvasElement){let n="HTMLImageElement",i=t.toDataURL();return{rr_type:n,src:i}}else{if(t instanceof ImageData)return{rr_type:t.constructor.name,args:[Rn(t.data,e,r),t.width,t.height]};if(sl(t,e)||typeof t=="object"){let n=t.constructor.name,i=qo(t,e,r);return{rr_type:n,index:i}}}}return t}var ol,qo,On,sl,Ho=b(()=>{"use strict";il();ol=new Map;qo=(t,e,r)=>{if(!t||!(sl(t,e)||typeof t=="object"))return;let n=t.constructor.name,i=Up(r,n),o=i.indexOf(t);return o===-1&&(o=i.length,i.push(t)),o};On=(t,e,r)=>[...t].map(n=>Rn(n,e,r)),sl=(t,e)=>!!["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter(i=>typeof e[i]=="function").find(i=>t instanceof e[i])});function al(t,e,r,n){let i=[],o=Object.getOwnPropertyNames(e.CanvasRenderingContext2D.prototype);for(let s of o)try{if(typeof e.CanvasRenderingContext2D.prototype[s]!="function")continue;let c=Ge(e.CanvasRenderingContext2D.prototype,s,function(u){return function(...a){return se(this.canvas,r,n,!0)||setTimeout(()=>{let l=On([...a],e,this);t(this.canvas,{type:ot["2D"],property:s,args:l})},0),u.apply(this,a)}});i.push(c)}catch{let u=vt(e.CanvasRenderingContext2D.prototype,s,{set(a){t(this.canvas,{type:ot["2D"],property:s,args:[a],setter:!0})}});i.push(u)}return()=>{i.forEach(s=>s())}}var ul=b(()=>{"use strict";Lt();qe();Ho()});function Fp(t){return t==="experimental-webgl"?"webgl":t}function $o(t,e,r,n){let i=[];try{let o=Ge(t.HTMLCanvasElement.prototype,"getContext",function(s){return function(c,...u){if(!se(this,e,r,!0)){let a=Fp(c);if("__context"in this||(this.__context=a),n&&["webgl","webgl2"].includes(a))if(u[0]&&typeof u[0]=="object"){let l=u[0];l.preserveDrawingBuffer||(l.preserveDrawingBuffer=!0)}else u.splice(0,1,{preserveDrawingBuffer:!0})}return s.apply(this,[c,...u])}});i.push(o)}catch{console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{i.forEach(o=>o())}}var cl=b(()=>{"use strict";qe()});function ll(t,e,r,n,i,o,s){let c=[],u=Object.getOwnPropertyNames(t);for(let a of u)if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(a))try{if(typeof t[a]!="function")continue;let l=Ge(t,a,function(f){return function(...d){let p=f.apply(this,d);if(qo(p,s,this),"tagName"in this.canvas&&!se(this.canvas,n,i,!0)){let h=On([...d],s,this),m={type:e,property:a,args:h};r(this.canvas,m)}return p}});c.push(l)}catch{let f=vt(t,a,{set(d){r(this.canvas,{type:e,property:a,args:[d],setter:!0})}});c.push(f)}return c}function fl(t,e,r,n,i){let o=[];return o.push(...ll(e.WebGLRenderingContext.prototype,ot.WebGL,t,r,n,i,e)),typeof e.WebGL2RenderingContext<"u"&&o.push(...ll(e.WebGL2RenderingContext.prototype,ot.WebGL2,t,r,n,i,e)),()=>{o.forEach(s=>s())}}var dl=b(()=>{"use strict";Lt();qe();Ho()});var Mn,pl=b(()=>{"use strict";Yc();Lt();rl();qe();ul();cl();dl();Mn=class{reset(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}constructor(e){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.frozen=!1,this.locked=!1,this.processMutation=(u,a)=>{(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId||!this.rafStamps.invokeId)&&(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(u)||this.pendingCanvasMutations.set(u,[]),this.pendingCanvasMutations.get(u).push(a)};let{sampling:r="all",win:n,blockClass:i,blockSelector:o,recordCanvas:s,dataURLOptions:c}=e;this.mutationCb=e.mutationCb,this.mirror=e.mirror,s&&r==="all"&&this.initCanvasMutationObserver(n,i,o),s&&typeof r=="number"&&this.initCanvasFPSObserver(r,n,i,o,{dataURLOptions:c})}initCanvasFPSObserver(e,r,n,i,o){let s=$o(r,n,i,!0),c=new Map,u=new tl;u.onmessage=h=>{let{id:m}=h.data;if(c.set(m,!1),!("base64"in h.data))return;let{base64:g,type:_,width:v,height:y}=h.data;this.mutationCb({id:m,type:ot["2D"],commands:[{property:"clearRect",args:[0,0,v,y]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:g}],type:_}]},0,0]}]})};let a=1e3/e,l=0,f,d=()=>{let h=[];return r.document.querySelectorAll("canvas").forEach(m=>{se(m,n,i,!0)||h.push(m)}),h},p=h=>{if(l&&h-l<a){f=requestAnimationFrame(p);return}l=h,d().forEach(m=>Xc(this,void 0,void 0,function*(){var g;let _=this.mirror.getId(m);if(c.get(_))return;if(c.set(_,!0),["webgl","webgl2"].includes(m.__context)){let y=m.getContext(m.__context);((g=y?.getContextAttributes())===null||g===void 0?void 0:g.preserveDrawingBuffer)===!1&&y.clear(y.COLOR_BUFFER_BIT)}let v=yield createImageBitmap(m);u.postMessage({id:_,bitmap:v,width:m.width,height:m.height,dataURLOptions:o.dataURLOptions},[v])})),f=requestAnimationFrame(p)};f=requestAnimationFrame(p),this.resetObservers=()=>{s(),cancelAnimationFrame(f)}}initCanvasMutationObserver(e,r,n){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();let i=$o(e,r,n,!1),o=al(this.processMutation.bind(this),e,r,n),s=fl(this.processMutation.bind(this),e,r,n,this.mirror);this.resetObservers=()=>{i(),o(),s()}}startPendingCanvasMutationFlusher(){requestAnimationFrame(()=>this.flushPendingCanvasMutations())}startRAFTimestamping(){let e=r=>{this.rafStamps.latestId=r,requestAnimationFrame(e)};requestAnimationFrame(e)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach((e,r)=>{let n=this.mirror.getId(r);this.flushPendingCanvasMutationFor(r,n)}),requestAnimationFrame(()=>this.flushPendingCanvasMutations())}flushPendingCanvasMutationFor(e,r){if(this.frozen||this.locked)return;let n=this.pendingCanvasMutations.get(e);if(!n||r===-1)return;let i=n.map(s=>Kc(s,["type"])),{type:o}=n[0];this.mutationCb({id:r,type:o,commands:i}),this.pendingCanvasMutations.delete(e)}}});var Dn,hl=b(()=>{"use strict";Dn=class{constructor(){this.nodeMap=new WeakMap,this.loop=!0,this.periodicallyClear()}periodicallyClear(){requestAnimationFrame(()=>{this.clear(),this.loop&&this.periodicallyClear()})}inOtherBuffer(e,r){let n=this.nodeMap.get(e);return n&&Array.from(n).some(i=>i!==r)}add(e,r){this.nodeMap.set(e,(this.nodeMap.get(e)||new Set).add(r))}clear(){this.nodeMap=new WeakMap}destroy(){this.loop=!1}}});var Pn,ml=b(()=>{"use strict";gt();qe();Go();Pn=class{constructor(e){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=e.mutationCb,this.scrollCb=e.scrollCb,this.bypassOptions=e.bypassOptions,this.mirror=e.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(e,r){if(!Dt(e)||this.shadowDoms.has(e))return;this.shadowDoms.add(e);let n=Bo(Object.assign(Object.assign({},this.bypassOptions),{doc:r,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this}),e);this.restoreHandlers.push(()=>n.disconnect()),this.restoreHandlers.push(Wo(Object.assign(Object.assign({},this.bypassOptions),{scrollCb:this.scrollCb,doc:e,mirror:this.mirror}))),setTimeout(()=>{e.adoptedStyleSheets&&e.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(e.adoptedStyleSheets,this.mirror.getId(e.host)),this.restoreHandlers.push(Vo({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},e))},0)}observeAttachShadow(e){!e.contentWindow||!e.contentDocument||this.patchAttachShadow(e.contentWindow.Element,e.contentDocument)}patchAttachShadow(e,r){let n=this;this.restoreHandlers.push(Ge(e.prototype,"attachShadow",function(i){return function(o){let s=i.call(this,o);return this.shadowRoot&&Cr(this)&&n.addShadowRoot(this.shadowRoot,r),s}}))}reset(){this.restoreHandlers.forEach(e=>{try{e()}catch{}}),this.restoreHandlers=[],this.shadowDoms=new WeakSet}}});var kn,gl=b(()=>{"use strict";gt();qe();kn=class{constructor(e){this.trackedLinkElements=new WeakSet,this.styleMirror=new br,this.mutationCb=e.mutationCb,this.adoptedStyleSheetCb=e.adoptedStyleSheetCb}attachLinkElement(e,r){"_cssText"in r.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:r.id,attributes:r.attributes}]}),this.trackLinkElement(e)}trackLinkElement(e){this.trackedLinkElements.has(e)||(this.trackedLinkElements.add(e),this.trackStylesheetInLinkElement(e))}adoptStyleSheets(e,r){if(e.length===0)return;let n={id:r,styleIds:[]},i=[];for(let o of e){let s;this.styleMirror.has(o)?s=this.styleMirror.getId(o):(s=this.styleMirror.add(o),i.push({styleId:s,rules:Array.from(o.rules||CSSRule,(c,u)=>({rule:Co(c),index:u}))})),n.styleIds.push(s)}i.length>0&&(n.styles=i),this.adoptedStyleSheetCb(n)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(e){}}});function he(t){return Object.assign(Object.assign({},t),{timestamp:At()})}function Qe(t={}){let{emit:e,checkoutEveryNms:r,checkoutEveryNth:n,blockClass:i="rr-block",blockSelector:o=null,ignoreClass:s="rr-ignore",ignoreSelector:c=null,maskTextClass:u="rr-mask",maskTextSelector:a=null,inlineStylesheet:l=!0,maskAllInputs:f,maskInputOptions:d,slimDOMOptions:p,maskInputFn:h,maskTextFn:m,hooks:g,packFn:_,sampling:v={},dataURLOptions:y={},mousemoveWait:w,recordDOM:E=!0,recordCanvas:I=!1,recordCrossOriginIframes:C=!1,recordAfter:S=t.recordAfter==="DOMContentLoaded"?t.recordAfter:"load",userTriggeredOnInput:O=!1,collectFonts:M=!1,inlineImages:P=!1,plugins:k,keepIframeSrcFn:N=()=>!1,ignoreCSSAttributes:j=new Set([]),errorHandler:G}=t;Lc(G);let Y=C?window.parent===window:!0,R=!1;if(!Y)try{window.parent.document&&(R=!1)}catch{R=!0}if(Y&&!e)throw new Error("emit function is required");w!==void 0&&v.mousemove===void 0&&(v.mousemove=w),He.reset();let Q=f===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:d!==void 0?d:{password:!0},le=p===!0||p==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:p==="all",headMetaDescKeywords:p==="all"}:p||{};No();let Ie,Z=0,me=L=>{for(let Oe of k||[])Oe.eventProcessor&&(L=Oe.eventProcessor(L));return _&&!R&&(L=_(L)),L};ce=(L,Oe)=>{var J;if(!((J=bt[0])===null||J===void 0)&&J.isFrozen()&&L.type!==B.FullSnapshot&&!(L.type===B.IncrementalSnapshot&&L.data.source===U.Mutation)&&bt.forEach(pe=>pe.unfreeze()),Y)e?.(me(L),Oe);else if(R){let pe={type:"rrweb",event:me(L),origin:window.location.origin,isCheckout:Oe};window.parent.postMessage(pe,"*")}if(L.type===B.FullSnapshot)Ie=L,Z=0;else if(L.type===B.IncrementalSnapshot){if(L.data.source===U.Mutation&&L.data.isAttachIframe)return;Z++;let pe=n&&Z>=n,wt=r&&L.timestamp-Ie.timestamp>r;(pe||wt)&&Ln(!0)}};let ae=L=>{ce(he({type:B.IncrementalSnapshot,data:Object.assign({source:U.Mutation},L)}))},te=L=>ce(he({type:B.IncrementalSnapshot,data:Object.assign({source:U.Scroll},L)})),H=L=>ce(he({type:B.IncrementalSnapshot,data:Object.assign({source:U.CanvasMutation},L)})),Le=L=>ce(he({type:B.IncrementalSnapshot,data:Object.assign({source:U.AdoptedStyleSheet},L)})),fe=new kn({mutationCb:ae,adoptedStyleSheetCb:Le}),K=new En({mirror:He,mutationCb:ae,stylesheetManager:fe,recordCrossOriginIframes:C,wrappedEmit:ce});for(let L of k||[])L.getMirror&&L.getMirror({nodeMirror:He,crossOriginIframeMirror:K.crossOriginIframeMirror,crossOriginIframeStyleMirror:K.crossOriginIframeStyleMirror});let Jt=new Dn;zo=new Mn({recordCanvas:I,mutationCb:H,win:window,blockClass:i,blockSelector:o,mirror:He,sampling:v.canvas,dataURLOptions:y});let St=new Pn({mutationCb:ae,scrollCb:te,bypassOptions:{blockClass:i,blockSelector:o,maskTextClass:u,maskTextSelector:a,inlineStylesheet:l,maskInputOptions:Q,dataURLOptions:y,maskTextFn:m,maskInputFn:h,recordCanvas:I,inlineImages:P,sampling:v,slimDOMOptions:le,iframeManager:K,stylesheetManager:fe,canvasManager:zo,keepIframeSrcFn:N,processedNodeManager:Jt},mirror:He});Ln=(L=!1)=>{if(!E)return;ce(he({type:B.Meta,data:{href:window.location.href,width:wr(),height:Sr()}}),L),fe.reset(),St.init(),bt.forEach(J=>J.lock());let Oe=Rc(document,{mirror:He,blockClass:i,blockSelector:o,maskTextClass:u,maskTextSelector:a,inlineStylesheet:l,maskAllInputs:Q,maskTextFn:m,maskInputFn:h,slimDOM:le,dataURLOptions:y,recordCanvas:I,inlineImages:P,onSerialize:J=>{xr(J,He)&&K.addIframe(J),Tr(J,He)&&fe.trackLinkElement(J),Kt(J)&&St.addShadowRoot(J.shadowRoot,document)},onIframeLoad:(J,pe)=>{K.attachIframe(J,pe),St.observeAttachShadow(J)},onStylesheetLoad:(J,pe)=>{fe.attachLinkElement(J,pe)},keepIframeSrcFn:N});if(!Oe)return console.warn("Failed to snapshot the document");ce(he({type:B.FullSnapshot,data:{node:Oe,initialOffset:_r(window)}}),L),bt.forEach(J=>J.unlock()),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&fe.adoptStyleSheets(document.adoptedStyleSheets,He.getId(document))};try{let L=[],Oe=pe=>{var wt;return A(zc)({mutationCb:ae,mousemoveCb:(ee,Xn)=>ce(he({type:B.IncrementalSnapshot,data:{source:Xn,positions:ee}})),mouseInteractionCb:ee=>ce(he({type:B.IncrementalSnapshot,data:Object.assign({source:U.MouseInteraction},ee)})),scrollCb:te,viewportResizeCb:ee=>ce(he({type:B.IncrementalSnapshot,data:Object.assign({source:U.ViewportResize},ee)})),inputCb:ee=>ce(he({type:B.IncrementalSnapshot,data:Object.assign({source:U.Input},ee)})),mediaInteractionCb:ee=>ce(he({type:B.IncrementalSnapshot,data:Object.assign({source:U.MediaInteraction},ee)})),styleSheetRuleCb:ee=>ce(he({type:B.IncrementalSnapshot,data:Object.assign({source:U.StyleSheetRule},ee)})),styleDeclarationCb:ee=>ce(he({type:B.IncrementalSnapshot,data:Object.assign({source:U.StyleDeclaration},ee)})),canvasMutationCb:H,fontCb:ee=>ce(he({type:B.IncrementalSnapshot,data:Object.assign({source:U.Font},ee)})),selectionCb:ee=>{ce(he({type:B.IncrementalSnapshot,data:Object.assign({source:U.Selection},ee)}))},blockClass:i,ignoreClass:s,ignoreSelector:c,maskTextClass:u,maskTextSelector:a,maskInputOptions:Q,inlineStylesheet:l,sampling:v,recordDOM:E,recordCanvas:I,inlineImages:P,userTriggeredOnInput:O,collectFonts:M,doc:pe,maskInputFn:h,maskTextFn:m,keepIframeSrcFn:N,blockSelector:o,slimDOMOptions:le,dataURLOptions:y,mirror:He,iframeManager:K,stylesheetManager:fe,shadowDomManager:St,processedNodeManager:Jt,canvasManager:zo,ignoreCSSAttributes:j,plugins:((wt=k?.filter(ee=>ee.observer))===null||wt===void 0?void 0:wt.map(ee=>({observer:ee.observer,options:ee.options,callback:Xn=>ce(he({type:B.Plugin,data:{plugin:ee.name,payload:Xn}}))})))||[]},g)};K.addLoadListener(pe=>{try{L.push(Oe(pe.contentDocument))}catch(wt){console.warn(wt)}});let J=()=>{Ln(),L.push(Oe(document)),Nn=!0};return document.readyState==="interactive"||document.readyState==="complete"?J():(L.push(ye("DOMContentLoaded",()=>{ce(he({type:B.DomContentLoaded,data:{}})),S==="DOMContentLoaded"&&J()})),L.push(ye("load",()=>{ce(he({type:B.Load,data:{}})),S==="load"&&J()},window))),()=>{L.forEach(pe=>pe()),Jt.destroy(),Nn=!1,Nc()}}catch(L){console.warn(L)}}var ce,Ln,zo,Nn,He,vl=b(()=>{"use strict";gt();Lt();qe();Uo();Uc();Go();pl();hl();ml();gl();Nn=!1,He=Cc();Qe.addCustomEvent=(t,e)=>{if(!Nn)throw new Error("please add custom event after start recording");ce(he({type:B.Custom,data:{tag:t,payload:e}}))};Qe.freezePage=()=>{bt.forEach(t=>t.freeze())};Qe.takeFullSnapshot=t=>{if(!Nn)throw new Error("please take full snapshot after start recording");Ln(t)};Qe.mirror=He});function Cl(t,e){e===void 0&&(e={});var r=Hp();r.p(t);var n=$p(t,e,2,4);return Kp(n,e),zp(n,n.length-4,r.d()),n}function Rl(t,e){var r=t.length;if(!e&&typeof TextEncoder<"u")return new TextEncoder().encode(t);for(var n=new ke(t.length+(t.length>>>1)),i=0,o=function(a){n[i++]=a},s=0;s<r;++s){if(i+5>n.length){var c=new ke(i+8+(r-s<<1));c.set(n),n=c}var u=t.charCodeAt(s);u<128||e?o(u):u<2048?(o(192|u>>>6),o(128|u&63)):u>55295&&u<57344?(u=65536+(u&1047552)|t.charCodeAt(++s)&1023,o(240|u>>>18),o(128|u>>>12&63),o(128|u>>>6&63),o(128|u&63)):(o(224|u>>>12),o(128|u>>>6&63),o(128|u&63))}return Tl(n,0,i)}function Ol(t,e){var r="";if(!e&&typeof TextDecoder<"u")return new TextDecoder().decode(t);for(var n=0;n<t.length;){var i=t[n++];i<128||e?r+=String.fromCharCode(i):i<224?r+=String.fromCharCode((i&31)<<6|t[n++]&63):i<240?r+=String.fromCharCode((i&15)<<12|(t[n++]&63)<<6|t[n++]&63):(i=((i&15)<<18|(t[n++]&63)<<12|(t[n++]&63)<<6|t[n++]&63)-65536,r+=String.fromCharCode(55296|i>>10,56320|i&1023))}return r}var ke,Re,Nr,Zo,Jo,yl,wl,El,jp,Xo,Il,F_,bl,Yo,st,V,Lr,Ft,V,V,V,V,Un,V,Bp,Wp,xl,Tl,at,Pr,Ko,Qo,_l,kr,An,Sl,Vp,Gp,qp,Hp,$p,zp,Kp,Ml=b(()=>{"use strict";ke=Uint8Array,Re=Uint16Array,Nr=Uint32Array,Zo=new ke([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Jo=new ke([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),yl=new ke([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),wl=function(t,e){for(var r=new Re(31),n=0;n<31;++n)r[n]=e+=1<<t[n-1];for(var i=new Nr(r[30]),n=1;n<30;++n)for(var o=r[n];o<r[n+1];++o)i[o]=o-r[n]<<5|n;return[r,i]},El=wl(Zo,2),jp=El[0],Xo=El[1];jp[28]=258,Xo[258]=28;Il=wl(Jo,0),F_=Il[0],bl=Il[1],Yo=new Re(32768);for(V=0;V<32768;++V)st=(V&43690)>>>1|(V&21845)<<1,st=(st&52428)>>>2|(st&13107)<<2,st=(st&61680)>>>4|(st&3855)<<4,Yo[V]=((st&65280)>>>8|(st&255)<<8)>>>1;Lr=function(t,e,r){for(var n=t.length,i=0,o=new Re(e);i<n;++i)++o[t[i]-1];var s=new Re(e);for(i=0;i<e;++i)s[i]=s[i-1]+o[i-1]<<1;var c;if(r){c=new Re(1<<e);var u=15-e;for(i=0;i<n;++i)if(t[i])for(var a=i<<4|t[i],l=e-t[i],f=s[t[i]-1]++<<l,d=f|(1<<l)-1;f<=d;++f)c[Yo[f]>>>u]=a}else for(c=new Re(n),i=0;i<n;++i)c[i]=Yo[s[t[i]-1]++]>>>15-t[i];return c},Ft=new ke(288);for(V=0;V<144;++V)Ft[V]=8;for(V=144;V<256;++V)Ft[V]=9;for(V=256;V<280;++V)Ft[V]=7;for(V=280;V<288;++V)Ft[V]=8;Un=new ke(32);for(V=0;V<32;++V)Un[V]=5;Bp=Lr(Ft,9,0),Wp=Lr(Un,5,0),xl=function(t){return(t/8>>0)+(t&7&&1)},Tl=function(t,e,r){(e==null||e<0)&&(e=0),(r==null||r>t.length)&&(r=t.length);var n=new(t instanceof Re?Re:t instanceof Nr?Nr:ke)(r-e);return n.set(t.subarray(e,r)),n},at=function(t,e,r){r<<=e&7;var n=e/8>>0;t[n]|=r,t[n+1]|=r>>>8},Pr=function(t,e,r){r<<=e&7;var n=e/8>>0;t[n]|=r,t[n+1]|=r>>>8,t[n+2]|=r>>>16},Ko=function(t,e){for(var r=[],n=0;n<t.length;++n)t[n]&&r.push({s:n,f:t[n]});var i=r.length,o=r.slice();if(!i)return[new ke(0),0];if(i==1){var s=new ke(r[0].s+1);return s[r[0].s]=1,[s,1]}r.sort(function(E,I){return E.f-I.f}),r.push({s:-1,f:25001});var c=r[0],u=r[1],a=0,l=1,f=2;for(r[0]={s:-1,f:c.f+u.f,l:c,r:u};l!=i-1;)c=r[r[a].f<r[f].f?a++:f++],u=r[a!=l&&r[a].f<r[f].f?a++:f++],r[l++]={s:-1,f:c.f+u.f,l:c,r:u};for(var d=o[0].s,n=1;n<i;++n)o[n].s>d&&(d=o[n].s);var p=new Re(d+1),h=Qo(r[l-1],p,0);if(h>e){var n=0,m=0,g=h-e,_=1<<g;for(o.sort(function(I,C){return p[C.s]-p[I.s]||I.f-C.f});n<i;++n){var v=o[n].s;if(p[v]>e)m+=_-(1<<h-p[v]),p[v]=e;else break}for(m>>>=g;m>0;){var y=o[n].s;p[y]<e?m-=1<<e-p[y]++-1:++n}for(;n>=0&&m;--n){var w=o[n].s;p[w]==e&&(--p[w],++m)}h=e}return[new ke(p),h]},Qo=function(t,e,r){return t.s==-1?Math.max(Qo(t.l,e,r+1),Qo(t.r,e,r+1)):e[t.s]=r},_l=function(t){for(var e=t.length;e&&!t[--e];);for(var r=new Re(++e),n=0,i=t[0],o=1,s=function(u){r[n++]=u},c=1;c<=e;++c)if(t[c]==i&&c!=e)++o;else{if(!i&&o>2){for(;o>138;o-=138)s(32754);o>2&&(s(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(s(i),--o;o>6;o-=6)s(8304);o>2&&(s(o-3<<5|8208),o=0)}for(;o--;)s(i);o=1,i=t[c]}return[r.subarray(0,n),e]},kr=function(t,e){for(var r=0,n=0;n<e.length;++n)r+=t[n]*e[n];return r},An=function(t,e,r){var n=r.length,i=xl(e+2);t[i]=n&255,t[i+1]=n>>>8,t[i+2]=t[i]^255,t[i+3]=t[i+1]^255;for(var o=0;o<n;++o)t[i+o+4]=r[o];return(i+4+n)*8},Sl=function(t,e,r,n,i,o,s,c,u,a,l){at(e,l++,r),++i[256];for(var f=Ko(i,15),d=f[0],p=f[1],h=Ko(o,15),m=h[0],g=h[1],_=_l(d),v=_[0],y=_[1],w=_l(m),E=w[0],I=w[1],C=new Re(19),S=0;S<v.length;++S)C[v[S]&31]++;for(var S=0;S<E.length;++S)C[E[S]&31]++;for(var O=Ko(C,7),M=O[0],P=O[1],k=19;k>4&&!M[yl[k-1]];--k);var N=a+5<<3,j=kr(i,Ft)+kr(o,Un)+s,G=kr(i,d)+kr(o,m)+s+14+3*k+kr(C,M)+(2*C[16]+3*C[17]+7*C[18]);if(N<=j&&N<=G)return An(e,l,t.subarray(u,u+a));var Y,R,Q,le;if(at(e,l,1+(G<j)),l+=2,G<j){Y=Lr(d,p,0),R=d,Q=Lr(m,g,0),le=m;var Ie=Lr(M,P,0);at(e,l,y-257),at(e,l+5,I-1),at(e,l+10,k-4),l+=14;for(var S=0;S<k;++S)at(e,l+3*S,M[yl[S]]);l+=3*k;for(var Z=[v,E],me=0;me<2;++me)for(var ae=Z[me],S=0;S<ae.length;++S){var te=ae[S]&31;at(e,l,Ie[te]),l+=M[te],te>15&&(at(e,l,ae[S]>>>5&127),l+=ae[S]>>>12)}}else Y=Bp,R=Ft,Q=Wp,le=Un;for(var S=0;S<c;++S)if(n[S]>255){var te=n[S]>>>18&31;Pr(e,l,Y[te+257]),l+=R[te+257],te>7&&(at(e,l,n[S]>>>23&31),l+=Zo[te]);var H=n[S]&31;Pr(e,l,Q[H]),l+=le[H],H>3&&(Pr(e,l,n[S]>>>5&8191),l+=Jo[H])}else Pr(e,l,Y[n[S]]),l+=R[n[S]];return Pr(e,l,Y[256]),l+R[256]},Vp=new Nr([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Gp=new ke(0),qp=function(t,e,r,n,i,o){var s=t.length,c=new ke(n+s+5*(1+Math.floor(s/7e3))+i),u=c.subarray(n,c.length-i),a=0;if(!e||s<8)for(var l=0;l<=s;l+=65535){var f=l+65535;f<s?a=An(u,a,t.subarray(l,f)):(u[l]=o,a=An(u,a,t.subarray(l,s)))}else{for(var d=Vp[e-1],p=d>>>13,h=d&8191,m=(1<<r)-1,g=new Re(32768),_=new Re(m+1),v=Math.ceil(r/3),y=2*v,w=function(pe){return(t[pe]^t[pe+1]<<v^t[pe+2]<<y)&m},E=new Nr(25e3),I=new Re(288),C=new Re(32),S=0,O=0,l=0,M=0,P=0,k=0;l<s;++l){var N=w(l),j=l&32767,G=_[N];if(g[j]=G,_[N]=j,P<=l){var Y=s-l;if((S>7e3||M>24576)&&Y>423){a=Sl(t,u,0,E,I,C,O,M,k,l-k,a),M=S=O=0,k=l;for(var R=0;R<286;++R)I[R]=0;for(var R=0;R<30;++R)C[R]=0}var Q=2,le=0,Ie=h,Z=j-G&32767;if(Y>2&&N==w(l-Z))for(var me=Math.min(p,Y)-1,ae=Math.min(32767,l),te=Math.min(258,Y);Z<=ae&&--Ie&&j!=G;){if(t[l+Q]==t[l+Q-Z]){for(var H=0;H<te&&t[l+H]==t[l+H-Z];++H);if(H>Q){if(Q=H,le=Z,H>me)break;for(var Le=Math.min(Z,H-2),fe=0,R=0;R<Le;++R){var K=l-Z+R+32768&32767,Jt=g[K],St=K-Jt+32768&32767;St>fe&&(fe=St,G=K)}}}j=G,G=g[j],Z+=j-G+32768&32767}if(le){E[M++]=268435456|Xo[Q]<<18|bl[le];var L=Xo[Q]&31,Oe=bl[le]&31;O+=Zo[L]+Jo[Oe],++I[257+L],++C[Oe],P=l+Q,++S}else E[M++]=t[l],++I[t[l]]}}a=Sl(t,u,o,E,I,C,O,M,k,l-k,a),o||(a=An(u,a,Gp))}return Tl(c,0,n+xl(a)+i)},Hp=function(){var t=1,e=0;return{p:function(r){for(var n=t,i=e,o=r.length,s=0;s!=o;){for(var c=Math.min(s+5552,o);s<c;++s)n+=r[s],i+=n;n%=65521,i%=65521}t=n,e=i},d:function(){return(t>>>8<<16|(e&255)<<8|e>>>8)+((t&255)<<23)*2}}},$p=function(t,e,r,n,i){return qp(t,e.level==null?6:e.level,e.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):12+e.mem,r,n,!i)},zp=function(t,e,r){for(;r;++e)t[e]=r,r>>>=8},Kp=function(t,e){var r=e.level,n=r==0?0:r<6?1:r==9?3:2;t[0]=120,t[1]=n<<6|(n?32-2*n:1)}});var Dl,Pl=b(()=>{"use strict";Dl="v1"});var es,kl=b(()=>{"use strict";Ml();Pl();es=t=>{let e=Object.assign(Object.assign({},t),{v:Dl});return Ol(Cl(Rl(JSON.stringify(e))),!0)}});var Fn=b(()=>{"use strict";kl();vl();qe()});function Ee(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function c(l){try{a(n.next(l))}catch(f){s(f)}}function u(l){try{a(n.throw(l))}catch(f){s(f)}}function a(l){l.done?o(l.value):i(l.value).then(c,u)}a((n=n.apply(t,e||[])).next())})}function we(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function c(a){return function(l){return u([a,l])}}function u(a){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(r=0)),r;)try{if(n=1,i&&(o=a[0]&2?i.return:a[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[a[0]&2,o.value]),a[0]){case 0:case 1:o=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,i=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(a[0]===6||a[0]===2)){r=0;continue}if(a[0]===3&&(!o||a[1]>o[0]&&a[1]<o[3])){r.label=a[1];break}if(a[0]===6&&r.label<o[1]){r.label=o[1],o=a;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(a);break}o[2]&&r.ops.pop(),r.trys.pop();continue}a=e.call(t,r)}catch(l){a=[6,l],i=0}finally{n=o=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}}function Ll(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(c){s={error:c}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o}function ts(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))}var jt,rs=b(()=>{"use strict";jt=function(){return jt=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},jt.apply(this,arguments)}});function Xp(){return Nl||(Nl=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Yp(){return Al||(Al=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}function Qp(t){let e=new Promise((r,n)=>{let i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{r(_t(t.result)),i()},s=()=>{n(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return jn.set(e,t),e}function Zp(t){if(ss.has(t))return;let e=new Promise((r,n)=>{let i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{r(),i()},s=()=>{n(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});ss.set(t,e)}function Bl(t){as=t(as)}function Jp(t){return Yp().includes(t)?function(...e){return t.apply(us(this),e),_t(this.request)}:function(...e){return _t(t.apply(us(this),e))}}function eh(t){return typeof t=="function"?Jp(t):(t instanceof IDBTransaction&&Zp(t),os(t,Xp())?new Proxy(t,as):t)}function _t(t){if(t instanceof IDBRequest)return Qp(t);if(ns.has(t))return ns.get(t);let e=eh(t);return e!==t&&(ns.set(t,e),jn.set(e,t)),e}function Ar(t,e,{blocked:r,upgrade:n,blocking:i,terminated:o}={}){let s=indexedDB.open(t,e),c=_t(s);return n&&s.addEventListener("upgradeneeded",u=>{n(_t(s.result),u.oldVersion,u.newVersion,_t(s.transaction),u)}),r&&s.addEventListener("blocked",u=>r(u.oldVersion,u.newVersion,u)),c.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",a=>i(a.oldVersion,a.newVersion,a))}).catch(()=>{}),c}function Wl(t,{blocked:e}={}){let r=indexedDB.deleteDatabase(t);return e&&r.addEventListener("blocked",n=>e(n.oldVersion,n)),_t(r).then(()=>{})}function Ul(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(is.get(e))return is.get(e);let r=e.replace(/FromIndex$/,""),n=e!==r,i=rh.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(i||th.includes(r)))return;let o=async function(s,...c){let u=this.transaction(s,i?"readwrite":"readonly"),a=u.store;return n&&(a=a.index(c.shift())),(await Promise.all([a[r](...c),i&&u.done]))[0]};return is.set(e,o),o}async function*oh(...t){let e=this;if(e instanceof IDBCursor||(e=await e.openCursor(...t)),!e)return;e=e;let r=new Proxy(e,ih);for(Vl.set(r,e),jn.set(r,us(e));e;)yield r,e=await(cs.get(r)||e.continue()),cs.delete(r)}function jl(t,e){return e===Symbol.asyncIterator&&os(t,[IDBIndex,IDBObjectStore,IDBCursor])||e==="iterate"&&os(t,[IDBIndex,IDBObjectStore])}var os,Nl,Al,ss,ns,jn,as,us,th,rh,is,nh,Fl,cs,Vl,ih,ls=b(()=>{"use strict";os=(t,e)=>e.some(r=>t instanceof r);ss=new WeakMap,ns=new WeakMap,jn=new WeakMap;as={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return ss.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return _t(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};us=t=>jn.get(t);th=["get","getKey","getAll","getAllKeys","count"],rh=["put","add","delete","clear"],is=new Map;Bl(t=>({...t,get:(e,r,n)=>Ul(e,r)||t.get(e,r,n),has:(e,r)=>!!Ul(e,r)||t.has(e,r)}));nh=["continue","continuePrimaryKey","advance"],Fl={},cs=new WeakMap,Vl=new WeakMap,ih={get(t,e){if(!nh.includes(e))return t[e];let r=Fl[e];return r||(r=Fl[e]=function(...n){cs.set(this,Vl.get(this)[e](...n))}),r}};Bl(t=>({...t,get(e,r,n){return jl(e,r)?oh:t.get(e,r,n)},has(e,r){return jl(e,r)||t.has(e,r)}}))});var sh,Gl,ah,ql,Hl=b(()=>{"use strict";rs();ls();sh=1e3*60*60*24*3,Gl=function(t,e){return Ee(void 0,void 0,void 0,function(){return we(this,function(r){switch(r.label){case 0:return[4,Ar(t,1,{upgrade:function(n){e.forEach(function(i){n.objectStoreNames.contains(i)||n.createObjectStore(i)})}})];case 1:return[2,r.sent()]}})})},ah=function(t){return Ee(void 0,void 0,void 0,function(){return we(this,function(e){switch(e.label){case 0:return[4,Ar(t,1,{upgrade:function(r){r.objectStoreNames.contains("lastFetchedSessionId")||r.createObjectStore("lastFetchedSessionId")}})];case 1:return[2,e.sent()]}})})},ql=function(t){var e=t.loggerProvider,r=t.apiKey,n=t.configKeys;return Ee(void 0,void 0,void 0,function(){var i,o,s,c,u,a,l,f,d,p;return we(this,function(h){switch(h.label){case 0:return i="".concat(r.substring(0,10),"_amp_config"),[4,Gl(i,n)];case 1:return o=h.sent(),s="".concat(r.substring(0,10),"_amp_config_meta"),[4,ah(s)];case 2:c=h.sent(),h.label=3;case 3:return h.trys.push([3,8,,9]),[4,c.get("lastFetchedSessionId","sessionId")];case 4:return u=h.sent(),u&&Date.now()-u>=sh?(o.close(),[4,Wl(i)]):[3,7];case 5:return h.sent(),[4,Gl(r,n)];case 6:o=h.sent(),h.label=7;case 7:return[3,9];case 8:return a=h.sent(),e.warn("Failed to reset store: ".concat(a)),[3,9];case 9:return l=function(m,g){return Ee(void 0,void 0,void 0,function(){var _,v,y,w,E,I,C;return we(this,function(S){switch(S.label){case 0:return S.trys.push([0,7,,8]),g?[4,c.put("lastFetchedSessionId",g,"sessionId")]:[3,2];case 1:S.sent(),S.label=2;case 2:_=function(O){var M,P;return we(this,function(k){switch(k.label){case 0:return M=m.configs[O],P=o.transaction(O,"readwrite"),[4,Promise.all(ts(ts([],Ll(Object.keys(M).map(function(N){return P.store.put(jt({},M[N]),N)})),!1),[P.done],!1))];case 1:return k.sent(),[2]}})},v=m.configs,y=[];for(w in v)y.push(w);E=0,S.label=3;case 3:return E<y.length?(w=y[E],w in v?(I=w,[5,_(I)]):[3,5]):[3,6];case 4:S.sent(),S.label=5;case 5:return E++,[3,3];case 6:return[3,8];case 7:return C=S.sent(),e.warn("Failed to store remote config: ".concat(C)),[3,8];case 8:return[2]}})})},f=function(){return Ee(void 0,void 0,void 0,function(){var m,g;return we(this,function(_){switch(_.label){case 0:return _.trys.push([0,2,,3]),[4,c.get("lastFetchedSessionId","sessionId")];case 1:return m=_.sent(),[2,m];case 2:return g=_.sent(),e.warn("Failed to fetch lastFetchedSessionId: ".concat(g)),[3,3];case 3:return[2,void 0]}})})},d=function(m,g){return Ee(void 0,void 0,void 0,function(){var _,v;return we(this,function(y){switch(y.label){case 0:return y.trys.push([0,2,,3]),[4,o.get(m,g)];case 1:return _=y.sent(),[2,_];case 2:return v=y.sent(),e.warn("Failed to fetch remote config: ".concat(v)),[3,3];case 3:return[2,void 0]}})})},p=function(m){return Ee(void 0,void 0,void 0,function(){var g,_;return we(this,function(v){switch(v.label){case 0:return v.trys.push([0,2,,3]),[4,o.getAll(m)];case 1:return g=v.sent(),[2,!!g.length];case 2:return _=v.sent(),e.warn("Failed to fetch remote config: ".concat(_)),[3,3];case 3:return[2,!1]}})})},[2,{storeRemoteConfig:l,getRemoteConfig:d,getLastFetchedSessionId:f,remoteConfigHasValues:p}]}})})}});var ch,lh,fh,$l,dh,ph,hh,mh,gh,zl,Kl=b(()=>{"use strict";rs();nt();ze();Hl();ch="Network error occurred, remote config fetch failed",lh="Remote config successfully fetched",fh="Remote config fetch rejected due to exceeded retry count",$l="Remote config fetch rejected due to timeout after 5 seconds",dh="Unexpected error occurred",ph="https://sr-client-cfg.amplitude.com/config",hh="https://sr-client-cfg.stag2.amplitude.com/config",mh="https://sr-client-cfg.eu.amplitude.com/config",gh=function(){function t(e){var r=e.localConfig,n=e.configKeys,i=this;this.retryTimeout=1e3,this.attempts=0,this.sessionTargetingMatch=!1,this.fetchTime=0,this.getRemoteConfig=function(o,s,c){return Ee(i,void 0,void 0,function(){var u,a,l,f,d;return we(this,function(p){switch(p.label){case 0:return u=Date.now(),this.remoteConfigIDBStore?[4,this.remoteConfigIDBStore.getLastFetchedSessionId()]:[3,3];case 1:return a=p.sent(),a&&c&&a===c?[4,this.remoteConfigIDBStore.getRemoteConfig(o,s)]:[3,3];case 2:return l=p.sent(),this.fetchTime=Date.now()-u,[2,l];case 3:return[4,this.fetchWithTimeout(c)];case 4:return f=p.sent(),f&&(d=f.configs&&f.configs[o],d)?(this.fetchTime=Date.now()-u,[2,d[s]]):(this.fetchTime=Date.now()-u,[2,void 0])}})})},this.fetchWithTimeout=function(o){return Ee(i,void 0,void 0,function(){var s,c,u;return we(this,function(a){switch(a.label){case 0:return s=new AbortController,c=setTimeout(function(){return s.abort()},5e3),[4,this.fetchRemoteConfig(s.signal,o)];case 1:return u=a.sent(),clearTimeout(c),[2,u]}})})},this.fetchRemoteConfig=function(o,s){return Ee(i,void 0,void 0,function(){var c,u,a,l,f,d,p;return we(this,function(h){switch(h.label){case 0:if(s===this.lastFetchedSessionId&&this.attempts>=this.localConfig.flushMaxRetries)return[2,this.completeRequest({err:fh})];if(o.aborted)return[2,this.completeRequest({err:$l})];s!==this.lastFetchedSessionId&&(this.lastFetchedSessionId=s,this.attempts=0),h.label=1;case 1:return h.trys.push([1,3,,4]),c=new URLSearchParams({api_key:this.localConfig.apiKey,config_keys:this.configKeys.join(",")}),u={headers:{"Content-Type":"application/json",Accept:"*/*"},method:"GET"},a="".concat(this.getServerUrl(),"?").concat(c.toString()),this.attempts+=1,[4,fetch(a,jt(jt({},u),{signal:o}))];case 2:if(l=h.sent(),l===null)return[2,this.completeRequest({err:dh})];switch(f=new Rt().buildStatus(l.status),f){case oe.Success:return this.attempts=0,[2,this.parseAndStoreConfig(l,s)];case oe.Failed:return[2,this.retryFetch(o,s)];default:return[2,this.completeRequest({err:ch})]}return[3,4];case 3:return d=h.sent(),p=d,o.aborted?[2,this.completeRequest({err:$l})]:[2,this.completeRequest({err:p.message})];case 4:return[2]}})})},this.retryFetch=function(o,s){return Ee(i,void 0,void 0,function(){var c=this;return we(this,function(u){switch(u.label){case 0:return[4,new Promise(function(a){return setTimeout(a,c.attempts*c.retryTimeout)})];case 1:return u.sent(),[2,this.fetchRemoteConfig(o,s)]}})})},this.parseAndStoreConfig=function(o,s){return Ee(i,void 0,void 0,function(){var c,u;return we(this,function(a){switch(a.label){case 0:return[4,o.json()];case 1:return c=a.sent(),u=this.remoteConfigIDBStore,u?[4,this.remoteConfigIDBStore.storeRemoteConfig(c,s)]:[3,3];case 2:u=a.sent(),a.label=3;case 3:return this.completeRequest({success:lh}),[2,c]}})})},this.localConfig=r,this.configKeys=n}return t.prototype.initialize=function(){return Ee(this,void 0,void 0,function(){var e;return we(this,function(r){switch(r.label){case 0:return e=this,[4,ql({apiKey:this.localConfig.apiKey,loggerProvider:this.localConfig.loggerProvider,configKeys:this.configKeys})];case 1:return e.remoteConfigIDBStore=r.sent(),[2]}})})},t.prototype.getServerUrl=function(){return this.localConfig.serverZone===We.STAGING?hh:this.localConfig.serverZone===We.EU?mh:ph},t.prototype.completeRequest=function(e){var r=e.err,n=e.success;if(r)throw new Error(r);n&&this.localConfig.loggerProvider.log(n)},t}(),zl=function(t){var e=t.localConfig,r=t.configKeys;return Ee(void 0,void 0,void 0,function(){var n;return we(this,function(i){switch(i.label){case 0:return n=new gh({localConfig:e,configKeys:r}),[4,n.initialize()];case 1:return i.sent(),[2,n]}})})}});var Xl,Yl=b(()=>{"use strict";Kl();Xl=zl});var yh,Ql,Zl=b(()=>{"use strict";Xe();Yl();To();yh=function(){function t(e,r){this.localConfig=new Ic(e,r)}return t.prototype.initialize=function(){return W(this,void 0,void 0,function(){var e;return F(this,function(r){switch(r.label){case 0:return e=this,[4,Xl({localConfig:this.localConfig,configKeys:["sessionReplay"]})];case 1:return e.remoteConfigFetch=r.sent(),[2]}})})},t.prototype.generateJoinedConfig=function(e){var r,n,i;return W(this,void 0,void 0,function(){var o,s,c,u,a,l,f,d,p,h,m,g,_,v,y,w,E,I,C,S;return F(this,function(O){switch(O.label){case 0:o=z({},this.localConfig),o.optOut=this.localConfig.optOut,o.captureEnabled=!0,O.label=1;case 1:return O.trys.push([1,5,,6]),this.remoteConfigFetch?[4,this.remoteConfigFetch.getRemoteConfig("sessionReplay","sr_sampling_config",e)]:(o.captureEnabled=!1,[2,o]);case 2:return c=O.sent(),[4,this.remoteConfigFetch.getRemoteConfig("sessionReplay","sr_privacy_config",e)];case 3:return u=O.sent(),a=o,[4,this.remoteConfigFetch.getRemoteConfig("sessionReplay","sr_interaction_config",e)];case 4:return a.interactionConfig=O.sent(),(c||u)&&(s={},c&&(s.sr_sampling_config=c),u&&(s.sr_privacy_config=u)),[3,6];case 5:return l=O.sent(),f=l,this.localConfig.loggerProvider.warn(f.message),o.captureEnabled=!1,[3,6];case 6:if(!s)return[2,o];if(d=s.sr_sampling_config,p=s.sr_privacy_config,d&&Object.keys(d).length>0?(Object.prototype.hasOwnProperty.call(d,"capture_enabled")?o.captureEnabled=d.capture_enabled:o.captureEnabled=!1,Object.prototype.hasOwnProperty.call(d,"sample_rate")&&(o.sampleRate=d.sample_rate)):(o.captureEnabled=!0,this.localConfig.loggerProvider.debug("Remote config successfully fetched, but no values set for project, Session Replay capture enabled.")),p){h=(r=o.privacyConfig)!==null&&r!==void 0?r:{},m={defaultMaskLevel:(i=(n=p.defaultMaskLevel)!==null&&n!==void 0?n:h.defaultMaskLevel)!==null&&i!==void 0?i:"medium",blockSelector:[],maskSelector:[],unmaskSelector:[]},g=function(M){var P,k,N,j,G,Y,R,Q,le,Ie={};typeof M.blockSelector=="string"&&(M.blockSelector=[M.blockSelector]);try{for(var Z=Ve((R=M.blockSelector)!==null&&R!==void 0?R:[]),me=Z.next();!me.done;me=Z.next()){var ae=me.value;Ie[ae]="block"}}catch(K){P={error:K}}finally{try{me&&!me.done&&(k=Z.return)&&k.call(Z)}finally{if(P)throw P.error}}try{for(var te=Ve((Q=M.maskSelector)!==null&&Q!==void 0?Q:[]),H=te.next();!H.done;H=te.next()){var ae=H.value;Ie[ae]="mask"}}catch(K){N={error:K}}finally{try{H&&!H.done&&(j=te.return)&&j.call(te)}finally{if(N)throw N.error}}try{for(var Le=Ve((le=M.unmaskSelector)!==null&&le!==void 0?le:[]),fe=Le.next();!fe.done;fe=Le.next()){var ae=fe.value;Ie[ae]="unmask"}}catch(K){G={error:K}}finally{try{fe&&!fe.done&&(Y=Le.return)&&Y.call(Le)}finally{if(G)throw G.error}}return Ie},_=z(z({},g(h)),g(p));try{for(v=Ve(Object.entries(_)),y=v.next();!y.done;y=v.next())w=Ke(y.value,2),E=w[0],I=w[1],I==="mask"?m.maskSelector.push(E):I==="block"?m.blockSelector.push(E):I==="unmask"&&m.unmaskSelector.push(E)}catch(M){C={error:M}}finally{try{y&&!y.done&&(S=v.return)&&S.call(v)}finally{if(C)throw C.error}}o.privacyConfig=m}return[2,o]}})})},t}(),Ql=function(t,e){return W(void 0,void 0,void 0,function(){var r;return F(this,function(n){switch(n.label){case 0:return r=new yh(t,e),[4,r.initialize()];case 1:return n.sent(),[2,r]}})})}});var Jl,ef,tf,rf,Yt,nf,of,fs=b(()=>{"use strict";Jl=function(t){return"Session replay event batch tracked successfully for session id ".concat(t)},ef="Unexpected error occurred",tf="Network error occurred, event batch rejected",rf="Session replay event batch rejected due to exceeded retry count",Yt="Failed to store session replay events in IndexedDB",nf="Session replay event batch not sent due to missing device ID",of="Session replay event batch not sent due to missing api key"});var Ur,sf=b(()=>{"use strict";(function(t){t.RECORDING="recording",t.SENT="sent"})(Ur||(Ur={}))});var Fr,Qt,bh,af,_h,Sh,wh,uf,cf=b(()=>{"use strict";Xe();mt();nt();ls();qt();fs();sf();Fr="sessionCurrentSequence",Qt="sequencesToSend",bh=function(){var t=Pe();return new Promise(function(e,r){if(!t)return r(new Error("Global scope not found"));if(!t.indexedDB)return r(new Error("Session Replay: cannot find indexedDB"));try{var n=t.indexedDB.open("keyval-store");n.onupgradeneeded=function(){n.result.version===1&&(n.result.close(),n.transaction&&n.transaction.abort(),t.indexedDB.deleteDatabase("keyval-store"),e())},n.onsuccess=function(){e(n.result)}}catch(i){r(i)}})},af=function(t){return W(void 0,void 0,void 0,function(){var e,r;return F(this,function(n){switch(n.label){case 0:return t.length>0?(e=10,r=t.splice(0,e),[4,Promise.all(r)]):[3,2];case 1:return n.sent(),[3,0];case 2:return[2]}})})},_h=function(t){var e,r;return t.objectStoreNames.contains(Fr)||(r=t.createObjectStore(Fr,{keyPath:"sessionId"})),t.objectStoreNames.contains(Qt)||(e=t.createObjectStore(Qt,{keyPath:"sequenceId",autoIncrement:!0}),e.createIndex("sessionId","sessionId")),{sequencesStore:e,currentSequenceStore:r}},Sh=function(t){return W(void 0,void 0,void 0,function(){return F(this,function(e){switch(e.label){case 0:return[4,Ar(t,1,{upgrade:_h})];case 1:return[2,e.sent()]}})})},wh=function(){function t(e){var r=e.loggerProvider,n=e.apiKey,i=e.minInterval,o=e.maxInterval,s=this;this.storageKey="",this.maxPersistedEventsSize=bc,this.timeAtLastSplit=null,this.shouldSplitEventsList=function(c,u){var a=new Blob([u]).size,l=new Blob(c).size;return l+a>=s.maxPersistedEventsSize?!0:s.timeAtLastSplit!==null&&s.interval&&Date.now()-s.timeAtLastSplit>s.interval&&c.length?(s.interval=Math.min(s.maxInterval,s.interval+s.minInterval),s.timeAtLastSplit=Date.now(),!0):!1},this.getSequencesToSend=function(){return W(s,void 0,void 0,function(){var c,u,a;return F(this,function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),[4,(a=this.db)===null||a===void 0?void 0:a.getAll(Qt)];case 1:return c=l.sent(),[2,c];case 2:return u=l.sent(),this.loggerProvider.warn("".concat(Yt,": ").concat(u)),[3,3];case 3:return[2,void 0]}})})},this.storeCurrentSequence=function(c){return W(s,void 0,void 0,function(){var u,a,l;return F(this,function(f){switch(f.label){case 0:return f.trys.push([0,4,,5]),this.db?[4,this.db.get(Fr,c)]:[2,void 0];case 1:return u=f.sent(),u?[4,this.db.put(Qt,{sessionId:c,events:u.events})]:[2,void 0];case 2:return a=f.sent(),[4,this.db.put(Fr,{sessionId:c,events:[]})];case 3:return f.sent(),[2,z(z({},u),{sessionId:c,sequenceId:a})];case 4:return l=f.sent(),this.loggerProvider.warn("".concat(Yt,": ").concat(l)),[3,5];case 5:return[2,void 0]}})})},this.addEventToCurrentSequence=function(c,u){return W(s,void 0,void 0,function(){var a,l,f,d,p,h,m;return F(this,function(g){switch(g.label){case 0:this.interval===0&&(this.interval=this.minInterval),g.label=1;case 1:return g.trys.push([1,11,,12]),a=(m=this.db)===null||m===void 0?void 0:m.transaction(Fr,"readwrite"),a?[4,a.store.get(c)]:[2];case 2:return l=g.sent(),l?[3,4]:[4,a.store.put({sessionId:c,events:[u]})];case 3:return g.sent(),[2];case 4:return f=void 0,this.shouldSplitEventsList(l.events,u)?(f=l.events,[4,a.store.put({sessionId:c,events:[u]})]):[3,6];case 5:return g.sent(),[3,8];case 6:return d=l.events.concat(u),[4,a.store.put({sessionId:c,events:d})];case 7:g.sent(),g.label=8;case 8:return[4,a.done];case 9:return g.sent(),f?[4,this.storeSendingEvents(c,f)]:[2,void 0];case 10:return p=g.sent(),p?[2,{events:f,sessionId:c,sequenceId:p}]:[2,void 0];case 11:return h=g.sent(),this.loggerProvider.warn("".concat(Yt,": ").concat(h)),[3,12];case 12:return[2,void 0]}})})},this.storeSendingEvents=function(c,u){return W(s,void 0,void 0,function(){var a,l,f;return F(this,function(d){switch(d.label){case 0:return d.trys.push([0,2,,3]),[4,(f=this.db)===null||f===void 0?void 0:f.put(Qt,{sessionId:c,events:u})];case 1:return a=d.sent(),[2,a];case 2:return l=d.sent(),this.loggerProvider.warn("".concat(Yt,": ").concat(l)),[3,3];case 3:return[2,void 0]}})})},this.cleanUpSessionEventsStore=function(c){return W(s,void 0,void 0,function(){var u,a;return F(this,function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),[4,(a=this.db)===null||a===void 0?void 0:a.delete(Qt,c)];case 1:return l.sent(),[3,3];case 2:return u=l.sent(),this.loggerProvider.warn("".concat(Yt,": ").concat(u)),[3,3];case 3:return[2]}})})},this.transitionFromKeyValStore=function(c){return W(s,void 0,void 0,function(){var u,a,l,f,d,p,h,m,g=this;return F(this,function(_){switch(_.label){case 0:return _.trys.push([0,6,,7]),[4,bh()];case 1:if(u=_.sent(),!u)return[2];a=function(v,y){return W(g,void 0,void 0,function(){var w,E,I=this;return F(this,function(C){switch(C.label){case 0:return w=y.sessionSequences,E=[],Object.keys(w).forEach(function(S){var O=parseInt(S,10),M=w[O];if(O===y.currentSequenceId){var P=M.events.map(function(k){return W(I,void 0,void 0,function(){return F(this,function(N){return[2,this.addEventToCurrentSequence(v,k)]})})});E.concat(P)}else M.status!==Ur.SENT&&E.push(I.storeSendingEvents(v,M.events))}),[4,af(E)];case 1:return C.sent(),[2]}})})},l="".concat(vo,"_").concat(this.apiKey.substring(0,10)),_.label=2;case 2:return _.trys.push([2,4,,5]),f=u.transaction("keyval").objectStore("keyval").getAll(l),d=new Promise(function(v){f.onsuccess=function(y){return W(g,void 0,void 0,function(){var w,E,I,C=this;return F(this,function(S){switch(S.label){case 0:return w=y&&y.target.result,E=w&&w[0],E?(I=[],Object.keys(E).forEach(function(O){var M=parseInt(O,10),P=E[M];if(c===M)I.push(a(M,P));else{var k=P.sessionSequences;Object.keys(k).forEach(function(N){var j=parseInt(N,10);k[j].status!==Ur.SENT&&I.push(C.storeSendingEvents(M,k[j].events))})}}),[4,af(I)]):[3,2];case 1:S.sent(),S.label=2;case 2:return v(),[2]}})})}}),[4,d];case 3:return _.sent(),p=Pe(),p&&p.indexedDB.deleteDatabase("keyval-store"),[3,5];case 4:return h=_.sent(),this.loggerProvider.warn("Failed to transition session replay events from keyval to new store: ".concat(h)),[3,5];case 5:return[3,7];case 6:return m=_.sent(),this.loggerProvider.warn("Failed to access keyval store: ".concat(m,". For more information, visit: https://www.docs.developers.amplitude.com/session-replay/sdks/standalone/#indexeddb-best-practices")),[3,7];case 7:return[2]}})})},this.loggerProvider=r,this.apiKey=n,this.maxInterval=o??Ec,this.minInterval=i??wc,this.interval=0}return t.prototype.initialize=function(e,r){return W(this,void 0,void 0,function(){var n,i,o;return F(this,function(s){switch(s.label){case 0:return n=e==="replay"?"":"_".concat(e),i="".concat(this.apiKey.substring(0,10),"_amp_session_replay_events").concat(n),o=this,[4,Sh(i)];case 1:return o.db=s.sent(),this.timeAtLastSplit=Date.now(),[4,this.transitionFromKeyValStore(r)];case 2:return s.sent(),[2]}})})},t}(),uf=function(t){var e=t.loggerProvider,r=t.apiKey,n=t.sessionId,i=t.type,o=t.minInterval,s=t.maxInterval;return W(void 0,void 0,void 0,function(){var c;return F(this,function(u){switch(u.label){case 0:return c=new wh({loggerProvider:e,apiKey:r,minInterval:o,maxInterval:s}),[4,c.initialize(i,n)];case 1:return u.sent(),[2,c]}})})}});var Bn,lf=b(()=>{"use strict";Bn="medium"});function Eh(t){return t.toLowerCase()}function df(t){let e=t.type;return t.hasAttribute("data-rr-is-password")?"password":e?Eh(e):null}var ff,gS,Ih,vS,xh,yS,pf=b(()=>{"use strict";(function(t){t[t.Document=0]="Document",t[t.DocumentType=1]="DocumentType",t[t.Element=2]="Element",t[t.Text=3]="Text",t[t.CDATA=4]="CDATA",t[t.Comment=5]="Comment"})(ff||(ff={}));gS=new RegExp("[^a-z0-9-_:]"),Ih=/(max|min)-device-(width|height)/,vS=new RegExp(Ih.source,"g"),xh=/([^\\]):hover/,yS=new RegExp(xh.source,"g")});var hf,Th,ds,ps,mf,gf,vf,Wn,jr=b(()=>{"use strict";mt();qt();lf();pf();ze();qt();hf=function(t,e,r){switch(e){case"light":{if(t!=="input")return!0;var n=r?df(r):"";return n?!!(["password","hidden","email","tel"].includes(n)||r.autocomplete.startsWith("cc-")):!1}case"medium":case"conservative":return!0;default:return hf(t,Bn,r)}},Th=function(t,e,r){var n,i,o;if(e===void 0&&(e={defaultMaskLevel:Bn}),r){if(r.closest("."+gn))return!0;var s=((n=e.maskSelector)!==null&&n!==void 0?n:[]).some(function(u){return r.closest(u)});if(s)return!0;if(r.closest("."+mc))return!1;var c=((i=e.unmaskSelector)!==null&&i!==void 0?i:[]).some(function(u){return r.closest(u)});if(c)return!1}return hf(t,(o=e.defaultMaskLevel)!==null&&o!==void 0?o:Bn,r)},ds=function(t,e){return function(r,n){return Th(t,e,n)?r.replace(/[^\s]/g,"*"):r}},ps=function(t){var e=0;if(t.length===0)return e;for(var r=0;r<t.length;r++){var n=t.charCodeAt(r);e=(e<<5)-e+n,e|=0}return e},mf=function(t,e){var r=ps(t.toString()),n=Math.abs(r),i=n*31,o=i%1e6;return o/1e6<e},gf=function(){var t=Pe();return t?.location?t.location.href:""},vf=function(t,e){return"".concat(e,"/").concat(t)},Wn=function(t){return t===We.STAGING?yc:t===We.EU?vc:gc}});var Vn,hs=b(()=>{"use strict";Vn="1.12.0"});var yf,bf=b(()=>{"use strict";Xe();nt();ze();jr();fs();hs();yf=function(){function t(e){var r=e.loggerProvider,n=e.payloadBatcher;this.storageKey="",this.retryTimeout=1e3,this.scheduled=null,this.queue=[],this.loggerProvider=r,this.payloadBatcher=n||function(i){return i}}return t.prototype.sendEventsList=function(e){this.addToQueue(z(z({},e),{attempts:0,timeout:0}))},t.prototype.addToQueue=function(){for(var e=this,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var i=r.filter(function(o){return o.attempts<(o.flushMaxRetries||0)?(o.attempts+=1,!0):(e.completeRequest({context:o,err:"".concat(rf,", batch sequence id, ").concat(o.sequenceId)}),!1)});i.forEach(function(o){if(e.queue=e.queue.concat(o),o.timeout===0){e.schedule(0);return}setTimeout(function(){o.timeout=0,e.schedule(0)},o.timeout)})},t.prototype.schedule=function(e){var r=this;this.scheduled||(this.scheduled=setTimeout(function(){r.flush(!0).then(function(){r.queue.length>0&&r.schedule(e)})},e))},t.prototype.flush=function(e){return e===void 0&&(e=!1),W(this,void 0,void 0,function(){var r,n,i=this;return F(this,function(o){switch(o.label){case 0:return r=[],n=[],this.queue.forEach(function(s){return s.timeout===0?r.push(s):n.push(s)}),this.queue=n,this.scheduled&&(clearTimeout(this.scheduled),this.scheduled=null),[4,Promise.all(r.map(function(s){return i.send(s,e)}))];case 1:return o.sent(),[2]}})})},t.prototype.send=function(e,r){return r===void 0&&(r=!0),W(this,void 0,void 0,function(){var n,i,o,s,c,u,a,l,f,d,p,h;return F(this,function(m){switch(m.label){case 0:if(n=e.apiKey,!n)return[2,this.completeRequest({context:e,err:of})];if(i=e.deviceId,!i)return[2,this.completeRequest({context:e,err:nf})];if(o=gf(),s=Vn,c=e.sampleRate,u=new URLSearchParams({device_id:i,session_id:"".concat(e.sessionId),seq_number:"".concat(e.sequenceId),type:"".concat(e.type)}),a=this.payloadBatcher({version:1,events:e.events}),a.events.length===0)return this.completeRequest({context:e}),[2];m.label=1;case 1:return m.trys.push([1,3,,4]),l={headers:{"Content-Type":"application/json",Accept:"*/*",Authorization:"Bearer ".concat(n),"X-Client-Version":s,"X-Client-Url":o,"X-Client-Sample-Rate":"".concat(c)},body:JSON.stringify(a),method:"POST"},f="".concat(Wn(e.serverZone),"?").concat(u.toString()),[4,fetch(f,l)];case 2:if(d=m.sent(),d===null)return this.completeRequest({context:e,err:ef}),[2];if(r)this.handleReponse(d.status,e);else{p="";try{p=JSON.stringify(d.body,null,2)}catch{}this.completeRequest({context:e,success:"".concat(d.status,": ").concat(p)})}return[3,4];case 3:return h=m.sent(),this.completeRequest({context:e,err:h}),[3,4];case 4:return[2]}})})},t.prototype.handleReponse=function(e,r){var n=new Rt().buildStatus(e);switch(n){case oe.Success:this.handleSuccessResponse(r);break;case oe.Failed:this.handleOtherResponse(r);break;default:this.completeRequest({context:r,err:tf})}},t.prototype.handleSuccessResponse=function(e){this.completeRequest({context:e,success:Jl(e.sessionId)})},t.prototype.handleOtherResponse=function(e){this.addToQueue(z(z({},e),{timeout:e.attempts*this.retryTimeout}))},t.prototype.completeRequest=function(e){var r=e.context,n=e.err,i=e.success;r.onComplete(r.sequenceId),n?this.loggerProvider.warn(n):i&&this.loggerProvider.log(i)},t}()});var ms,_f=b(()=>{"use strict";Xe();cf();bf();ms=function(t){var e=t.config,r=t.sessionId,n=t.minInterval,i=t.maxInterval,o=t.type,s=t.payloadBatcher;return W(void 0,void 0,void 0,function(){function c(h){return h===void 0&&(h=!1),W(this,void 0,void 0,function(){return F(this,function(m){return[2,u.flush(h)]})})}var u,a,l,f,d,p;return F(this,function(h){switch(h.label){case 0:return u=new yf({loggerProvider:e.loggerProvider,payloadBatcher:s}),[4,uf({loggerProvider:e.loggerProvider,apiKey:e.apiKey,sessionId:r,minInterval:n,maxInterval:i,type:o})];case 1:return a=h.sent(),l=function(m){var g=m.events,_=m.sessionId,v=m.deviceId,y=m.sequenceId;u.sendEventsList({events:g,sequenceId:y,sessionId:_,flushMaxRetries:e.flushMaxRetries,apiKey:e.apiKey,deviceId:v,sampleRate:e.sampleRate,serverZone:e.serverZone,type:o,onComplete:a.cleanUpSessionEventsStore.bind(a)})},f=function(m){var g=m.sessionId,_=m.deviceId;a.storeCurrentSequence(g).then(function(v){v&&l({sequenceId:v.sequenceId,events:v.events,sessionId:v.sessionId,deviceId:_})}).catch(function(v){e.loggerProvider.warn("Failed to get current sequence of session replay events for session:",v)})},d=function(m){var g=m.deviceId;return W(void 0,void 0,void 0,function(){var _;return F(this,function(v){switch(v.label){case 0:return[4,a.getSequencesToSend()];case 1:return _=v.sent(),_&&_.forEach(function(y){l({sequenceId:y.sequenceId,events:y.events,sessionId:y.sessionId,deviceId:g})}),[2]}})})},p=function(m){var g=m.event,_=m.sessionId,v=m.deviceId;a.addEventToCurrentSequence(_,g.data).then(function(y){return y&&l({sequenceId:y.sequenceId,events:y.events,sessionId:y.sessionId,deviceId:v})}).catch(function(y){e.loggerProvider.warn("Failed to add event to session replay capture:",y)})},[2,{sendCurrentSequenceEvents:f,addEvent:p,sendStoredEvents:d,flush:c}]}})})}});var gs,Sf=b(()=>{"use strict";Xe();gs=function(){function t(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=new Map;e.forEach(function(i){n.set(i.name,i.manager)}),this.managers=n}return t.prototype.sendStoredEvents=function(e){return W(this,void 0,void 0,function(){var r;return F(this,function(n){switch(n.label){case 0:return r=[],this.managers.forEach(function(i){r.push(i.sendStoredEvents(e))}),[4,Promise.all(r)];case 1:return n.sent(),[2]}})})},t.prototype.addEvent=function(e){var r,n=e.sessionId,i=e.event,o=e.deviceId;(r=this.managers.get(i.type))===null||r===void 0||r.addEvent({sessionId:n,event:i,deviceId:o})},t.prototype.sendCurrentSequenceEvents=function(e){var r=e.sessionId,n=e.deviceId;this.managers.forEach(function(i){i.sendCurrentSequenceEvents({sessionId:r,deviceId:n})})},t.prototype.flush=function(e){return W(this,void 0,void 0,function(){var r;return F(this,function(n){switch(n.label){case 0:return r=[],this.managers.forEach(function(i){r.push(i.flush(e))}),[4,Promise.all(r)];case 1:return n.sent(),[2]}})})},t}()});var vs,wf=b(()=>{"use strict";vs=(t=>(t[t.MouseUp=0]="MouseUp",t[t.MouseDown=1]="MouseDown",t[t.Click=2]="Click",t[t.ContextMenu=3]="ContextMenu",t[t.DblClick=4]="DblClick",t[t.Focus=5]="Focus",t[t.Blur=6]="Blur",t[t.TouchStart=7]="TouchStart",t[t.TouchMove_Departed=8]="TouchMove_Departed",t[t.TouchEnd=9]="TouchEnd",t[t.TouchCancel=10]="TouchCancel",t))(vs||{})});function Cf(t,e){if(Tf=new Date,t.nodeType!==Node.ELEMENT_NODE)throw new Error("Can't generate CSS selector for non-element node type.");if(t.tagName.toLowerCase()==="html")return"html";var r={root:document.body,idName:function(o){return!0},className:function(o){return!0},tagName:function(o){return!0},attr:function(o,s){return!1},seedMinLength:1,optimizedMinLength:2,threshold:1e3,maxNumberOfTries:1e4,timeoutMs:void 0};je=z(z({},r),e),bs=Ch(je.root,r);var n=Gn(t,"all",function(){return Gn(t,"two",function(){return Gn(t,"one",function(){return Gn(t,"none")})})});if(n){var i=Mf(Df(n,t));return i.length>0&&(n=i[0]),$n(n)}else throw new Error("Selector was not found.")}function Ch(t,e){return t.nodeType===Node.DOCUMENT_NODE?t:t===e.root?t.ownerDocument:t}function Gn(t,e,r){for(var n=null,i=[],o=t,s=0,c=function(){var a,l,f=new Date().getTime()-Tf.getTime();if(je.timeoutMs!==void 0&&f>je.timeoutMs)throw new Error("Timeout: Can't find a unique selector after ".concat(f,"ms"));var d=Hn(Rh(o))||Hn.apply(void 0,Ot([],Ke(Oh(o)),!1))||Hn.apply(void 0,Ot([],Ke(Mh(o)),!1))||Hn(Dh(o))||[xf()],p=Ph(o);if(e=="all")p&&(d=d.concat(d.filter(ys).map(function(v){return qn(v,p)})));else if(e=="two")d=d.slice(0,1),p&&(d=d.concat(d.filter(ys).map(function(v){return qn(v,p)})));else if(e=="one"){var h=Ke(d=d.slice(0,1),1),m=h[0];p&&ys(m)&&(d=[qn(m,p)])}else e=="none"&&(d=[xf()],p&&(d=[qn(d[0],p)]));try{for(var g=(a=void 0,Ve(d)),_=g.next();!_.done;_=g.next()){var m=_.value;m.level=s}}catch(v){a={error:v}}finally{try{_&&!_.done&&(l=g.return)&&l.call(g)}finally{if(a)throw a.error}}if(i.push(d),i.length>=je.seedMinLength&&(n=Ef(i,r),n))return"break";o=o.parentElement,s++};o;){var u=c();if(u==="break")break}return n||(n=Ef(i,r)),!n&&r?r():n}function Ef(t,e){var r,n,i=Mf(Of(t));if(i.length>je.threshold)return e?e():null;try{for(var o=Ve(i),s=o.next();!s.done;s=o.next()){var c=s.value;if(Rf(c))return c}}catch(u){r={error:u}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return null}function $n(t){for(var e=t[0],r=e.name,n=1;n<t.length;n++){var i=t[n].level||0;e.level===i-1?r="".concat(t[n].name," > ").concat(r):r="".concat(t[n].name," ").concat(r),e=t[n]}return r}function If(t){return t.map(function(e){return e.penalty}).reduce(function(e,r){return e+r},0)}function Rf(t){var e=$n(t);switch(bs.querySelectorAll(e).length){case 0:throw new Error("Can't select any node with this selector: ".concat(e));case 1:return!0;default:return!1}}function Rh(t){var e=t.getAttribute("id");return e&&je.idName(e)?{name:"#"+CSS.escape(e),penalty:0}:null}function Oh(t){var e=Array.from(t.attributes).filter(function(r){return je.attr(r.name,r.value)});return e.map(function(r){return{name:"[".concat(CSS.escape(r.name),'="').concat(CSS.escape(r.value),'"]'),penalty:.5}})}function Mh(t){var e=Array.from(t.classList).filter(je.className);return e.map(function(r){return{name:"."+CSS.escape(r),penalty:1}})}function Dh(t){var e=t.tagName.toLowerCase();return je.tagName(e)?{name:e,penalty:2}:null}function xf(){return{name:"*",penalty:3}}function Ph(t){var e=t.parentNode;if(!e)return null;var r=e.firstChild;if(!r)return null;for(var n=0;r&&(r.nodeType===Node.ELEMENT_NODE&&n++,r!==t);)r=r.nextSibling;return n}function qn(t,e){return{name:t.name+":nth-child(".concat(e,")"),penalty:t.penalty+1}}function ys(t){return t.name!=="html"&&!t.name.startsWith("#")}function Hn(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t.filter(kh);return r.length>0?r:null}function kh(t){return t!=null}function Of(t,e){var r,n,i,o,s,c;return e===void 0&&(e=[]),F(this,function(u){switch(u.label){case 0:if(!(t.length>0))return[3,9];u.label=1;case 1:u.trys.push([1,6,7,8]),r=Ve(t[0]),n=r.next(),u.label=2;case 2:return n.done?[3,5]:(i=n.value,[5,Ve(Of(t.slice(1,t.length),e.concat(i)))]);case 3:u.sent(),u.label=4;case 4:return n=r.next(),[3,2];case 5:return[3,8];case 6:return o=u.sent(),s={error:o},[3,8];case 7:try{n&&!n.done&&(c=r.return)&&c.call(r)}finally{if(s)throw s.error}return[7];case 8:return[3,11];case 9:return[4,e];case 10:u.sent(),u.label=11;case 11:return[2]}})}function Mf(t){return Ot([],Ke(t),!1).sort(function(e,r){return If(e)-If(r)})}function Df(t,e,r){var n,i,o;return r===void 0&&(r={counter:0,visited:new Map}),F(this,function(s){switch(s.label){case 0:if(!(t.length>2&&t.length>je.optimizedMinLength))return[3,5];n=1,s.label=1;case 1:return n<t.length-1?r.counter>je.maxNumberOfTries?[2]:(r.counter+=1,i=Ot([],Ke(t),!1),i.splice(n,1),o=$n(i),r.visited.has(o)?[2]:Rf(i)&&Lh(i,e)?[4,i]:[3,4]):[3,5];case 2:return s.sent(),r.visited.set(o,!0),[5,Ve(Df(i,e,r))];case 3:s.sent(),s.label=4;case 4:return n++,[3,1];case 5:return[2]}})}function Lh(t,e){return bs.querySelector($n(t))===e}var je,bs,Tf,Pf=b(()=>{"use strict";Xe()});var Nh,kf,Lf,Nf=b(()=>{"use strict";Xe();wf();Fn();Pf();mt();Nh=36e5,kf=function(t){var e=t.version,r=t.events,n=[];r.forEach(function(o){var s=JSON.parse(o);s.type==="click"&&n.push(s)});var i=n.reduce(function(o,s){var c=s.x,u=s.y,a=s.selector,l=s.timestamp,f=l-l%Nh,d="".concat(c,":").concat(u,":").concat(a??"",":").concat(f);return o[d]?o[d].count+=1:o[d]=z(z({},s),{timestamp:f,count:1}),o},{});return{version:e,events:Object.values(i)}},Lf=function(t){var e=t.eventsManager,r=t.sessionId,n=t.deviceIdFn;return function(i){if(i.type===vs.Click){var o=Pe();if(o){var s=o.location,c=o.innerHeight,u=o.innerWidth;if(s){var a=i.x,l=i.y,f=Qe.mirror.getNode(i.id),d;f&&(d=Cf(f));var p=Ut.getWindowScroll(o),h=p.left,m=p.top,g={x:a+h,y:l+m,selector:d,viewportHeight:c,viewportWidth:u,pageUrl:s.href,timestamp:Date.now(),type:"click"},_=n();_&&e.addEvent({sessionId:r,event:{type:"interaction",data:JSON.stringify(g)},deviceId:_})}}}}}});var Af,Uf=b(()=>{"use strict";mt();jr();Af=function(){function t(e,r){var n=Pe();n&&n.navigator&&typeof n.navigator.sendBeacon=="function"?this.sendBeacon=function(i,o){try{if(n.navigator.sendBeacon(i,JSON.stringify(o)))return!0}catch{}return!1}:this.sendBeacon=function(){return!1},this.sendXhr=function(i,o){var s=new XMLHttpRequest;return s.open("POST",i,!0),s.setRequestHeader("Accept","*/*"),s.send(JSON.stringify(o)),!0},this.basePageUrl=Wn(r.serverZone),this.context=e}return t.prototype.send=function(e,r){var n=this.context,i=n.sessionId,o=n.type,s=new URLSearchParams({device_id:e,session_id:String(i),type:String(o)}),c="".concat(this.basePageUrl,"?").concat(s.toString());this.sendBeacon(c,r)||this.sendXhr(c,r)},t}()});var _s,Ss,Ff,jf=b(()=>{"use strict";Fn();Uf();mt();_s=Ut.getWindowHeight,Ss=Ut.getWindowWidth,Ff=function(){function t(e){var r=this;this.timestamp=Date.now(),this.hook=function(n){r.update(n)},this.send=function(n){return function(i){var o=n(),s=Pe();s&&o&&r.transport.send(o,{maxScrollX:r._maxScrollX,maxScrollY:r._maxScrollY,maxScrollWidth:r._maxScrollWidth,maxScrollHeight:r._maxScrollHeight,viewportHeight:_s(),viewportWidth:Ss(),pageUrl:s.location.href,timestamp:r.timestamp,type:"scroll"})}},this._maxScrollX=0,this._maxScrollY=0,this._maxScrollWidth=Ss(),this._maxScrollHeight=_s(),this.transport=e}return t.default=function(e,r){return new t(new Af(e,r))},Object.defineProperty(t.prototype,"maxScrollX",{get:function(){return this._maxScrollX},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxScrollY",{get:function(){return this._maxScrollY},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxScrollWidth",{get:function(){return this._maxScrollWidth},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxScrollHeight",{get:function(){return this._maxScrollHeight},enumerable:!1,configurable:!0}),t.prototype.update=function(e){var r=Date.now();if(e.x>this._maxScrollX){var n=Ss();this._maxScrollX=e.x;var i=e.x+n;i>this._maxScrollWidth&&(this._maxScrollWidth=i),this.timestamp=r}if(e.y>this._maxScrollY){var o=_s();this._maxScrollY=e.y;var s=e.y+o;s>this._maxScrollHeight&&(this._maxScrollHeight=s),this.timestamp=r}},t}()});var ws,Bf=b(()=>{"use strict";jr();ws=function(){function t(e){var r=e.sessionId,n=e.deviceId;this.deviceId=n,this.sessionId=r,r&&n&&(this.sessionReplayId=vf(r,n))}return t}()});var Wf,Vf=b(()=>{"use strict";Xe();mt();nt();Fn();Zl();qt();_f();Sf();jr();Nf();jf();Bf();hs();Wf=function(){function t(){var e=this;this.name="@amplitude/session-replay-browser",this.recordCancelCallback=null,this.pageLeaveFns=[],this.teardownEventListeners=function(r){var n=Pe();n&&(n.removeEventListener("blur",e.blurListener),n.removeEventListener("focus",e.focusListener),!r&&n.addEventListener("blur",e.blurListener),!r&&n.addEventListener("focus",e.focusListener),n.self&&"onpagehide"in n.self?(n.removeEventListener("pagehide",e.pageLeaveListener),!r&&n.addEventListener("pagehide",e.pageLeaveListener)):(n.removeEventListener("beforeunload",e.pageLeaveListener),!r&&n.addEventListener("beforeunload",e.pageLeaveListener)))},this.blurListener=function(){e.sendEvents()},this.focusListener=function(){e.recordEvents()},this.pageLeaveListener=function(r){e.pageLeaveFns.forEach(function(n){n(r)})},this.getDebugInfo=function(){if(e.config){var r=z({},e.config),n=r.apiKey;return r.apiKey="****".concat(n.substring(n.length-4)),{config:r,version:Vn}}},this.stopRecordingEvents=function(){try{e.recordCancelCallback&&e.recordCancelCallback(),e.recordCancelCallback=null}catch(n){var r=n;e.loggerProvider.warn("Error occurred while stopping recording: ".concat(r.toString()))}},this.loggerProvider=new pt}return t.prototype.init=function(e,r){return dn(this._init(e,r))},t.prototype.removeInvalidSelectors=function(){var e=this,r;if(!((r=this.config)===null||r===void 0)&&r.privacyConfig){var n=document.createDocumentFragment(),i=function(o){if(o===void 0&&(o=[]),typeof o=="string"&&(o=[o]),o=o.filter(function(s){try{n.querySelector(s)}catch{return e.loggerProvider.warn('[session-replay-browser] omitting selector "'.concat(s,'" because it is invalid')),!1}return!0}),o.length!==0)return o};this.config.privacyConfig.blockSelector=i(this.config.privacyConfig.blockSelector),this.config.privacyConfig.maskSelector=i(this.config.privacyConfig.maskSelector),this.config.privacyConfig.unmaskSelector=i(this.config.privacyConfig.unmaskSelector)}},t.prototype._init=function(e,r){var n,i,o;return W(this,void 0,void 0,function(){var s,c,u,a,l,f;return F(this,function(d){switch(d.label){case 0:return this.loggerProvider=r.loggerProvider||new pt,Object.prototype.hasOwnProperty.call(r,"logLevel")&&this.loggerProvider.enable(r.logLevel),this.identifiers=new ws({sessionId:r.sessionId,deviceId:r.deviceId}),s=this,[4,Ql(e,r)];case 1:return s.joinedConfigGenerator=d.sent(),c=this,[4,this.joinedConfigGenerator.generateJoinedConfig(this.identifiers.sessionId)];case 2:return c.config=d.sent(),this.loggerProvider.debug(JSON.stringify({name:"session replay joined privacy config",privacyConfig:this.config.privacyConfig},null,2)),r.sessionId&&(!((n=this.config.interactionConfig)===null||n===void 0)&&n.enabled)&&(u=Ff.default({sessionId:r.sessionId,type:"interaction"},this.config),this.pageLeaveFns=[u.send(this.getDeviceId.bind(this))],this.scrollHook=u.hook.bind(u)),this.removeInvalidSelectors(),a=[],[4,ms({config:this.config,sessionId:this.identifiers.sessionId,type:"replay"})];case 3:return l=d.sent(),a.push({name:"replay",manager:l}),!((i=this.config.interactionConfig)===null||i===void 0)&&i.enabled?[4,ms({config:this.config,sessionId:this.identifiers.sessionId,type:"interaction",minInterval:(o=this.config.interactionConfig.trackEveryNms)!==null&&o!==void 0?o:_c,maxInterval:Sc,payloadBatcher:kf})]:[3,5];case 4:f=d.sent(),a.push({name:"interaction",manager:f}),d.label=5;case 5:return this.eventsManager=new(gs.bind.apply(gs,Ot([void 0],Ke(a),!1))),this.loggerProvider.log("Installing @amplitude/session-replay-browser."),this.teardownEventListeners(!1),this.initialize(!0),[2]}})})},t.prototype.setSessionId=function(e,r){return dn(this.asyncSetSessionId(e,r))},t.prototype.asyncSetSessionId=function(e,r){return W(this,void 0,void 0,function(){var n,i,o;return F(this,function(s){switch(s.label){case 0:return n=this.identifiers&&this.identifiers.sessionId,n&&this.sendEvents(n),i=r||this.getDeviceId(),this.identifiers=new ws({sessionId:e,deviceId:i}),this.joinedConfigGenerator&&n?(o=this,[4,this.joinedConfigGenerator.generateJoinedConfig(this.identifiers.sessionId)]):[3,2];case 1:o.config=s.sent(),s.label=2;case 2:return this.recordEvents(),[2]}})})},t.prototype.getSessionReplayDebugPropertyValue=function(){var e="";return this.config&&(e=ps(this.config.apiKey).toString()),JSON.stringify({appHash:e})},t.prototype.getSessionReplayProperties=function(){var e;if(!this.config||!this.identifiers)return this.loggerProvider.error("Session replay init has not been called, cannot get session recording properties."),{};var r=this.getShouldRecord();if(r){var n=(e={},e[lc]=this.identifiers.sessionReplayId?this.identifiers.sessionReplayId:null,e);return this.config.debugMode&&(n[pc]=this.getSessionReplayDebugPropertyValue()),n}return{}},t.prototype.sendEvents=function(e){var r,n=e||((r=this.identifiers)===null||r===void 0?void 0:r.sessionId),i=this.getDeviceId();this.eventsManager&&n&&i&&this.eventsManager.sendCurrentSequenceEvents({sessionId:n,deviceId:i})},t.prototype.initialize=function(e){var r;if(e===void 0&&(e=!1),!(!((r=this.identifiers)===null||r===void 0)&&r.sessionId)){this.loggerProvider.log("Session is not being recorded due to lack of session id.");return}var n=this.getDeviceId();if(!n){this.loggerProvider.log("Session is not being recorded due to lack of device id.");return}this.eventsManager&&e&&this.eventsManager.sendStoredEvents({deviceId:n}),this.recordEvents()},t.prototype.shouldOptOut=function(){var e,r,n;if(!((e=this.config)===null||e===void 0)&&e.instanceName){var i=mn(this.config.instanceName).identityStore;n=i.getIdentity().optOut}return n!==void 0?n:(r=this.config)===null||r===void 0?void 0:r.optOut},t.prototype.getShouldRecord=function(){if(!this.identifiers||!this.config||!this.identifiers.sessionId)return this.loggerProvider.warn("Session is not being recorded due to lack of config, please call sessionReplay.init."),!1;if(!this.config.captureEnabled)return this.loggerProvider.log("Session ".concat(this.identifiers.sessionId," not being captured due to capture being disabled for project or because the remote config could not be fetched.")),!1;if(this.shouldOptOut())return this.loggerProvider.log("Opting session ".concat(this.identifiers.sessionId," out of recording due to optOut config.")),!1;var e=mf(this.identifiers.sessionId,this.config.sampleRate);return e||this.loggerProvider.log("Opting session ".concat(this.identifiers.sessionId," out of recording due to sample rate.")),e},t.prototype.getBlockSelectors=function(){var e,r,n,i=(n=(r=(e=this.config)===null||e===void 0?void 0:e.privacyConfig)===null||r===void 0?void 0:r.blockSelector)!==null&&n!==void 0?n:[];if(i.length!==0)return i},t.prototype.getMaskTextSelectors=function(){var e,r,n,i;if(((r=(e=this.config)===null||e===void 0?void 0:e.privacyConfig)===null||r===void 0?void 0:r.defaultMaskLevel)==="conservative")return"*";var o=(i=(n=this.config)===null||n===void 0?void 0:n.privacyConfig)===null||i===void 0?void 0:i.maskSelector;if(o)return o},t.prototype.recordEvents=function(){var e=this,r,n=this.getShouldRecord(),i=(r=this.identifiers)===null||r===void 0?void 0:r.sessionId;if(!(!n||!i||!this.config)){this.stopRecordingEvents();var o=this.config.privacyConfig;this.recordCancelCallback=Qe({emit:function(c){if(e.shouldOptOut()){e.loggerProvider.log("Opting session ".concat(i," out of recording due to optOut config.")),e.stopRecordingEvents(),e.sendEvents();return}var u=JSON.stringify(c),a=e.getDeviceId();e.eventsManager&&a&&e.eventsManager.addEvent({event:{type:"replay",data:u},sessionId:i,deviceId:a})},packFn:es,inlineStylesheet:this.config.shouldInlineStylesheet,hooks:{mouseInteraction:this.eventsManager&&Lf({eventsManager:this.eventsManager,sessionId:i,deviceIdFn:this.getDeviceId.bind(this)}),scroll:this.scrollHook},maskAllInputs:!0,maskTextClass:gn,blockClass:hc,blockSelector:this.getBlockSelectors(),maskInputFn:ds("input",o),maskTextFn:ds("text",o),maskTextSelector:this.getMaskTextSelectors(),recordCanvas:!1,errorHandler:function(c){var u=c;if(u.message.includes("insertRule")&&u.message.includes("CSSStyleSheet")||u._external_)throw u;return e.loggerProvider.warn("Error while recording: ",u.toString()),!0}});var s=this.getDebugInfo();s&&Qe.addCustomEvent("debug-info",s)}},t.prototype.getDeviceId=function(){var e,r,n;if(!((e=this.config)===null||e===void 0)&&e.instanceName){var i=mn(this.config.instanceName).identityStore;n=i.getIdentity().deviceId}return n||((r=this.identifiers)===null||r===void 0?void 0:r.deviceId)},t.prototype.getSessionId=function(){var e;return(e=this.identifiers)===null||e===void 0?void 0:e.sessionId},t.prototype.flush=function(e){var r;return e===void 0&&(e=!1),W(this,void 0,void 0,function(){return F(this,function(n){return[2,(r=this.eventsManager)===null||r===void 0?void 0:r.flush(e)]})})},t.prototype.shutdown=function(){this.teardownEventListeners(!0),this.stopRecordingEvents(),this.sendEvents()},t}()});var Zt,Ah,Bt,Gf=b(()=>{"use strict";nt();To();Vf();Zt=function(t){return function(){var e=t.config,r=e||xo(),n=r.loggerProvider,i=r.logLevel;return{logger:n,logLevel:i}}},Ah=function(){var t=new Wf;return{init:ht(t.init.bind(t),"init",Zt(t)),setSessionId:ht(t.setSessionId.bind(t),"setSessionId",Zt(t)),getSessionId:ht(t.getSessionId.bind(t),"getSessionId",Zt(t)),getSessionReplayProperties:ht(t.getSessionReplayProperties.bind(t),"getSessionReplayProperties",Zt(t)),flush:ht(t.flush.bind(t),"flush",Zt(t)),shutdown:ht(t.shutdown.bind(t),"shutdown",Zt(t))}},Bt=Ah()});var qf,Hf,$f,Es,zf,Kf,Xf=b(()=>{"use strict";Gf();qf=Bt.init,Hf=Bt.setSessionId,$f=Bt.getSessionId,Es=Bt.getSessionReplayProperties,zf=Bt.flush,Kf=Bt.shutdown});var Yf,Fh,jh,zn,Qf=b(()=>{"use strict";qu();Xf();Yf="@amplitude/plugin-session-replay-enrichment-browser",Fh=function(){function t(){this.name=Yf,this.type="enrichment"}return t.prototype.setup=function(e,r){return Tt(this,void 0,void 0,function(){return Ct(this,function(n){return this.config=e,[2]})})},t.prototype.execute=function(e){return Tt(this,void 0,void 0,function(){var r;return Ct(this,function(n){switch(n.label){case 0:return this.config.sessionId&&this.config.sessionId!==$f()?[4,Hf(this.config.sessionId).promise]:[3,2];case 1:n.sent(),n.label=2;case 2:return this.config.sessionId&&this.config.sessionId===e.session_id&&(r=Es(),e.event_properties=dt(dt({},e.event_properties),r)),[2,Promise.resolve(e)]}})})},t}(),jh=function(){function t(e){this.name="@amplitude/plugin-session-replay-browser",this.type="destination",this.options=dt({},e),this.options.forceSessionTracking!==!1&&(this.options.forceSessionTracking=!0)}return t.prototype.setup=function(e,r){var n,i,o,s;return Tt(this,void 0,void 0,function(){return Ct(this,function(c){switch(c.label){case 0:return r?(e.loggerProvider.log("Installing @amplitude/plugin-session-replay."),this.clientRemove=r.remove.bind(r),this.config=e,this.options.forceSessionTracking&&(typeof e.defaultTracking=="boolean"?e.defaultTracking===!1&&(e.defaultTracking={pageViews:!1,formInteractions:!1,fileDownloads:!1,sessions:!0}):e.defaultTracking=dt(dt({},e.defaultTracking),{sessions:!0})),[4,qf(e.apiKey,{instanceName:this.config.instanceName,deviceId:this.config.deviceId,optOut:this.config.optOut,sessionId:this.config.sessionId,loggerProvider:this.config.loggerProvider,logLevel:this.config.logLevel,flushMaxRetries:this.config.flushMaxRetries,serverZone:this.config.serverZone,sampleRate:this.options.sampleRate,privacyConfig:{blockSelector:(n=this.options.privacyConfig)===null||n===void 0?void 0:n.blockSelector,maskSelector:(i=this.options.privacyConfig)===null||i===void 0?void 0:i.maskSelector,unmaskSelector:(o=this.options.privacyConfig)===null||o===void 0?void 0:o.unmaskSelector,defaultMaskLevel:(s=this.options.privacyConfig)===null||s===void 0?void 0:s.defaultMaskLevel},debugMode:this.options.debugMode,configEndpointUrl:this.options.configEndpointUrl,shouldInlineStylesheet:this.options.shouldInlineStylesheet}).promise]):(e.loggerProvider.error("SessionReplayPlugin requires v1.9.1+ of the Amplitude SDK."),[2]);case 1:return c.sent(),[4,r.add(new Fh).promise];case 2:return c.sent(),[2]}})})},t.prototype.execute=function(e){return Tt(this,void 0,void 0,function(){return Ct(this,function(r){return[2,Promise.resolve({event:e,code:200,message:"success"})]})})},t.prototype.flush=function(){return Tt(this,void 0,void 0,function(){return Ct(this,function(e){switch(e.label){case 0:return[4,zf(!1)];case 1:return e.sent(),[2]}})})},t.prototype.teardown=function(){return Tt(this,void 0,void 0,function(){return Ct(this,function(e){switch(e.label){case 0:return[4,this.clientRemove(Yf).promise];case 1:return e.sent(),Kf(),this.config=null,this.clientRemove=null,[2]}})})},t.prototype.getSessionReplayProperties=function(){return Es()},t}(),zn=function(t){return new jh(t)}});var Zf=b(()=>{"use strict";Qf()});function Pw({apiKey:t,user:e,config:r,plugins:n}){if(!ge()||!t)return;let i=e?._id;if(Bu(t,i,r),n?.sessionReplay){let o=zn({sampleRate:1,...n.sessionReplay});Bh(o)}e&&(Wu(i),Wh(Vh(e)))}function kw(t,e,r){!ge()||!t||Vu(t,e,r)}function Bh(t){!ge()||!t||Fu(t)}function Wh(t){if(!ge()||!t)return;let e=new Be;for(let[r,n]of Object.entries(t))e.set(r,n);ju(e)}function Vh(t){return{userId:t._id,customer:!!t.plan,coupon:t.stripe?.coupon_name,planType:t.plan?.level||"free",planPeriod:t.plan?.interval,totalProjects:t.created_mags_count||0,publishedProjects:t.mags_count||0,customDomainProjects:t.projectDomains||0,betaTester:!!t.permissions?.can_use_beta_testing,lifeTimeValue:t.analytics_data?.lifeTimeValue||0,numOfVisits:["profile","public","editor"].reduce((e,r)=>e+(t.analytics_data?.[`visit_${r}`]||0),0),job:t.job?.toLowerCase().includes("other")?"other":t.job?.toLowerCase(),project:t.future_project?.toLowerCase().includes("other")?"other":t.future_project?.toLowerCase(),audience:t.design_purpose?.toLowerCase().includes("other")?"other":t.design_purpose?.toLowerCase(),wordOfMouth:t.discovery_\u0441hannels?.map(e=>(e=e.toLowerCase(),e.startsWith("other:")?"other":e)),signUpDate:Is(t.createDate),lastVisitDate:Is(t.last_token_refresh),firstPaymentDate:Is(t.stripe?.subscription_start)}}function Is(t){return t?Rs(Os(t),"yyyy-MM-dd"):""}var Jf=b(()=>{"use strict";Gu();Zf();ud();er()});var ed=Ts((Kn,xs)=>{"use strict";(function(t,e){typeof Kn=="object"&&typeof xs=="object"?xs.exports=e():typeof define=="function"&&define.amd?define([],e):typeof Kn=="object"?Kn.ReactPixel=e():t.ReactPixel=e()})(window,function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(n,i,o){r.o(n,i)||Object.defineProperty(n,i,{enumerable:!0,get:o})},r.r=function(n){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},r.t=function(n,i){if(1&i&&(n=r(n)),8&i||4&i&&typeof n=="object"&&n&&n.__esModule)return n;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:n}),2&i&&typeof n!="string")for(var s in n)r.d(o,s,function(c){return n[c]}.bind(null,s));return o},r.n=function(n){var i=n&&n.__esModule?function(){return n.default}:function(){return n};return r.d(i,"a",i),i},r.o=function(n,i){return Object.prototype.hasOwnProperty.call(n,i)},r.p="",r(r.s=0)}([function(t,e,r){t.exports=r(1)},function(t,e,r){"use strict";function n(f){return function(d){if(Array.isArray(d))return i(d)}(f)||function(d){if(typeof Symbol<"u"&&Symbol.iterator in Object(d))return Array.from(d)}(f)||function(d,p){if(d){if(typeof d=="string")return i(d,p);var h=Object.prototype.toString.call(d).slice(8,-1);if(h==="Object"&&d.constructor&&(h=d.constructor.name),h==="Map"||h==="Set")return Array.from(d);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return i(d,p)}}(f)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function i(f,d){(d==null||d>f.length)&&(d=f.length);for(var p=0,h=new Array(d);p<d;p++)h[p]=f[p];return h}r.r(e);var o=!1,s=!1,c=function(){var f;if(s){for(var d=arguments.length,p=new Array(d),h=0;h<d;h++)p[h]=arguments[h];(f=console).info.apply(f,n(["[react-facebook-pixel]"].concat(p)))}},u=function(){var f;if(s){for(var d=arguments.length,p=new Array(d),h=0;h<d;h++)p[h]=arguments[h];(f=console).info.apply(f,n(["[react-facebook-pixel]"].concat(p)))}},a=function(){return o||c("Pixel not initialized before using call ReactPixel.init with required params"),o},l={autoConfig:!0,debug:!1};e.default={init:function(f){var d,p,h,m,g,_,v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:l;o=typeof window<"u"&&!!window.fbq,d=window,p=document,h="script",d.fbq||(m=d.fbq=function(){m.callMethod?m.callMethod.apply(m,arguments):m.queue.push(arguments)},d._fbq||(d._fbq=m),m.push=m,m.loaded=!0,m.version="2.0",m.queue=[],(g=p.createElement(h)).async=!0,g.src="https://connect.facebook.net/en_US/fbevents.js",(_=p.getElementsByTagName(h)[0]).parentNode.insertBefore(g,_)),f?(y.autoConfig===!1&&fbq("set","autoConfig",!1,f),fbq("init",f,v),o=!0,s=y.debug):c("Please insert pixel id for initializing")},pageView:function(){a()&&(fbq("track","PageView"),s&&u("called fbq('track', 'PageView');"))},track:function(f,d,p){a()&&(fbq("track",f,d,p),s&&(u("called fbq('track', '".concat(f,"');")),d&&u("with data",d),p&&u("with eventData",p)))},trackSingle:function(f,d,p,h){a()&&(fbq("trackSingle",f,d,p,h),s&&(u("called fbq('trackSingle', '".concat(f,"', '").concat(d,"');")),p&&u("with data",p),h&&u("with eventData",h)))},trackCustom:function(f,d,p){a()&&(fbq("trackCustom",f,d,p),s&&(u("called fbq('trackCustom', '".concat(f,"');")),d&&u("with data",d),p&&u("with eventData",p)))},trackSingleCustom:function(f,d,p,h){a()&&(fbq("trackSingle",f,d,p,h),s&&(u("called fbq('trackSingleCustom', '".concat(f,"', '").concat(d,"');")),p&&u("with data",p),h&&u("with eventData",h)))},grantConsent:function(){a()&&(fbq("consent","grant"),s&&u("called fbq('consent', 'grant');"))},revokeConsent:function(){a()&&(fbq("consent","revoke"),s&&u("called fbq('consent', 'revoke');"))},fbq:function(f){function d(){return f.apply(this,arguments)}return d.toString=function(){return f.toString()},d}(function(){if(a()){for(var f=arguments.length,d=new Array(f),p=0;p<f;p++)d[p]=arguments[p];fbq.apply(void 0,d),s&&(u("called fbq('".concat(d.slice(0,2).join("', '"),"')")),d[2]&&u("with data",d[2]))}})}}])})});var td,Aw,rd=b(()=>{"use strict";er();td=!1,Aw=({id:t,eventName:e,eventParams:r={},eventIdParams:n={}})=>{if(!ge())return;let i=ed();td||(i.default.init(t),td=!0),i.default.track(e,r,n)}});var nd,id=b(()=>{"use strict";(function(t){t.TemplatePreview="template preview",t.TemplatesPage="templates page",t.Profile="profile",t.Help="help",t.Editor="editor",t.EditorHelp="editor help",t.EditorPages="editor pages"})(nd||(nd={}))});var Gh,od=b(()=>{"use strict";Gh=Cs(ad())});var qh=b(()=>{"use strict";Zn();Zn();Gs();id();od();rd();Jf()});export{Ms as a,vd as b,Bs as c,Ws as d,nd as e,Pw as f,kw as g,Aw as h,qh as i};
